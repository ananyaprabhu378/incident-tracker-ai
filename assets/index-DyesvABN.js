function f1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function p1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cg={exports:{}},hl={},Rg={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var co=Symbol.for("react.element"),m1=Symbol.for("react.portal"),g1=Symbol.for("react.fragment"),y1=Symbol.for("react.strict_mode"),v1=Symbol.for("react.profiler"),_1=Symbol.for("react.provider"),w1=Symbol.for("react.context"),E1=Symbol.for("react.forward_ref"),T1=Symbol.for("react.suspense"),x1=Symbol.for("react.memo"),S1=Symbol.for("react.lazy"),Kf=Symbol.iterator;function I1(t){return t===null||typeof t!="object"?null:(t=Kf&&t[Kf]||t["@@iterator"],typeof t=="function"?t:null)}var Pg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kg=Object.assign,bg={};function ki(t,e,n){this.props=t,this.context=e,this.refs=bg,this.updater=n||Pg}ki.prototype.isReactComponent={};ki.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ki.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ng(){}Ng.prototype=ki.prototype;function fh(t,e,n){this.props=t,this.context=e,this.refs=bg,this.updater=n||Pg}var ph=fh.prototype=new Ng;ph.constructor=fh;kg(ph,ki.prototype);ph.isPureReactComponent=!0;var Yf=Array.isArray,Vg=Object.prototype.hasOwnProperty,mh={current:null},Dg={key:!0,ref:!0,__self:!0,__source:!0};function jg(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Vg.call(e,r)&&!Dg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:co,type:t,key:s,ref:o,props:i,_owner:mh.current}}function A1(t,e){return{$$typeof:co,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gh(t){return typeof t=="object"&&t!==null&&t.$$typeof===co}function C1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xf=/\/+/g;function hu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?C1(""+t.key):e.toString(36)}function aa(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case co:case m1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+hu(o,0):r,Yf(i)?(n="",t!=null&&(n=t.replace(Xf,"$&/")+"/"),aa(i,e,n,"",function(h){return h})):i!=null&&(gh(i)&&(i=A1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Xf,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Yf(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+hu(s,l);o+=aa(s,e,n,u,i)}else if(u=I1(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+hu(s,l++),o+=aa(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lo(t,e,n){if(t==null)return t;var r=[],i=0;return aa(t,r,"","",function(s){return e.call(n,s,i++)}),r}function R1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var lt={current:null},la={transition:null},P1={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:la,ReactCurrentOwner:mh};function Og(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Lo,forEach:function(t,e,n){Lo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lo(t,function(){e++}),e},toArray:function(t){return Lo(t,function(e){return e})||[]},only:function(t){if(!gh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=ki;Z.Fragment=g1;Z.Profiler=v1;Z.PureComponent=fh;Z.StrictMode=y1;Z.Suspense=T1;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P1;Z.act=Og;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=kg({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=mh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Vg.call(e,u)&&!Dg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:co,type:t.type,key:i,ref:s,props:r,_owner:o}};Z.createContext=function(t){return t={$$typeof:w1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_1,_context:t},t.Consumer=t};Z.createElement=jg;Z.createFactory=function(t){var e=jg.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:E1,render:t}};Z.isValidElement=gh;Z.lazy=function(t){return{$$typeof:S1,_payload:{_status:-1,_result:t},_init:R1}};Z.memo=function(t,e){return{$$typeof:x1,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=la.transition;la.transition={};try{t()}finally{la.transition=e}};Z.unstable_act=Og;Z.useCallback=function(t,e){return lt.current.useCallback(t,e)};Z.useContext=function(t){return lt.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return lt.current.useDeferredValue(t)};Z.useEffect=function(t,e){return lt.current.useEffect(t,e)};Z.useId=function(){return lt.current.useId()};Z.useImperativeHandle=function(t,e,n){return lt.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return lt.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return lt.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return lt.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return lt.current.useReducer(t,e,n)};Z.useRef=function(t){return lt.current.useRef(t)};Z.useState=function(t){return lt.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return lt.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return lt.current.useTransition()};Z.version="18.3.1";Rg.exports=Z;var z=Rg.exports;const Lg=p1(z),k1=f1({__proto__:null,default:Lg},[z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b1=z,N1=Symbol.for("react.element"),V1=Symbol.for("react.fragment"),D1=Object.prototype.hasOwnProperty,j1=b1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O1={key:!0,ref:!0,__self:!0,__source:!0};function Mg(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)D1.call(e,r)&&!O1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:N1,type:t,key:s,ref:o,props:i,_owner:j1.current}}hl.Fragment=V1;hl.jsx=Mg;hl.jsxs=Mg;Cg.exports=hl;var f=Cg.exports,Qu={},Fg={exports:{}},xt={},zg={exports:{}},Ug={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,$){var K=L.length;L.push($);e:for(;0<K;){var ee=K-1>>>1,oe=L[ee];if(0<i(oe,$))L[ee]=$,L[K]=oe,K=ee;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var $=L[0],K=L.pop();if(K!==$){L[0]=K;e:for(var ee=0,oe=L.length,Re=oe>>>1;ee<Re;){var Me=2*(ee+1)-1,jt=L[Me],rt=Me+1,Ot=L[rt];if(0>i(jt,K))rt<oe&&0>i(Ot,jt)?(L[ee]=Ot,L[rt]=K,ee=rt):(L[ee]=jt,L[Me]=K,ee=Me);else if(rt<oe&&0>i(Ot,K))L[ee]=Ot,L[rt]=K,ee=rt;else break e}}return $}function i(L,$){var K=L.sortIndex-$.sortIndex;return K!==0?K:L.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,m=null,g=3,A=!1,k=!1,b=!1,R=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var $=n(h);$!==null;){if($.callback===null)r(h);else if($.startTime<=L)r(h),$.sortIndex=$.expirationTime,e(u,$);else break;$=n(h)}}function V(L){if(b=!1,w(L),!k)if(n(u)!==null)k=!0,It(M);else{var $=n(h);$!==null&&Dt(V,$.startTime-L)}}function M(L,$){k=!1,b&&(b=!1,x(y),y=-1),A=!0;var K=g;try{for(w($),m=n(u);m!==null&&(!(m.expirationTime>$)||L&&!C());){var ee=m.callback;if(typeof ee=="function"){m.callback=null,g=m.priorityLevel;var oe=ee(m.expirationTime<=$);$=t.unstable_now(),typeof oe=="function"?m.callback=oe:m===n(u)&&r(u),w($)}else r(u);m=n(u)}if(m!==null)var Re=!0;else{var Me=n(h);Me!==null&&Dt(V,Me.startTime-$),Re=!1}return Re}finally{m=null,g=K,A=!1}}var F=!1,E=null,y=-1,T=5,I=-1;function C(){return!(t.unstable_now()-I<T)}function P(){if(E!==null){var L=t.unstable_now();I=L;var $=!0;try{$=E(!0,L)}finally{$?S():(F=!1,E=null)}}else F=!1}var S;if(typeof _=="function")S=function(){_(P)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Ce=de.port2;de.port1.onmessage=P,S=function(){Ce.postMessage(null)}}else S=function(){R(P,0)};function It(L){E=L,F||(F=!0,S())}function Dt(L,$){y=R(function(){L(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){k||A||(k=!0,It(M))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(L){switch(g){case 1:case 2:case 3:var $=3;break;default:$=g}var K=g;g=$;try{return L()}finally{g=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,$){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var K=g;g=L;try{return $()}finally{g=K}},t.unstable_scheduleCallback=function(L,$,K){var ee=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ee+K:ee):K=ee,L){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=K+oe,L={id:p++,callback:$,priorityLevel:L,startTime:K,expirationTime:oe,sortIndex:-1},K>ee?(L.sortIndex=K,e(h,L),n(u)===null&&L===n(h)&&(b?(x(y),y=-1):b=!0,Dt(V,K-ee))):(L.sortIndex=oe,e(u,L),k||A||(k=!0,It(M))),L},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(L){var $=g;return function(){var K=g;g=$;try{return L.apply(this,arguments)}finally{g=K}}}})(Ug);zg.exports=Ug;var L1=zg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M1=z,Tt=L1;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bg=new Set,js={};function Or(t,e){yi(t,e),yi(t+"Capture",e)}function yi(t,e){for(js[t]=e,t=0;t<e.length;t++)Bg.add(e[t])}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ku=Object.prototype.hasOwnProperty,F1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jf={},Zf={};function z1(t){return Ku.call(Zf,t)?!0:Ku.call(Jf,t)?!1:F1.test(t)?Zf[t]=!0:(Jf[t]=!0,!1)}function U1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function B1(t,e,n,r){if(e===null||typeof e>"u"||U1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ge[t]=new ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ge[e]=new ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ge[t]=new ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ge[t]=new ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ge[t]=new ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ge[t]=new ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ge[t]=new ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ge[t]=new ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ge[t]=new ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var yh=/[\-:]([a-z])/g;function vh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yh,vh);Ge[e]=new ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yh,vh);Ge[e]=new ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yh,vh);Ge[e]=new ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ge[t]=new ut(t,1,!1,t.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ge[t]=new ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function _h(t,e,n,r){var i=Ge.hasOwnProperty(e)?Ge[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(B1(e,n,i,r)&&(n=null),r||i===null?z1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var wn=M1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mo=Symbol.for("react.element"),Yr=Symbol.for("react.portal"),Xr=Symbol.for("react.fragment"),wh=Symbol.for("react.strict_mode"),Yu=Symbol.for("react.profiler"),$g=Symbol.for("react.provider"),Hg=Symbol.for("react.context"),Eh=Symbol.for("react.forward_ref"),Xu=Symbol.for("react.suspense"),Ju=Symbol.for("react.suspense_list"),Th=Symbol.for("react.memo"),Rn=Symbol.for("react.lazy"),Wg=Symbol.for("react.offscreen"),ep=Symbol.iterator;function is(t){return t===null||typeof t!="object"?null:(t=ep&&t[ep]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,du;function fs(t){if(du===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);du=e&&e[1]||""}return`
`+du+t}var fu=!1;function pu(t,e){if(!t||fu)return"";fu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{fu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fs(t):""}function $1(t){switch(t.tag){case 5:return fs(t.type);case 16:return fs("Lazy");case 13:return fs("Suspense");case 19:return fs("SuspenseList");case 0:case 2:case 15:return t=pu(t.type,!1),t;case 11:return t=pu(t.type.render,!1),t;case 1:return t=pu(t.type,!0),t;default:return""}}function Zu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xr:return"Fragment";case Yr:return"Portal";case Yu:return"Profiler";case wh:return"StrictMode";case Xu:return"Suspense";case Ju:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hg:return(t.displayName||"Context")+".Consumer";case $g:return(t._context.displayName||"Context")+".Provider";case Eh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Th:return e=t.displayName||null,e!==null?e:Zu(t.type)||"Memo";case Rn:e=t._payload,t=t._init;try{return Zu(t(e))}catch{}}return null}function H1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zu(e);case 8:return e===wh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function W1(t){var e=qg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fo(t){t._valueTracker||(t._valueTracker=W1(t))}function Gg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ia(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ec(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qg(t,e){e=e.checked,e!=null&&_h(t,"checked",e,!1)}function tc(t,e){Qg(t,e);var n=Kn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nc(t,e.type,n):e.hasOwnProperty("defaultValue")&&nc(t,e.type,Kn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function np(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nc(t,e,n){(e!=="number"||Ia(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ps=Array.isArray;function li(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function rc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(ps(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kn(n)}}function Kg(t,e){var n=Kn(e.value),r=Kn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ip(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Yg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ic(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Yg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zo,Xg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zo=zo||document.createElement("div"),zo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Os(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},q1=["Webkit","ms","Moz","O"];Object.keys(Es).forEach(function(t){q1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Es[e]=Es[t]})});function Jg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Es.hasOwnProperty(t)&&Es[t]?(""+e).trim():e+"px"}function Zg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Jg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var G1=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sc(t,e){if(e){if(G1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function oc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ac=null;function xh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lc=null,ui=null,ci=null;function sp(t){if(t=po(t)){if(typeof lc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=gl(e),lc(t.stateNode,t.type,e))}}function ey(t){ui?ci?ci.push(t):ci=[t]:ui=t}function ty(){if(ui){var t=ui,e=ci;if(ci=ui=null,sp(t),e)for(t=0;t<e.length;t++)sp(e[t])}}function ny(t,e){return t(e)}function ry(){}var mu=!1;function iy(t,e,n){if(mu)return t(e,n);mu=!0;try{return ny(t,e,n)}finally{mu=!1,(ui!==null||ci!==null)&&(ry(),ty())}}function Ls(t,e){var n=t.stateNode;if(n===null)return null;var r=gl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var uc=!1;if(fn)try{var ss={};Object.defineProperty(ss,"passive",{get:function(){uc=!0}}),window.addEventListener("test",ss,ss),window.removeEventListener("test",ss,ss)}catch{uc=!1}function Q1(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Ts=!1,Aa=null,Ca=!1,cc=null,K1={onError:function(t){Ts=!0,Aa=t}};function Y1(t,e,n,r,i,s,o,l,u){Ts=!1,Aa=null,Q1.apply(K1,arguments)}function X1(t,e,n,r,i,s,o,l,u){if(Y1.apply(this,arguments),Ts){if(Ts){var h=Aa;Ts=!1,Aa=null}else throw Error(U(198));Ca||(Ca=!0,cc=h)}}function Lr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function op(t){if(Lr(t)!==t)throw Error(U(188))}function J1(t){var e=t.alternate;if(!e){if(e=Lr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return op(i),t;if(s===r)return op(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function oy(t){return t=J1(t),t!==null?ay(t):null}function ay(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ay(t);if(e!==null)return e;t=t.sibling}return null}var ly=Tt.unstable_scheduleCallback,ap=Tt.unstable_cancelCallback,Z1=Tt.unstable_shouldYield,ew=Tt.unstable_requestPaint,Ie=Tt.unstable_now,tw=Tt.unstable_getCurrentPriorityLevel,Sh=Tt.unstable_ImmediatePriority,uy=Tt.unstable_UserBlockingPriority,Ra=Tt.unstable_NormalPriority,nw=Tt.unstable_LowPriority,cy=Tt.unstable_IdlePriority,dl=null,Xt=null;function rw(t){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(dl,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:ow,iw=Math.log,sw=Math.LN2;function ow(t){return t>>>=0,t===0?32:31-(iw(t)/sw|0)|0}var Uo=64,Bo=4194304;function ms(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=ms(l):(s&=o,s!==0&&(r=ms(s)))}else o=n&~i,o!==0?r=ms(o):s!==0&&(r=ms(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ut(e),i=1<<n,r|=t[n],e&=~i;return r}function aw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ut(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=aw(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function hc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hy(){var t=Uo;return Uo<<=1,!(Uo&4194240)&&(Uo=64),t}function gu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ho(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ut(e),t[e]=n}function uw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ut(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ih(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ut(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var le=0;function dy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fy,Ah,py,my,gy,dc=!1,$o=[],On=null,Ln=null,Mn=null,Ms=new Map,Fs=new Map,kn=[],cw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lp(t,e){switch(t){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":Ms.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fs.delete(e.pointerId)}}function os(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=po(e),e!==null&&Ah(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function hw(t,e,n,r,i){switch(e){case"focusin":return On=os(On,t,e,n,r,i),!0;case"dragenter":return Ln=os(Ln,t,e,n,r,i),!0;case"mouseover":return Mn=os(Mn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ms.set(s,os(Ms.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Fs.set(s,os(Fs.get(s)||null,t,e,n,r,i)),!0}return!1}function yy(t){var e=wr(t.target);if(e!==null){var n=Lr(e);if(n!==null){if(e=n.tag,e===13){if(e=sy(n),e!==null){t.blockedOn=e,gy(t.priority,function(){py(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ua(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ac=r,n.target.dispatchEvent(r),ac=null}else return e=po(n),e!==null&&Ah(e),t.blockedOn=n,!1;e.shift()}return!0}function up(t,e,n){ua(t)&&n.delete(e)}function dw(){dc=!1,On!==null&&ua(On)&&(On=null),Ln!==null&&ua(Ln)&&(Ln=null),Mn!==null&&ua(Mn)&&(Mn=null),Ms.forEach(up),Fs.forEach(up)}function as(t,e){t.blockedOn===e&&(t.blockedOn=null,dc||(dc=!0,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,dw)))}function zs(t){function e(i){return as(i,t)}if(0<$o.length){as($o[0],t);for(var n=1;n<$o.length;n++){var r=$o[n];r.blockedOn===t&&(r.blockedOn=null)}}for(On!==null&&as(On,t),Ln!==null&&as(Ln,t),Mn!==null&&as(Mn,t),Ms.forEach(e),Fs.forEach(e),n=0;n<kn.length;n++)r=kn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<kn.length&&(n=kn[0],n.blockedOn===null);)yy(n),n.blockedOn===null&&kn.shift()}var hi=wn.ReactCurrentBatchConfig,ka=!0;function fw(t,e,n,r){var i=le,s=hi.transition;hi.transition=null;try{le=1,Ch(t,e,n,r)}finally{le=i,hi.transition=s}}function pw(t,e,n,r){var i=le,s=hi.transition;hi.transition=null;try{le=4,Ch(t,e,n,r)}finally{le=i,hi.transition=s}}function Ch(t,e,n,r){if(ka){var i=fc(t,e,n,r);if(i===null)Au(t,e,r,ba,n),lp(t,r);else if(hw(i,t,e,n,r))r.stopPropagation();else if(lp(t,r),e&4&&-1<cw.indexOf(t)){for(;i!==null;){var s=po(i);if(s!==null&&fy(s),s=fc(t,e,n,r),s===null&&Au(t,e,r,ba,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Au(t,e,r,null,n)}}var ba=null;function fc(t,e,n,r){if(ba=null,t=xh(r),t=wr(t),t!==null)if(e=Lr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ba=t,null}function vy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tw()){case Sh:return 1;case uy:return 4;case Ra:case nw:return 16;case cy:return 536870912;default:return 16}default:return 16}}var Nn=null,Rh=null,ca=null;function _y(){if(ca)return ca;var t,e=Rh,n=e.length,r,i="value"in Nn?Nn.value:Nn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ca=i.slice(t,1<r?1-r:void 0)}function ha(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ho(){return!0}function cp(){return!1}function St(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ho:cp,this.isPropagationStopped=cp,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),e}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ph=St(bi),fo=we({},bi,{view:0,detail:0}),mw=St(fo),yu,vu,ls,fl=we({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ls&&(ls&&t.type==="mousemove"?(yu=t.screenX-ls.screenX,vu=t.screenY-ls.screenY):vu=yu=0,ls=t),yu)},movementY:function(t){return"movementY"in t?t.movementY:vu}}),hp=St(fl),gw=we({},fl,{dataTransfer:0}),yw=St(gw),vw=we({},fo,{relatedTarget:0}),_u=St(vw),_w=we({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),ww=St(_w),Ew=we({},bi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tw=St(Ew),xw=we({},bi,{data:0}),dp=St(xw),Sw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Aw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Aw[t])?!!e[t]:!1}function kh(){return Cw}var Rw=we({},fo,{key:function(t){if(t.key){var e=Sw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ha(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Iw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kh,charCode:function(t){return t.type==="keypress"?ha(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ha(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pw=St(Rw),kw=we({},fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fp=St(kw),bw=we({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kh}),Nw=St(bw),Vw=we({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dw=St(Vw),jw=we({},fl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ow=St(jw),Lw=[9,13,27,32],bh=fn&&"CompositionEvent"in window,xs=null;fn&&"documentMode"in document&&(xs=document.documentMode);var Mw=fn&&"TextEvent"in window&&!xs,wy=fn&&(!bh||xs&&8<xs&&11>=xs),pp=" ",mp=!1;function Ey(t,e){switch(t){case"keyup":return Lw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ty(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jr=!1;function Fw(t,e){switch(t){case"compositionend":return Ty(e);case"keypress":return e.which!==32?null:(mp=!0,pp);case"textInput":return t=e.data,t===pp&&mp?null:t;default:return null}}function zw(t,e){if(Jr)return t==="compositionend"||!bh&&Ey(t,e)?(t=_y(),ca=Rh=Nn=null,Jr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wy&&e.locale!=="ko"?null:e.data;default:return null}}var Uw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Uw[t.type]:e==="textarea"}function xy(t,e,n,r){ey(r),e=Na(e,"onChange"),0<e.length&&(n=new Ph("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ss=null,Us=null;function Bw(t){Dy(t,0)}function pl(t){var e=ti(t);if(Gg(e))return t}function $w(t,e){if(t==="change")return e}var Sy=!1;if(fn){var wu;if(fn){var Eu="oninput"in document;if(!Eu){var yp=document.createElement("div");yp.setAttribute("oninput","return;"),Eu=typeof yp.oninput=="function"}wu=Eu}else wu=!1;Sy=wu&&(!document.documentMode||9<document.documentMode)}function vp(){Ss&&(Ss.detachEvent("onpropertychange",Iy),Us=Ss=null)}function Iy(t){if(t.propertyName==="value"&&pl(Us)){var e=[];xy(e,Us,t,xh(t)),iy(Bw,e)}}function Hw(t,e,n){t==="focusin"?(vp(),Ss=e,Us=n,Ss.attachEvent("onpropertychange",Iy)):t==="focusout"&&vp()}function Ww(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pl(Us)}function qw(t,e){if(t==="click")return pl(e)}function Gw(t,e){if(t==="input"||t==="change")return pl(e)}function Qw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $t=typeof Object.is=="function"?Object.is:Qw;function Bs(t,e){if($t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ku.call(e,i)||!$t(t[i],e[i]))return!1}return!0}function _p(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wp(t,e){var n=_p(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_p(n)}}function Ay(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ay(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Cy(){for(var t=window,e=Ia();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ia(t.document)}return e}function Nh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Kw(t){var e=Cy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ay(n.ownerDocument.documentElement,n)){if(r!==null&&Nh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=wp(n,s);var o=wp(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Yw=fn&&"documentMode"in document&&11>=document.documentMode,Zr=null,pc=null,Is=null,mc=!1;function Ep(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mc||Zr==null||Zr!==Ia(r)||(r=Zr,"selectionStart"in r&&Nh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Is&&Bs(Is,r)||(Is=r,r=Na(pc,"onSelect"),0<r.length&&(e=new Ph("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zr)))}function Wo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ei={animationend:Wo("Animation","AnimationEnd"),animationiteration:Wo("Animation","AnimationIteration"),animationstart:Wo("Animation","AnimationStart"),transitionend:Wo("Transition","TransitionEnd")},Tu={},Ry={};fn&&(Ry=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function ml(t){if(Tu[t])return Tu[t];if(!ei[t])return t;var e=ei[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ry)return Tu[t]=e[n];return t}var Py=ml("animationend"),ky=ml("animationiteration"),by=ml("animationstart"),Ny=ml("transitionend"),Vy=new Map,Tp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(t,e){Vy.set(t,e),Or(e,[t])}for(var xu=0;xu<Tp.length;xu++){var Su=Tp[xu],Xw=Su.toLowerCase(),Jw=Su[0].toUpperCase()+Su.slice(1);rr(Xw,"on"+Jw)}rr(Py,"onAnimationEnd");rr(ky,"onAnimationIteration");rr(by,"onAnimationStart");rr("dblclick","onDoubleClick");rr("focusin","onFocus");rr("focusout","onBlur");rr(Ny,"onTransitionEnd");yi("onMouseEnter",["mouseout","mouseover"]);yi("onMouseLeave",["mouseout","mouseover"]);yi("onPointerEnter",["pointerout","pointerover"]);yi("onPointerLeave",["pointerout","pointerover"]);Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Or("onBeforeInput",["compositionend","keypress","textInput","paste"]);Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zw=new Set("cancel close invalid load scroll toggle".split(" ").concat(gs));function xp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,X1(r,e,void 0,t),t.currentTarget=null}function Dy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;xp(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;xp(i,l,h),s=u}}}if(Ca)throw t=cc,Ca=!1,cc=null,t}function pe(t,e){var n=e[wc];n===void 0&&(n=e[wc]=new Set);var r=t+"__bubble";n.has(r)||(jy(e,t,2,!1),n.add(r))}function Iu(t,e,n){var r=0;e&&(r|=4),jy(n,t,r,e)}var qo="_reactListening"+Math.random().toString(36).slice(2);function $s(t){if(!t[qo]){t[qo]=!0,Bg.forEach(function(n){n!=="selectionchange"&&(Zw.has(n)||Iu(n,!1,t),Iu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qo]||(e[qo]=!0,Iu("selectionchange",!1,e))}}function jy(t,e,n,r){switch(vy(e)){case 1:var i=fw;break;case 4:i=pw;break;default:i=Ch}n=i.bind(null,e,n,t),i=void 0,!uc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Au(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=wr(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}iy(function(){var h=s,p=xh(n),m=[];e:{var g=Vy.get(t);if(g!==void 0){var A=Ph,k=t;switch(t){case"keypress":if(ha(n)===0)break e;case"keydown":case"keyup":A=Pw;break;case"focusin":k="focus",A=_u;break;case"focusout":k="blur",A=_u;break;case"beforeblur":case"afterblur":A=_u;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=yw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=Nw;break;case Py:case ky:case by:A=ww;break;case Ny:A=Dw;break;case"scroll":A=mw;break;case"wheel":A=Ow;break;case"copy":case"cut":case"paste":A=Tw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=fp}var b=(e&4)!==0,R=!b&&t==="scroll",x=b?g!==null?g+"Capture":null:g;b=[];for(var _=h,w;_!==null;){w=_;var V=w.stateNode;if(w.tag===5&&V!==null&&(w=V,x!==null&&(V=Ls(_,x),V!=null&&b.push(Hs(_,V,w)))),R)break;_=_.return}0<b.length&&(g=new A(g,k,null,n,p),m.push({event:g,listeners:b}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",g&&n!==ac&&(k=n.relatedTarget||n.fromElement)&&(wr(k)||k[pn]))break e;if((A||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,A?(k=n.relatedTarget||n.toElement,A=h,k=k?wr(k):null,k!==null&&(R=Lr(k),k!==R||k.tag!==5&&k.tag!==6)&&(k=null)):(A=null,k=h),A!==k)){if(b=hp,V="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(b=fp,V="onPointerLeave",x="onPointerEnter",_="pointer"),R=A==null?g:ti(A),w=k==null?g:ti(k),g=new b(V,_+"leave",A,n,p),g.target=R,g.relatedTarget=w,V=null,wr(p)===h&&(b=new b(x,_+"enter",k,n,p),b.target=w,b.relatedTarget=R,V=b),R=V,A&&k)t:{for(b=A,x=k,_=0,w=b;w;w=Wr(w))_++;for(w=0,V=x;V;V=Wr(V))w++;for(;0<_-w;)b=Wr(b),_--;for(;0<w-_;)x=Wr(x),w--;for(;_--;){if(b===x||x!==null&&b===x.alternate)break t;b=Wr(b),x=Wr(x)}b=null}else b=null;A!==null&&Sp(m,g,A,b,!1),k!==null&&R!==null&&Sp(m,R,k,b,!0)}}e:{if(g=h?ti(h):window,A=g.nodeName&&g.nodeName.toLowerCase(),A==="select"||A==="input"&&g.type==="file")var M=$w;else if(gp(g))if(Sy)M=Gw;else{M=Ww;var F=Hw}else(A=g.nodeName)&&A.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=qw);if(M&&(M=M(t,h))){xy(m,M,n,p);break e}F&&F(t,g,h),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&nc(g,"number",g.value)}switch(F=h?ti(h):window,t){case"focusin":(gp(F)||F.contentEditable==="true")&&(Zr=F,pc=h,Is=null);break;case"focusout":Is=pc=Zr=null;break;case"mousedown":mc=!0;break;case"contextmenu":case"mouseup":case"dragend":mc=!1,Ep(m,n,p);break;case"selectionchange":if(Yw)break;case"keydown":case"keyup":Ep(m,n,p)}var E;if(bh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Jr?Ey(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(wy&&n.locale!=="ko"&&(Jr||y!=="onCompositionStart"?y==="onCompositionEnd"&&Jr&&(E=_y()):(Nn=p,Rh="value"in Nn?Nn.value:Nn.textContent,Jr=!0)),F=Na(h,y),0<F.length&&(y=new dp(y,t,null,n,p),m.push({event:y,listeners:F}),E?y.data=E:(E=Ty(n),E!==null&&(y.data=E)))),(E=Mw?Fw(t,n):zw(t,n))&&(h=Na(h,"onBeforeInput"),0<h.length&&(p=new dp("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=E))}Dy(m,e)})}function Hs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Na(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ls(t,n),s!=null&&r.unshift(Hs(t,s,i)),s=Ls(t,e),s!=null&&r.push(Hs(t,s,i))),t=t.return}return r}function Wr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sp(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Ls(n,s),u!=null&&o.unshift(Hs(n,u,l))):i||(u=Ls(n,s),u!=null&&o.push(Hs(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var eE=/\r\n?/g,tE=/\u0000|\uFFFD/g;function Ip(t){return(typeof t=="string"?t:""+t).replace(eE,`
`).replace(tE,"")}function Go(t,e,n){if(e=Ip(e),Ip(t)!==e&&n)throw Error(U(425))}function Va(){}var gc=null,yc=null;function vc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _c=typeof setTimeout=="function"?setTimeout:void 0,nE=typeof clearTimeout=="function"?clearTimeout:void 0,Ap=typeof Promise=="function"?Promise:void 0,rE=typeof queueMicrotask=="function"?queueMicrotask:typeof Ap<"u"?function(t){return Ap.resolve(null).then(t).catch(iE)}:_c;function iE(t){setTimeout(function(){throw t})}function Cu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),zs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);zs(e)}function Fn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ni=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Ni,Ws="__reactProps$"+Ni,pn="__reactContainer$"+Ni,wc="__reactEvents$"+Ni,sE="__reactListeners$"+Ni,oE="__reactHandles$"+Ni;function wr(t){var e=t[Yt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pn]||n[Yt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cp(t);t!==null;){if(n=t[Yt])return n;t=Cp(t)}return e}t=n,n=t.parentNode}return null}function po(t){return t=t[Yt]||t[pn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ti(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function gl(t){return t[Ws]||null}var Ec=[],ni=-1;function ir(t){return{current:t}}function ge(t){0>ni||(t.current=Ec[ni],Ec[ni]=null,ni--)}function he(t,e){ni++,Ec[ni]=t.current,t.current=e}var Yn={},nt=ir(Yn),pt=ir(!1),Pr=Yn;function vi(t,e){var n=t.type.contextTypes;if(!n)return Yn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function mt(t){return t=t.childContextTypes,t!=null}function Da(){ge(pt),ge(nt)}function Rp(t,e,n){if(nt.current!==Yn)throw Error(U(168));he(nt,e),he(pt,n)}function Oy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,H1(t)||"Unknown",i));return we({},n,r)}function ja(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yn,Pr=nt.current,he(nt,t),he(pt,pt.current),!0}function Pp(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Oy(t,e,Pr),r.__reactInternalMemoizedMergedChildContext=t,ge(pt),ge(nt),he(nt,t)):ge(pt),he(pt,n)}var un=null,yl=!1,Ru=!1;function Ly(t){un===null?un=[t]:un.push(t)}function aE(t){yl=!0,Ly(t)}function sr(){if(!Ru&&un!==null){Ru=!0;var t=0,e=le;try{var n=un;for(le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}un=null,yl=!1}catch(i){throw un!==null&&(un=un.slice(t+1)),ly(Sh,sr),i}finally{le=e,Ru=!1}}return null}var ri=[],ii=0,Oa=null,La=0,At=[],Ct=0,kr=null,cn=1,hn="";function yr(t,e){ri[ii++]=La,ri[ii++]=Oa,Oa=t,La=e}function My(t,e,n){At[Ct++]=cn,At[Ct++]=hn,At[Ct++]=kr,kr=t;var r=cn;t=hn;var i=32-Ut(r)-1;r&=~(1<<i),n+=1;var s=32-Ut(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,cn=1<<32-Ut(e)+i|n<<i|r,hn=s+t}else cn=1<<s|n<<i|r,hn=t}function Vh(t){t.return!==null&&(yr(t,1),My(t,1,0))}function Dh(t){for(;t===Oa;)Oa=ri[--ii],ri[ii]=null,La=ri[--ii],ri[ii]=null;for(;t===kr;)kr=At[--Ct],At[Ct]=null,hn=At[--Ct],At[Ct]=null,cn=At[--Ct],At[Ct]=null}var Et=null,_t=null,ye=!1,zt=null;function Fy(t,e){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Et=t,_t=Fn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Et=t,_t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=kr!==null?{id:cn,overflow:hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Et=t,_t=null,!0):!1;default:return!1}}function Tc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xc(t){if(ye){var e=_t;if(e){var n=e;if(!kp(t,e)){if(Tc(t))throw Error(U(418));e=Fn(n.nextSibling);var r=Et;e&&kp(t,e)?Fy(r,n):(t.flags=t.flags&-4097|2,ye=!1,Et=t)}}else{if(Tc(t))throw Error(U(418));t.flags=t.flags&-4097|2,ye=!1,Et=t}}}function bp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Et=t}function Qo(t){if(t!==Et)return!1;if(!ye)return bp(t),ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vc(t.type,t.memoizedProps)),e&&(e=_t)){if(Tc(t))throw zy(),Error(U(418));for(;e;)Fy(t,e),e=Fn(e.nextSibling)}if(bp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_t=Fn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_t=null}}else _t=Et?Fn(t.stateNode.nextSibling):null;return!0}function zy(){for(var t=_t;t;)t=Fn(t.nextSibling)}function _i(){_t=Et=null,ye=!1}function jh(t){zt===null?zt=[t]:zt.push(t)}var lE=wn.ReactCurrentBatchConfig;function us(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Ko(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Np(t){var e=t._init;return e(t._payload)}function Uy(t){function e(x,_){if(t){var w=x.deletions;w===null?(x.deletions=[_],x.flags|=16):w.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function i(x,_){return x=$n(x,_),x.index=0,x.sibling=null,x}function s(x,_,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<_?(x.flags|=2,_):w):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,_,w,V){return _===null||_.tag!==6?(_=ju(w,x.mode,V),_.return=x,_):(_=i(_,w),_.return=x,_)}function u(x,_,w,V){var M=w.type;return M===Xr?p(x,_,w.props.children,V,w.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Rn&&Np(M)===_.type)?(V=i(_,w.props),V.ref=us(x,_,w),V.return=x,V):(V=va(w.type,w.key,w.props,null,x.mode,V),V.ref=us(x,_,w),V.return=x,V)}function h(x,_,w,V){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=Ou(w,x.mode,V),_.return=x,_):(_=i(_,w.children||[]),_.return=x,_)}function p(x,_,w,V,M){return _===null||_.tag!==7?(_=Ir(w,x.mode,V,M),_.return=x,_):(_=i(_,w),_.return=x,_)}function m(x,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=ju(""+_,x.mode,w),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Mo:return w=va(_.type,_.key,_.props,null,x.mode,w),w.ref=us(x,null,_),w.return=x,w;case Yr:return _=Ou(_,x.mode,w),_.return=x,_;case Rn:var V=_._init;return m(x,V(_._payload),w)}if(ps(_)||is(_))return _=Ir(_,x.mode,w,null),_.return=x,_;Ko(x,_)}return null}function g(x,_,w,V){var M=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return M!==null?null:l(x,_,""+w,V);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Mo:return w.key===M?u(x,_,w,V):null;case Yr:return w.key===M?h(x,_,w,V):null;case Rn:return M=w._init,g(x,_,M(w._payload),V)}if(ps(w)||is(w))return M!==null?null:p(x,_,w,V,null);Ko(x,w)}return null}function A(x,_,w,V,M){if(typeof V=="string"&&V!==""||typeof V=="number")return x=x.get(w)||null,l(_,x,""+V,M);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Mo:return x=x.get(V.key===null?w:V.key)||null,u(_,x,V,M);case Yr:return x=x.get(V.key===null?w:V.key)||null,h(_,x,V,M);case Rn:var F=V._init;return A(x,_,w,F(V._payload),M)}if(ps(V)||is(V))return x=x.get(w)||null,p(_,x,V,M,null);Ko(_,V)}return null}function k(x,_,w,V){for(var M=null,F=null,E=_,y=_=0,T=null;E!==null&&y<w.length;y++){E.index>y?(T=E,E=null):T=E.sibling;var I=g(x,E,w[y],V);if(I===null){E===null&&(E=T);break}t&&E&&I.alternate===null&&e(x,E),_=s(I,_,y),F===null?M=I:F.sibling=I,F=I,E=T}if(y===w.length)return n(x,E),ye&&yr(x,y),M;if(E===null){for(;y<w.length;y++)E=m(x,w[y],V),E!==null&&(_=s(E,_,y),F===null?M=E:F.sibling=E,F=E);return ye&&yr(x,y),M}for(E=r(x,E);y<w.length;y++)T=A(E,x,y,w[y],V),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?y:T.key),_=s(T,_,y),F===null?M=T:F.sibling=T,F=T);return t&&E.forEach(function(C){return e(x,C)}),ye&&yr(x,y),M}function b(x,_,w,V){var M=is(w);if(typeof M!="function")throw Error(U(150));if(w=M.call(w),w==null)throw Error(U(151));for(var F=M=null,E=_,y=_=0,T=null,I=w.next();E!==null&&!I.done;y++,I=w.next()){E.index>y?(T=E,E=null):T=E.sibling;var C=g(x,E,I.value,V);if(C===null){E===null&&(E=T);break}t&&E&&C.alternate===null&&e(x,E),_=s(C,_,y),F===null?M=C:F.sibling=C,F=C,E=T}if(I.done)return n(x,E),ye&&yr(x,y),M;if(E===null){for(;!I.done;y++,I=w.next())I=m(x,I.value,V),I!==null&&(_=s(I,_,y),F===null?M=I:F.sibling=I,F=I);return ye&&yr(x,y),M}for(E=r(x,E);!I.done;y++,I=w.next())I=A(E,x,y,I.value,V),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?y:I.key),_=s(I,_,y),F===null?M=I:F.sibling=I,F=I);return t&&E.forEach(function(P){return e(x,P)}),ye&&yr(x,y),M}function R(x,_,w,V){if(typeof w=="object"&&w!==null&&w.type===Xr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Mo:e:{for(var M=w.key,F=_;F!==null;){if(F.key===M){if(M=w.type,M===Xr){if(F.tag===7){n(x,F.sibling),_=i(F,w.props.children),_.return=x,x=_;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Rn&&Np(M)===F.type){n(x,F.sibling),_=i(F,w.props),_.ref=us(x,F,w),_.return=x,x=_;break e}n(x,F);break}else e(x,F);F=F.sibling}w.type===Xr?(_=Ir(w.props.children,x.mode,V,w.key),_.return=x,x=_):(V=va(w.type,w.key,w.props,null,x.mode,V),V.ref=us(x,_,w),V.return=x,x=V)}return o(x);case Yr:e:{for(F=w.key;_!==null;){if(_.key===F)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(x,_.sibling),_=i(_,w.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=Ou(w,x.mode,V),_.return=x,x=_}return o(x);case Rn:return F=w._init,R(x,_,F(w._payload),V)}if(ps(w))return k(x,_,w,V);if(is(w))return b(x,_,w,V);Ko(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(x,_.sibling),_=i(_,w),_.return=x,x=_):(n(x,_),_=ju(w,x.mode,V),_.return=x,x=_),o(x)):n(x,_)}return R}var wi=Uy(!0),By=Uy(!1),Ma=ir(null),Fa=null,si=null,Oh=null;function Lh(){Oh=si=Fa=null}function Mh(t){var e=Ma.current;ge(Ma),t._currentValue=e}function Sc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function di(t,e){Fa=t,Oh=si=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ft=!0),t.firstContext=null)}function Nt(t){var e=t._currentValue;if(Oh!==t)if(t={context:t,memoizedValue:e,next:null},si===null){if(Fa===null)throw Error(U(308));si=t,Fa.dependencies={lanes:0,firstContext:t}}else si=si.next=t;return e}var Er=null;function Fh(t){Er===null?Er=[t]:Er.push(t)}function $y(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Fh(e)):(n.next=i.next,i.next=n),e.interleaved=n,mn(t,r)}function mn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pn=!1;function zh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,mn(t,n)}return i=r.interleaved,i===null?(e.next=e,Fh(r)):(e.next=i.next,i.next=e),r.interleaved=e,mn(t,n)}function da(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ih(t,n)}}function Vp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function za(t,e,n,r){var i=t.updateQueue;Pn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,p=h=u=null,l=s;do{var g=l.lane,A=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,b=l;switch(g=e,A=n,b.tag){case 1:if(k=b.payload,typeof k=="function"){m=k.call(A,m,g);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=b.payload,g=typeof k=="function"?k.call(A,m,g):k,g==null)break e;m=we({},m,g);break e;case 2:Pn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else A={eventTime:A,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=A,u=m):p=p.next=A,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(p===null&&(u=m),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Nr|=o,t.lanes=o,t.memoizedState=m}}function Dp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var mo={},Jt=ir(mo),qs=ir(mo),Gs=ir(mo);function Tr(t){if(t===mo)throw Error(U(174));return t}function Uh(t,e){switch(he(Gs,e),he(qs,t),he(Jt,mo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ic(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ic(e,t)}ge(Jt),he(Jt,e)}function Ei(){ge(Jt),ge(qs),ge(Gs)}function Wy(t){Tr(Gs.current);var e=Tr(Jt.current),n=ic(e,t.type);e!==n&&(he(qs,t),he(Jt,n))}function Bh(t){qs.current===t&&(ge(Jt),ge(qs))}var ve=ir(0);function Ua(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pu=[];function $h(){for(var t=0;t<Pu.length;t++)Pu[t]._workInProgressVersionPrimary=null;Pu.length=0}var fa=wn.ReactCurrentDispatcher,ku=wn.ReactCurrentBatchConfig,br=0,_e=null,je=null,Ue=null,Ba=!1,As=!1,Qs=0,uE=0;function Ye(){throw Error(U(321))}function Hh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$t(t[n],e[n]))return!1;return!0}function Wh(t,e,n,r,i,s){if(br=s,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fa.current=t===null||t.memoizedState===null?fE:pE,t=n(r,i),As){s=0;do{if(As=!1,Qs=0,25<=s)throw Error(U(301));s+=1,Ue=je=null,e.updateQueue=null,fa.current=mE,t=n(r,i)}while(As)}if(fa.current=$a,e=je!==null&&je.next!==null,br=0,Ue=je=_e=null,Ba=!1,e)throw Error(U(300));return t}function qh(){var t=Qs!==0;return Qs=0,t}function Qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?_e.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function Vt(){if(je===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var e=Ue===null?_e.memoizedState:Ue.next;if(e!==null)Ue=e,je=t;else{if(t===null)throw Error(U(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Ue===null?_e.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function Ks(t,e){return typeof e=="function"?e(t):e}function bu(t){var e=Vt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=je,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var p=h.lane;if((br&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,_e.lanes|=p,Nr|=p}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,$t(r,e.memoizedState)||(ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,_e.lanes|=s,Nr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Nu(t){var e=Vt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);$t(s,e.memoizedState)||(ft=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function qy(){}function Gy(t,e){var n=_e,r=Vt(),i=e(),s=!$t(r.memoizedState,i);if(s&&(r.memoizedState=i,ft=!0),r=r.queue,Gh(Yy.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,Ys(9,Ky.bind(null,n,r,i,e),void 0,null),Be===null)throw Error(U(349));br&30||Qy(n,e,i)}return i}function Qy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ky(t,e,n,r){e.value=n,e.getSnapshot=r,Xy(e)&&Jy(t)}function Yy(t,e,n){return n(function(){Xy(e)&&Jy(t)})}function Xy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$t(t,n)}catch{return!0}}function Jy(t){var e=mn(t,1);e!==null&&Bt(e,t,1,-1)}function jp(t){var e=Qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:t},e.queue=t,t=t.dispatch=dE.bind(null,_e,t),[e.memoizedState,t]}function Ys(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Zy(){return Vt().memoizedState}function pa(t,e,n,r){var i=Qt();_e.flags|=t,i.memoizedState=Ys(1|e,n,void 0,r===void 0?null:r)}function vl(t,e,n,r){var i=Vt();r=r===void 0?null:r;var s=void 0;if(je!==null){var o=je.memoizedState;if(s=o.destroy,r!==null&&Hh(r,o.deps)){i.memoizedState=Ys(e,n,s,r);return}}_e.flags|=t,i.memoizedState=Ys(1|e,n,s,r)}function Op(t,e){return pa(8390656,8,t,e)}function Gh(t,e){return vl(2048,8,t,e)}function ev(t,e){return vl(4,2,t,e)}function tv(t,e){return vl(4,4,t,e)}function nv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rv(t,e,n){return n=n!=null?n.concat([t]):null,vl(4,4,nv.bind(null,e,t),n)}function Qh(){}function iv(t,e){var n=Vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sv(t,e){var n=Vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ov(t,e,n){return br&21?($t(n,e)||(n=hy(),_e.lanes|=n,Nr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ft=!0),t.memoizedState=n)}function cE(t,e){var n=le;le=n!==0&&4>n?n:4,t(!0);var r=ku.transition;ku.transition={};try{t(!1),e()}finally{le=n,ku.transition=r}}function av(){return Vt().memoizedState}function hE(t,e,n){var r=Bn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lv(t))uv(e,n);else if(n=$y(t,e,n,r),n!==null){var i=at();Bt(n,t,r,i),cv(n,e,r)}}function dE(t,e,n){var r=Bn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lv(t))uv(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,$t(l,o)){var u=e.interleaved;u===null?(i.next=i,Fh(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=$y(t,e,i,r),n!==null&&(i=at(),Bt(n,t,r,i),cv(n,e,r))}}function lv(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function uv(t,e){As=Ba=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ih(t,n)}}var $a={readContext:Nt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},fE={readContext:Nt,useCallback:function(t,e){return Qt().memoizedState=[t,e===void 0?null:e],t},useContext:Nt,useEffect:Op,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pa(4194308,4,nv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pa(4194308,4,t,e)},useInsertionEffect:function(t,e){return pa(4,2,t,e)},useMemo:function(t,e){var n=Qt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hE.bind(null,_e,t),[r.memoizedState,t]},useRef:function(t){var e=Qt();return t={current:t},e.memoizedState=t},useState:jp,useDebugValue:Qh,useDeferredValue:function(t){return Qt().memoizedState=t},useTransition:function(){var t=jp(!1),e=t[0];return t=cE.bind(null,t[1]),Qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_e,i=Qt();if(ye){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Be===null)throw Error(U(349));br&30||Qy(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Op(Yy.bind(null,r,s,t),[t]),r.flags|=2048,Ys(9,Ky.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Qt(),e=Be.identifierPrefix;if(ye){var n=hn,r=cn;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pE={readContext:Nt,useCallback:iv,useContext:Nt,useEffect:Gh,useImperativeHandle:rv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:sv,useReducer:bu,useRef:Zy,useState:function(){return bu(Ks)},useDebugValue:Qh,useDeferredValue:function(t){var e=Vt();return ov(e,je.memoizedState,t)},useTransition:function(){var t=bu(Ks)[0],e=Vt().memoizedState;return[t,e]},useMutableSource:qy,useSyncExternalStore:Gy,useId:av,unstable_isNewReconciler:!1},mE={readContext:Nt,useCallback:iv,useContext:Nt,useEffect:Gh,useImperativeHandle:rv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:sv,useReducer:Nu,useRef:Zy,useState:function(){return Nu(Ks)},useDebugValue:Qh,useDeferredValue:function(t){var e=Vt();return je===null?e.memoizedState=t:ov(e,je.memoizedState,t)},useTransition:function(){var t=Nu(Ks)[0],e=Vt().memoizedState;return[t,e]},useMutableSource:qy,useSyncExternalStore:Gy,useId:av,unstable_isNewReconciler:!1};function Mt(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ic(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _l={isMounted:function(t){return(t=t._reactInternals)?Lr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=at(),i=Bn(t),s=dn(r,i);s.payload=e,n!=null&&(s.callback=n),e=zn(t,s,i),e!==null&&(Bt(e,t,i,r),da(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=at(),i=Bn(t),s=dn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=zn(t,s,i),e!==null&&(Bt(e,t,i,r),da(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=at(),r=Bn(t),i=dn(n,r);i.tag=2,e!=null&&(i.callback=e),e=zn(t,i,r),e!==null&&(Bt(e,t,r,n),da(e,t,r))}};function Lp(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Bs(n,r)||!Bs(i,s):!0}function hv(t,e,n){var r=!1,i=Yn,s=e.contextType;return typeof s=="object"&&s!==null?s=Nt(s):(i=mt(e)?Pr:nt.current,r=e.contextTypes,s=(r=r!=null)?vi(t,i):Yn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_l,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Mp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_l.enqueueReplaceState(e,e.state,null)}function Ac(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},zh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Nt(s):(s=mt(e)?Pr:nt.current,i.context=vi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ic(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_l.enqueueReplaceState(i,i.state,null),za(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ti(t,e){try{var n="",r=e;do n+=$1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Vu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gE=typeof WeakMap=="function"?WeakMap:Map;function dv(t,e,n){n=dn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wa||(Wa=!0,Lc=r),Cc(t,e)},n}function fv(t,e,n){n=dn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Cc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Cc(t,e),typeof r!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Fp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=kE.bind(null,t,e,n),e.then(t,t))}function zp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Up(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=dn(-1,1),e.tag=2,zn(n,e,1))),n.lanes|=1),t)}var yE=wn.ReactCurrentOwner,ft=!1;function ot(t,e,n,r){e.child=t===null?By(e,null,n,r):wi(e,t.child,n,r)}function Bp(t,e,n,r,i){n=n.render;var s=e.ref;return di(e,i),r=Wh(t,e,n,r,s,i),n=qh(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gn(t,e,i)):(ye&&n&&Vh(e),e.flags|=1,ot(t,e,r,i),e.child)}function $p(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!nd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,pv(t,e,s,r,i)):(t=va(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Bs,n(o,r)&&t.ref===e.ref)return gn(t,e,i)}return e.flags|=1,t=$n(s,r),t.ref=e.ref,t.return=e,e.child=t}function pv(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Bs(s,r)&&t.ref===e.ref)if(ft=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ft=!0);else return e.lanes=t.lanes,gn(t,e,i)}return Rc(t,e,n,r,i)}function mv(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(ai,vt),vt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,he(ai,vt),vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,he(ai,vt),vt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,he(ai,vt),vt|=r;return ot(t,e,i,n),e.child}function gv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rc(t,e,n,r,i){var s=mt(n)?Pr:nt.current;return s=vi(e,s),di(e,i),n=Wh(t,e,n,r,s,i),r=qh(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gn(t,e,i)):(ye&&r&&Vh(e),e.flags|=1,ot(t,e,n,i),e.child)}function Hp(t,e,n,r,i){if(mt(n)){var s=!0;ja(e)}else s=!1;if(di(e,i),e.stateNode===null)ma(t,e),hv(e,n,r),Ac(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Nt(h):(h=mt(n)?Pr:nt.current,h=vi(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Mp(e,o,r,h),Pn=!1;var g=e.memoizedState;o.state=g,za(e,r,o,i),u=e.memoizedState,l!==r||g!==u||pt.current||Pn?(typeof p=="function"&&(Ic(e,n,p,r),u=e.memoizedState),(l=Pn||Lp(e,n,l,r,g,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Hy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Mt(e.type,l),o.props=h,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Nt(u):(u=mt(n)?Pr:nt.current,u=vi(e,u));var A=n.getDerivedStateFromProps;(p=typeof A=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Mp(e,o,r,u),Pn=!1,g=e.memoizedState,o.state=g,za(e,r,o,i);var k=e.memoizedState;l!==m||g!==k||pt.current||Pn?(typeof A=="function"&&(Ic(e,n,A,r),k=e.memoizedState),(h=Pn||Lp(e,n,h,r,g,k,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Pc(t,e,n,r,s,i)}function Pc(t,e,n,r,i,s){gv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Pp(e,n,!1),gn(t,e,s);r=e.stateNode,yE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wi(e,t.child,null,s),e.child=wi(e,null,l,s)):ot(t,e,l,s),e.memoizedState=r.state,i&&Pp(e,n,!0),e.child}function yv(t){var e=t.stateNode;e.pendingContext?Rp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rp(t,e.context,!1),Uh(t,e.containerInfo)}function Wp(t,e,n,r,i){return _i(),jh(i),e.flags|=256,ot(t,e,n,r),e.child}var kc={dehydrated:null,treeContext:null,retryLane:0};function bc(t){return{baseLanes:t,cachePool:null,transitions:null}}function vv(t,e,n){var r=e.pendingProps,i=ve.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),he(ve,i&1),t===null)return xc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Tl(o,r,0,null),t=Ir(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=bc(n),e.memoizedState=kc,t):Kh(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return vE(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=$n(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=$n(l,s):(s=Ir(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?bc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=kc,r}return s=t.child,t=s.sibling,r=$n(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Kh(t,e){return e=Tl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yo(t,e,n,r){return r!==null&&jh(r),wi(e,t.child,null,n),t=Kh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function vE(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Vu(Error(U(422))),Yo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Tl({mode:"visible",children:r.children},i,0,null),s=Ir(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&wi(e,t.child,null,o),e.child.memoizedState=bc(o),e.memoizedState=kc,s);if(!(e.mode&1))return Yo(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(U(419)),r=Vu(s,r,void 0),Yo(t,e,o,r)}if(l=(o&t.childLanes)!==0,ft||l){if(r=Be,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,mn(t,i),Bt(r,t,i,-1))}return td(),r=Vu(Error(U(421))),Yo(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=bE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,_t=Fn(i.nextSibling),Et=e,ye=!0,zt=null,t!==null&&(At[Ct++]=cn,At[Ct++]=hn,At[Ct++]=kr,cn=t.id,hn=t.overflow,kr=e),e=Kh(e,r.children),e.flags|=4096,e)}function qp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Sc(t.return,e,n)}function Du(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function _v(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ot(t,e,r.children,n),r=ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qp(t,n,e);else if(t.tag===19)qp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(he(ve,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ua(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Du(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ua(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Du(e,!0,n,null,s);break;case"together":Du(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ma(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Nr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=$n(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$n(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _E(t,e,n){switch(e.tag){case 3:yv(e),_i();break;case 5:Wy(e);break;case 1:mt(e.type)&&ja(e);break;case 4:Uh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;he(Ma,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(he(ve,ve.current&1),e.flags|=128,null):n&e.child.childLanes?vv(t,e,n):(he(ve,ve.current&1),t=gn(t,e,n),t!==null?t.sibling:null);he(ve,ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _v(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),he(ve,ve.current),r)break;return null;case 22:case 23:return e.lanes=0,mv(t,e,n)}return gn(t,e,n)}var wv,Nc,Ev,Tv;wv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nc=function(){};Ev=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Tr(Jt.current);var s=null;switch(n){case"input":i=ec(t,i),r=ec(t,r),s=[];break;case"select":i=we({},i,{value:void 0}),r=we({},r,{value:void 0}),s=[];break;case"textarea":i=rc(t,i),r=rc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Va)}sc(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(js.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(js.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&pe("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Tv=function(t,e,n,r){n!==r&&(e.flags|=4)};function cs(t,e){if(!ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wE(t,e,n){var r=e.pendingProps;switch(Dh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(e),null;case 1:return mt(e.type)&&Da(),Xe(e),null;case 3:return r=e.stateNode,Ei(),ge(pt),ge(nt),$h(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zt!==null&&(zc(zt),zt=null))),Nc(t,e),Xe(e),null;case 5:Bh(e);var i=Tr(Gs.current);if(n=e.type,t!==null&&e.stateNode!=null)Ev(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Xe(e),null}if(t=Tr(Jt.current),Qo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Yt]=e,r[Ws]=s,t=(e.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(i=0;i<gs.length;i++)pe(gs[i],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":tp(r,s),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},pe("invalid",r);break;case"textarea":rp(r,s),pe("invalid",r)}sc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Go(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Go(r.textContent,l,t),i=["children",""+l]):js.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":Fo(r),np(r,s,!0);break;case"textarea":Fo(r),ip(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Va)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yt]=e,t[Ws]=r,wv(t,e,!1,!1),e.stateNode=t;e:{switch(o=oc(n,r),n){case"dialog":pe("cancel",t),pe("close",t),i=r;break;case"iframe":case"object":case"embed":pe("load",t),i=r;break;case"video":case"audio":for(i=0;i<gs.length;i++)pe(gs[i],t);i=r;break;case"source":pe("error",t),i=r;break;case"img":case"image":case"link":pe("error",t),pe("load",t),i=r;break;case"details":pe("toggle",t),i=r;break;case"input":tp(t,r),i=ec(t,r),pe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=we({},r,{value:void 0}),pe("invalid",t);break;case"textarea":rp(t,r),i=rc(t,r),pe("invalid",t);break;default:i=r}sc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Zg(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Xg(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Os(t,u):typeof u=="number"&&Os(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(js.hasOwnProperty(s)?u!=null&&s==="onScroll"&&pe("scroll",t):u!=null&&_h(t,s,u,o))}switch(n){case"input":Fo(t),np(t,r,!1);break;case"textarea":Fo(t),ip(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?li(t,!!r.multiple,s,!1):r.defaultValue!=null&&li(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Va)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xe(e),null;case 6:if(t&&e.stateNode!=null)Tv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Tr(Gs.current),Tr(Jt.current),Qo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yt]=e,(s=r.nodeValue!==n)&&(t=Et,t!==null))switch(t.tag){case 3:Go(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Go(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yt]=e,e.stateNode=r}return Xe(e),null;case 13:if(ge(ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ye&&_t!==null&&e.mode&1&&!(e.flags&128))zy(),_i(),e.flags|=98560,s=!1;else if(s=Qo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Yt]=e}else _i(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xe(e),s=!1}else zt!==null&&(zc(zt),zt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ve.current&1?Oe===0&&(Oe=3):td())),e.updateQueue!==null&&(e.flags|=4),Xe(e),null);case 4:return Ei(),Nc(t,e),t===null&&$s(e.stateNode.containerInfo),Xe(e),null;case 10:return Mh(e.type._context),Xe(e),null;case 17:return mt(e.type)&&Da(),Xe(e),null;case 19:if(ge(ve),s=e.memoizedState,s===null)return Xe(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)cs(s,!1);else{if(Oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ua(t),o!==null){for(e.flags|=128,cs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return he(ve,ve.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ie()>xi&&(e.flags|=128,r=!0,cs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ua(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ye)return Xe(e),null}else 2*Ie()-s.renderingStartTime>xi&&n!==1073741824&&(e.flags|=128,r=!0,cs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ie(),e.sibling=null,n=ve.current,he(ve,r?n&1|2:n&1),e):(Xe(e),null);case 22:case 23:return ed(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vt&1073741824&&(Xe(e),e.subtreeFlags&6&&(e.flags|=8192)):Xe(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function EE(t,e){switch(Dh(e),e.tag){case 1:return mt(e.type)&&Da(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ei(),ge(pt),ge(nt),$h(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(ge(ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));_i()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ge(ve),null;case 4:return Ei(),null;case 10:return Mh(e.type._context),null;case 22:case 23:return ed(),null;case 24:return null;default:return null}}var Xo=!1,et=!1,TE=typeof WeakSet=="function"?WeakSet:Set,q=null;function oi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xe(t,e,r)}else n.current=null}function Vc(t,e,n){try{n()}catch(r){xe(t,e,r)}}var Gp=!1;function xE(t,e){if(gc=ka,t=Cy(),Nh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,p=0,m=t,g=null;t:for(;;){for(var A;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(A=m.firstChild)!==null;)g=m,m=A;for(;;){if(m===t)break t;if(g===n&&++h===i&&(l=o),g===s&&++p===r&&(u=o),(A=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=A}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(yc={focusedElem:t,selectionRange:n},ka=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var b=k.memoizedProps,R=k.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?b:Mt(e.type,b),R);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(V){xe(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return k=Gp,Gp=!1,k}function Cs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Vc(e,n,s)}i=i.next}while(i!==r)}}function wl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Dc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xv(t){var e=t.alternate;e!==null&&(t.alternate=null,xv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yt],delete e[Ws],delete e[wc],delete e[sE],delete e[oE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Sv(t){return t.tag===5||t.tag===3||t.tag===4}function Qp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Va));else if(r!==4&&(t=t.child,t!==null))for(jc(t,e,n),t=t.sibling;t!==null;)jc(t,e,n),t=t.sibling}function Oc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Oc(t,e,n),t=t.sibling;t!==null;)Oc(t,e,n),t=t.sibling}var $e=null,Ft=!1;function Cn(t,e,n){for(n=n.child;n!==null;)Iv(t,e,n),n=n.sibling}function Iv(t,e,n){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(dl,n)}catch{}switch(n.tag){case 5:et||oi(n,e);case 6:var r=$e,i=Ft;$e=null,Cn(t,e,n),$e=r,Ft=i,$e!==null&&(Ft?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(Ft?(t=$e,n=n.stateNode,t.nodeType===8?Cu(t.parentNode,n):t.nodeType===1&&Cu(t,n),zs(t)):Cu($e,n.stateNode));break;case 4:r=$e,i=Ft,$e=n.stateNode.containerInfo,Ft=!0,Cn(t,e,n),$e=r,Ft=i;break;case 0:case 11:case 14:case 15:if(!et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Vc(n,e,o),i=i.next}while(i!==r)}Cn(t,e,n);break;case 1:if(!et&&(oi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){xe(n,e,l)}Cn(t,e,n);break;case 21:Cn(t,e,n);break;case 22:n.mode&1?(et=(r=et)||n.memoizedState!==null,Cn(t,e,n),et=r):Cn(t,e,n);break;default:Cn(t,e,n)}}function Kp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TE),e.forEach(function(r){var i=NE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:$e=l.stateNode,Ft=!1;break e;case 3:$e=l.stateNode.containerInfo,Ft=!0;break e;case 4:$e=l.stateNode.containerInfo,Ft=!0;break e}l=l.return}if($e===null)throw Error(U(160));Iv(s,o,i),$e=null,Ft=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){xe(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Av(e,t),e=e.sibling}function Av(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lt(e,t),Gt(t),r&4){try{Cs(3,t,t.return),wl(3,t)}catch(b){xe(t,t.return,b)}try{Cs(5,t,t.return)}catch(b){xe(t,t.return,b)}}break;case 1:Lt(e,t),Gt(t),r&512&&n!==null&&oi(n,n.return);break;case 5:if(Lt(e,t),Gt(t),r&512&&n!==null&&oi(n,n.return),t.flags&32){var i=t.stateNode;try{Os(i,"")}catch(b){xe(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Qg(i,s),oc(l,o);var h=oc(l,s);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?Zg(i,m):p==="dangerouslySetInnerHTML"?Xg(i,m):p==="children"?Os(i,m):_h(i,p,m,h)}switch(l){case"input":tc(i,s);break;case"textarea":Kg(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?li(i,!!s.multiple,A,!1):g!==!!s.multiple&&(s.defaultValue!=null?li(i,!!s.multiple,s.defaultValue,!0):li(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ws]=s}catch(b){xe(t,t.return,b)}}break;case 6:if(Lt(e,t),Gt(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(b){xe(t,t.return,b)}}break;case 3:if(Lt(e,t),Gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zs(e.containerInfo)}catch(b){xe(t,t.return,b)}break;case 4:Lt(e,t),Gt(t);break;case 13:Lt(e,t),Gt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Jh=Ie())),r&4&&Kp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(et=(h=et)||p,Lt(e,t),et=h):Lt(e,t),Gt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(q=t,p=t.child;p!==null;){for(m=q=p;q!==null;){switch(g=q,A=g.child,g.tag){case 0:case 11:case 14:case 15:Cs(4,g,g.return);break;case 1:oi(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(b){xe(r,n,b)}}break;case 5:oi(g,g.return);break;case 22:if(g.memoizedState!==null){Xp(m);continue}}A!==null?(A.return=g,q=A):Xp(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Jg("display",o))}catch(b){xe(t,t.return,b)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(b){xe(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Lt(e,t),Gt(t),r&4&&Kp(t);break;case 21:break;default:Lt(e,t),Gt(t)}}function Gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Sv(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Os(i,""),r.flags&=-33);var s=Qp(t);Oc(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Qp(t);jc(t,l,o);break;default:throw Error(U(161))}}catch(u){xe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SE(t,e,n){q=t,Cv(t)}function Cv(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Xo;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||et;l=Xo;var h=et;if(Xo=o,(et=u)&&!h)for(q=i;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Jp(i):u!==null?(u.return=o,q=u):Jp(i);for(;s!==null;)q=s,Cv(s),s=s.sibling;q=i,Xo=l,et=h}Yp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):Yp(t)}}function Yp(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:et||wl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!et)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Mt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Dp(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Dp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&zs(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}et||e.flags&512&&Dc(e)}catch(g){xe(e,e.return,g)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Xp(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Jp(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wl(4,e)}catch(u){xe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){xe(e,i,u)}}var s=e.return;try{Dc(e)}catch(u){xe(e,s,u)}break;case 5:var o=e.return;try{Dc(e)}catch(u){xe(e,o,u)}}}catch(u){xe(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var IE=Math.ceil,Ha=wn.ReactCurrentDispatcher,Yh=wn.ReactCurrentOwner,bt=wn.ReactCurrentBatchConfig,se=0,Be=null,ke=null,qe=0,vt=0,ai=ir(0),Oe=0,Xs=null,Nr=0,El=0,Xh=0,Rs=null,ht=null,Jh=0,xi=1/0,ln=null,Wa=!1,Lc=null,Un=null,Jo=!1,Vn=null,qa=0,Ps=0,Mc=null,ga=-1,ya=0;function at(){return se&6?Ie():ga!==-1?ga:ga=Ie()}function Bn(t){return t.mode&1?se&2&&qe!==0?qe&-qe:lE.transition!==null?(ya===0&&(ya=hy()),ya):(t=le,t!==0||(t=window.event,t=t===void 0?16:vy(t.type)),t):1}function Bt(t,e,n,r){if(50<Ps)throw Ps=0,Mc=null,Error(U(185));ho(t,n,r),(!(se&2)||t!==Be)&&(t===Be&&(!(se&2)&&(El|=n),Oe===4&&bn(t,qe)),gt(t,r),n===1&&se===0&&!(e.mode&1)&&(xi=Ie()+500,yl&&sr()))}function gt(t,e){var n=t.callbackNode;lw(t,e);var r=Pa(t,t===Be?qe:0);if(r===0)n!==null&&ap(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ap(n),e===1)t.tag===0?aE(Zp.bind(null,t)):Ly(Zp.bind(null,t)),rE(function(){!(se&6)&&sr()}),n=null;else{switch(dy(r)){case 1:n=Sh;break;case 4:n=uy;break;case 16:n=Ra;break;case 536870912:n=cy;break;default:n=Ra}n=jv(n,Rv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Rv(t,e){if(ga=-1,ya=0,se&6)throw Error(U(327));var n=t.callbackNode;if(fi()&&t.callbackNode!==n)return null;var r=Pa(t,t===Be?qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ga(t,r);else{e=r;var i=se;se|=2;var s=kv();(Be!==t||qe!==e)&&(ln=null,xi=Ie()+500,Sr(t,e));do try{RE();break}catch(l){Pv(t,l)}while(!0);Lh(),Ha.current=s,se=i,ke!==null?e=0:(Be=null,qe=0,e=Oe)}if(e!==0){if(e===2&&(i=hc(t),i!==0&&(r=i,e=Fc(t,i))),e===1)throw n=Xs,Sr(t,0),bn(t,r),gt(t,Ie()),n;if(e===6)bn(t,r);else{if(i=t.current.alternate,!(r&30)&&!AE(i)&&(e=Ga(t,r),e===2&&(s=hc(t),s!==0&&(r=s,e=Fc(t,s))),e===1))throw n=Xs,Sr(t,0),bn(t,r),gt(t,Ie()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:vr(t,ht,ln);break;case 3:if(bn(t,r),(r&130023424)===r&&(e=Jh+500-Ie(),10<e)){if(Pa(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){at(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_c(vr.bind(null,t,ht,ln),e);break}vr(t,ht,ln);break;case 4:if(bn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ut(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IE(r/1960))-r,10<r){t.timeoutHandle=_c(vr.bind(null,t,ht,ln),r);break}vr(t,ht,ln);break;case 5:vr(t,ht,ln);break;default:throw Error(U(329))}}}return gt(t,Ie()),t.callbackNode===n?Rv.bind(null,t):null}function Fc(t,e){var n=Rs;return t.current.memoizedState.isDehydrated&&(Sr(t,e).flags|=256),t=Ga(t,e),t!==2&&(e=ht,ht=n,e!==null&&zc(e)),t}function zc(t){ht===null?ht=t:ht.push.apply(ht,t)}function AE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!$t(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bn(t,e){for(e&=~Xh,e&=~El,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ut(e),r=1<<n;t[n]=-1,e&=~r}}function Zp(t){if(se&6)throw Error(U(327));fi();var e=Pa(t,0);if(!(e&1))return gt(t,Ie()),null;var n=Ga(t,e);if(t.tag!==0&&n===2){var r=hc(t);r!==0&&(e=r,n=Fc(t,r))}if(n===1)throw n=Xs,Sr(t,0),bn(t,e),gt(t,Ie()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vr(t,ht,ln),gt(t,Ie()),null}function Zh(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(xi=Ie()+500,yl&&sr())}}function Vr(t){Vn!==null&&Vn.tag===0&&!(se&6)&&fi();var e=se;se|=1;var n=bt.transition,r=le;try{if(bt.transition=null,le=1,t)return t()}finally{le=r,bt.transition=n,se=e,!(se&6)&&sr()}}function ed(){vt=ai.current,ge(ai)}function Sr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nE(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(Dh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Da();break;case 3:Ei(),ge(pt),ge(nt),$h();break;case 5:Bh(r);break;case 4:Ei();break;case 13:ge(ve);break;case 19:ge(ve);break;case 10:Mh(r.type._context);break;case 22:case 23:ed()}n=n.return}if(Be=t,ke=t=$n(t.current,null),qe=vt=e,Oe=0,Xs=null,Xh=El=Nr=0,ht=Rs=null,Er!==null){for(e=0;e<Er.length;e++)if(n=Er[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Er=null}return t}function Pv(t,e){do{var n=ke;try{if(Lh(),fa.current=$a,Ba){for(var r=_e.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ba=!1}if(br=0,Ue=je=_e=null,As=!1,Qs=0,Yh.current=null,n===null||n.return===null){Oe=1,Xs=e,ke=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=qe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var A=zp(o);if(A!==null){A.flags&=-257,Up(A,o,l,s,e),A.mode&1&&Fp(s,h,e),e=A,u=h;var k=e.updateQueue;if(k===null){var b=new Set;b.add(u),e.updateQueue=b}else k.add(u);break e}else{if(!(e&1)){Fp(s,h,e),td();break e}u=Error(U(426))}}else if(ye&&l.mode&1){var R=zp(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Up(R,o,l,s,e),jh(Ti(u,l));break e}}s=u=Ti(u,l),Oe!==4&&(Oe=2),Rs===null?Rs=[s]:Rs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=dv(s,u,e);Vp(s,x);break e;case 1:l=u;var _=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Un===null||!Un.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=fv(s,l,e);Vp(s,V);break e}}s=s.return}while(s!==null)}Nv(n)}catch(M){e=M,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function kv(){var t=Ha.current;return Ha.current=$a,t===null?$a:t}function td(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Be===null||!(Nr&268435455)&&!(El&268435455)||bn(Be,qe)}function Ga(t,e){var n=se;se|=2;var r=kv();(Be!==t||qe!==e)&&(ln=null,Sr(t,e));do try{CE();break}catch(i){Pv(t,i)}while(!0);if(Lh(),se=n,Ha.current=r,ke!==null)throw Error(U(261));return Be=null,qe=0,Oe}function CE(){for(;ke!==null;)bv(ke)}function RE(){for(;ke!==null&&!Z1();)bv(ke)}function bv(t){var e=Dv(t.alternate,t,vt);t.memoizedProps=t.pendingProps,e===null?Nv(t):ke=e,Yh.current=null}function Nv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=EE(n,e),n!==null){n.flags&=32767,ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oe=6,ke=null;return}}else if(n=wE(n,e,vt),n!==null){ke=n;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);Oe===0&&(Oe=5)}function vr(t,e,n){var r=le,i=bt.transition;try{bt.transition=null,le=1,PE(t,e,n,r)}finally{bt.transition=i,le=r}return null}function PE(t,e,n,r){do fi();while(Vn!==null);if(se&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(uw(t,s),t===Be&&(ke=Be=null,qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jo||(Jo=!0,jv(Ra,function(){return fi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=bt.transition,bt.transition=null;var o=le;le=1;var l=se;se|=4,Yh.current=null,xE(t,n),Av(n,t),Kw(yc),ka=!!gc,yc=gc=null,t.current=n,SE(n),ew(),se=l,le=o,bt.transition=s}else t.current=n;if(Jo&&(Jo=!1,Vn=t,qa=i),s=t.pendingLanes,s===0&&(Un=null),rw(n.stateNode),gt(t,Ie()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wa)throw Wa=!1,t=Lc,Lc=null,t;return qa&1&&t.tag!==0&&fi(),s=t.pendingLanes,s&1?t===Mc?Ps++:(Ps=0,Mc=t):Ps=0,sr(),null}function fi(){if(Vn!==null){var t=dy(qa),e=bt.transition,n=le;try{if(bt.transition=null,le=16>t?16:t,Vn===null)var r=!1;else{if(t=Vn,Vn=null,qa=0,se&6)throw Error(U(331));var i=se;for(se|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(q=h;q!==null;){var p=q;switch(p.tag){case 0:case 11:case 15:Cs(8,p,s)}var m=p.child;if(m!==null)m.return=p,q=m;else for(;q!==null;){p=q;var g=p.sibling,A=p.return;if(xv(p),p===h){q=null;break}if(g!==null){g.return=A,q=g;break}q=A}}}var k=s.alternate;if(k!==null){var b=k.child;if(b!==null){k.child=null;do{var R=b.sibling;b.sibling=null,b=R}while(b!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cs(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,q=x;break e}q=s.return}}var _=t.current;for(q=_;q!==null;){o=q;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,q=w;else e:for(o=_;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:wl(9,l)}}catch(M){xe(l,l.return,M)}if(l===o){q=null;break e}var V=l.sibling;if(V!==null){V.return=l.return,q=V;break e}q=l.return}}if(se=i,sr(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(dl,t)}catch{}r=!0}return r}finally{le=n,bt.transition=e}}return!1}function em(t,e,n){e=Ti(n,e),e=dv(t,e,1),t=zn(t,e,1),e=at(),t!==null&&(ho(t,1,e),gt(t,e))}function xe(t,e,n){if(t.tag===3)em(t,t,n);else for(;e!==null;){if(e.tag===3){em(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Un===null||!Un.has(r))){t=Ti(n,t),t=fv(e,t,1),e=zn(e,t,1),t=at(),e!==null&&(ho(e,1,t),gt(e,t));break}}e=e.return}}function kE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=at(),t.pingedLanes|=t.suspendedLanes&n,Be===t&&(qe&n)===n&&(Oe===4||Oe===3&&(qe&130023424)===qe&&500>Ie()-Jh?Sr(t,0):Xh|=n),gt(t,e)}function Vv(t,e){e===0&&(t.mode&1?(e=Bo,Bo<<=1,!(Bo&130023424)&&(Bo=4194304)):e=1);var n=at();t=mn(t,e),t!==null&&(ho(t,e,n),gt(t,n))}function bE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Vv(t,n)}function NE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),Vv(t,n)}var Dv;Dv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pt.current)ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ft=!1,_E(t,e,n);ft=!!(t.flags&131072)}else ft=!1,ye&&e.flags&1048576&&My(e,La,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ma(t,e),t=e.pendingProps;var i=vi(e,nt.current);di(e,n),i=Wh(null,e,r,t,i,n);var s=qh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mt(r)?(s=!0,ja(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zh(e),i.updater=_l,e.stateNode=i,i._reactInternals=e,Ac(e,r,t,n),e=Pc(null,e,r,!0,s,n)):(e.tag=0,ye&&s&&Vh(e),ot(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ma(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=DE(r),t=Mt(r,t),i){case 0:e=Rc(null,e,r,t,n);break e;case 1:e=Hp(null,e,r,t,n);break e;case 11:e=Bp(null,e,r,t,n);break e;case 14:e=$p(null,e,r,Mt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mt(r,i),Rc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mt(r,i),Hp(t,e,r,i,n);case 3:e:{if(yv(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Hy(t,e),za(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ti(Error(U(423)),e),e=Wp(t,e,r,n,i);break e}else if(r!==i){i=Ti(Error(U(424)),e),e=Wp(t,e,r,n,i);break e}else for(_t=Fn(e.stateNode.containerInfo.firstChild),Et=e,ye=!0,zt=null,n=By(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_i(),r===i){e=gn(t,e,n);break e}ot(t,e,r,n)}e=e.child}return e;case 5:return Wy(e),t===null&&xc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,vc(r,i)?o=null:s!==null&&vc(r,s)&&(e.flags|=32),gv(t,e),ot(t,e,o,n),e.child;case 6:return t===null&&xc(e),null;case 13:return vv(t,e,n);case 4:return Uh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wi(e,null,r,n):ot(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mt(r,i),Bp(t,e,r,i,n);case 7:return ot(t,e,e.pendingProps,n),e.child;case 8:return ot(t,e,e.pendingProps.children,n),e.child;case 12:return ot(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,he(Ma,r._currentValue),r._currentValue=o,s!==null)if($t(s.value,o)){if(s.children===i.children&&!pt.current){e=gn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=dn(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Sc(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Sc(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ot(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,di(e,n),i=Nt(i),r=r(i),e.flags|=1,ot(t,e,r,n),e.child;case 14:return r=e.type,i=Mt(r,e.pendingProps),i=Mt(r.type,i),$p(t,e,r,i,n);case 15:return pv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mt(r,i),ma(t,e),e.tag=1,mt(r)?(t=!0,ja(e)):t=!1,di(e,n),hv(e,r,i),Ac(e,r,i,n),Pc(null,e,r,!0,t,n);case 19:return _v(t,e,n);case 22:return mv(t,e,n)}throw Error(U(156,e.tag))};function jv(t,e){return ly(t,e)}function VE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,n,r){return new VE(t,e,n,r)}function nd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function DE(t){if(typeof t=="function")return nd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Eh)return 11;if(t===Th)return 14}return 2}function $n(t,e){var n=t.alternate;return n===null?(n=Pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function va(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")nd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xr:return Ir(n.children,i,s,e);case wh:o=8,i|=8;break;case Yu:return t=Pt(12,n,e,i|2),t.elementType=Yu,t.lanes=s,t;case Xu:return t=Pt(13,n,e,i),t.elementType=Xu,t.lanes=s,t;case Ju:return t=Pt(19,n,e,i),t.elementType=Ju,t.lanes=s,t;case Wg:return Tl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $g:o=10;break e;case Hg:o=9;break e;case Eh:o=11;break e;case Th:o=14;break e;case Rn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Pt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ir(t,e,n,r){return t=Pt(7,t,r,e),t.lanes=n,t}function Tl(t,e,n,r){return t=Pt(22,t,r,e),t.elementType=Wg,t.lanes=n,t.stateNode={isHidden:!1},t}function ju(t,e,n){return t=Pt(6,t,null,e),t.lanes=n,t}function Ou(t,e,n){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gu(0),this.expirationTimes=gu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rd(t,e,n,r,i,s,o,l,u){return t=new jE(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zh(s),t}function OE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ov(t){if(!t)return Yn;t=t._reactInternals;e:{if(Lr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(mt(n))return Oy(t,n,e)}return e}function Lv(t,e,n,r,i,s,o,l,u){return t=rd(n,r,!0,t,i,s,o,l,u),t.context=Ov(null),n=t.current,r=at(),i=Bn(n),s=dn(r,i),s.callback=e??null,zn(n,s,i),t.current.lanes=i,ho(t,i,r),gt(t,r),t}function xl(t,e,n,r){var i=e.current,s=at(),o=Bn(i);return n=Ov(n),e.context===null?e.context=n:e.pendingContext=n,e=dn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zn(i,e,o),t!==null&&(Bt(t,i,o,s),da(t,i,o)),o}function Qa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function id(t,e){tm(t,e),(t=t.alternate)&&tm(t,e)}function LE(){return null}var Mv=typeof reportError=="function"?reportError:function(t){console.error(t)};function sd(t){this._internalRoot=t}Sl.prototype.render=sd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));xl(t,e,null,null)};Sl.prototype.unmount=sd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vr(function(){xl(null,t,null,null)}),e[pn]=null}};function Sl(t){this._internalRoot=t}Sl.prototype.unstable_scheduleHydration=function(t){if(t){var e=my();t={blockedOn:null,target:t,priority:e};for(var n=0;n<kn.length&&e!==0&&e<kn[n].priority;n++);kn.splice(n,0,t),n===0&&yy(t)}};function od(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Il(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nm(){}function ME(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Qa(o);s.call(h)}}var o=Lv(e,r,t,0,null,!1,!1,"",nm);return t._reactRootContainer=o,t[pn]=o.current,$s(t.nodeType===8?t.parentNode:t),Vr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Qa(u);l.call(h)}}var u=rd(t,0,!1,null,null,!1,!1,"",nm);return t._reactRootContainer=u,t[pn]=u.current,$s(t.nodeType===8?t.parentNode:t),Vr(function(){xl(e,u,n,r)}),u}function Al(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=Qa(o);l.call(u)}}xl(e,o,t,i)}else o=ME(n,e,t,i,r);return Qa(o)}fy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ms(e.pendingLanes);n!==0&&(Ih(e,n|1),gt(e,Ie()),!(se&6)&&(xi=Ie()+500,sr()))}break;case 13:Vr(function(){var r=mn(t,1);if(r!==null){var i=at();Bt(r,t,1,i)}}),id(t,1)}};Ah=function(t){if(t.tag===13){var e=mn(t,134217728);if(e!==null){var n=at();Bt(e,t,134217728,n)}id(t,134217728)}};py=function(t){if(t.tag===13){var e=Bn(t),n=mn(t,e);if(n!==null){var r=at();Bt(n,t,e,r)}id(t,e)}};my=function(){return le};gy=function(t,e){var n=le;try{return le=t,e()}finally{le=n}};lc=function(t,e,n){switch(e){case"input":if(tc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=gl(r);if(!i)throw Error(U(90));Gg(r),tc(r,i)}}}break;case"textarea":Kg(t,n);break;case"select":e=n.value,e!=null&&li(t,!!n.multiple,e,!1)}};ny=Zh;ry=Vr;var FE={usingClientEntryPoint:!1,Events:[po,ti,gl,ey,ty,Zh]},hs={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zE={bundleType:hs.bundleType,version:hs.version,rendererPackageName:hs.rendererPackageName,rendererConfig:hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oy(t),t===null?null:t.stateNode},findFiberByHostInstance:hs.findFiberByHostInstance||LE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zo.isDisabled&&Zo.supportsFiber)try{dl=Zo.inject(zE),Xt=Zo}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FE;xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!od(e))throw Error(U(200));return OE(t,e,null,n)};xt.createRoot=function(t,e){if(!od(t))throw Error(U(299));var n=!1,r="",i=Mv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=rd(t,1,!1,null,null,n,!1,r,i),t[pn]=e.current,$s(t.nodeType===8?t.parentNode:t),new sd(e)};xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=oy(e),t=t===null?null:t.stateNode,t};xt.flushSync=function(t){return Vr(t)};xt.hydrate=function(t,e,n){if(!Il(e))throw Error(U(200));return Al(null,t,e,!0,n)};xt.hydrateRoot=function(t,e,n){if(!od(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Mv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Lv(e,null,t,1,n??null,i,!1,s,o),t[pn]=e.current,$s(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Sl(e)};xt.render=function(t,e,n){if(!Il(e))throw Error(U(200));return Al(null,t,e,!1,n)};xt.unmountComponentAtNode=function(t){if(!Il(t))throw Error(U(40));return t._reactRootContainer?(Vr(function(){Al(null,null,t,!1,function(){t._reactRootContainer=null,t[pn]=null})}),!0):!1};xt.unstable_batchedUpdates=Zh;xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Il(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Al(t,e,n,!1,r)};xt.version="18.3.1-next-f1338f8080-20240426";function Fv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fv)}catch(t){console.error(t)}}Fv(),Fg.exports=xt;var UE=Fg.exports,rm=UE;Qu.createRoot=rm.createRoot,Qu.hydrateRoot=rm.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Js(){return Js=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Js.apply(this,arguments)}var Dn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Dn||(Dn={}));const im="popstate";function BE(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Uc("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ka(i)}return HE(e,n,null,t)}function Ae(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ad(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $E(){return Math.random().toString(36).substr(2,8)}function sm(t,e){return{usr:t.state,key:t.key,idx:e}}function Uc(t,e,n,r){return n===void 0&&(n=null),Js({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vi(e):e,{state:n,key:e&&e.key||r||$E()})}function Ka(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function HE(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Dn.Pop,u=null,h=p();h==null&&(h=0,o.replaceState(Js({},o.state,{idx:h}),""));function p(){return(o.state||{idx:null}).idx}function m(){l=Dn.Pop;let R=p(),x=R==null?null:R-h;h=R,u&&u({action:l,location:b.location,delta:x})}function g(R,x){l=Dn.Push;let _=Uc(b.location,R,x);h=p()+1;let w=sm(_,h),V=b.createHref(_);try{o.pushState(w,"",V)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(V)}s&&u&&u({action:l,location:b.location,delta:1})}function A(R,x){l=Dn.Replace;let _=Uc(b.location,R,x);h=p();let w=sm(_,h),V=b.createHref(_);o.replaceState(w,"",V),s&&u&&u({action:l,location:b.location,delta:0})}function k(R){let x=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof R=="string"?R:Ka(R);return _=_.replace(/ $/,"%20"),Ae(x,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,x)}let b={get action(){return l},get location(){return t(i,o)},listen(R){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(im,m),u=R,()=>{i.removeEventListener(im,m),u=null}},createHref(R){return e(i,R)},createURL:k,encodeLocation(R){let x=k(R);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:A,go(R){return o.go(R)}};return b}var om;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(om||(om={}));function WE(t,e,n){return n===void 0&&(n="/"),qE(t,e,n)}function qE(t,e,n,r){let i=typeof e=="string"?Vi(e):e,s=ld(i.pathname||"/",n);if(s==null)return null;let o=zv(t);GE(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=sT(s);l=nT(o[u],h)}return l}function zv(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Ae(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=Hn([r,u.relativePath]),p=n.concat(u);s.children&&s.children.length>0&&(Ae(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),zv(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:eT(h,s.index),routesMeta:p})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of Uv(s.path))i(s,o,u)}),e}function Uv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Uv(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function GE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:tT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const QE=/^:[\w-]+$/,KE=3,YE=2,XE=1,JE=10,ZE=-2,am=t=>t==="*";function eT(t,e){let n=t.split("/"),r=n.length;return n.some(am)&&(r+=ZE),e&&(r+=YE),n.filter(i=>!am(i)).reduce((i,s)=>i+(QE.test(s)?KE:s===""?XE:JE),r)}function tT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function nT(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=rT({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),g=u.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Hn([s,m.pathname]),pathnameBase:cT(Hn([s,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(s=Hn([s,m.pathnameBase]))}return o}function rT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=iT(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,p,m)=>{let{paramName:g,isOptional:A}=p;if(g==="*"){let b=l[m]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const k=l[m];return A&&!k?h[g]=void 0:h[g]=(k||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function iT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ad(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ad(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ld(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const oT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aT=t=>oT.test(t);function lT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Vi(t):t,s;if(n)if(aT(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),ad(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=lm(n.substring(1),"/"):s=lm(n,e)}else s=e;return{pathname:s,search:hT(r),hash:dT(i)}}function lm(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Lu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ud(t,e){let n=uT(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cd(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Vi(t):(i=Js({},t),Ae(!i.pathname||!i.pathname.includes("?"),Lu("?","pathname","search",i)),Ae(!i.pathname||!i.pathname.includes("#"),Lu("#","pathname","hash",i)),Ae(!i.search||!i.search.includes("#"),Lu("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;i.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=lT(i,l),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}const Hn=t=>t.join("/").replace(/\/\/+/g,"/"),cT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Bv=["post","put","patch","delete"];new Set(Bv);const pT=["get",...Bv];new Set(pT);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zs(){return Zs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zs.apply(this,arguments)}const hd=z.createContext(null),mT=z.createContext(null),or=z.createContext(null),Cl=z.createContext(null),ar=z.createContext({outlet:null,matches:[],isDataRoute:!1}),$v=z.createContext(null);function gT(t,e){let{relative:n}=e===void 0?{}:e;Di()||Ae(!1);let{basename:r,navigator:i}=z.useContext(or),{hash:s,pathname:o,search:l}=Wv(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Hn([r,o])),i.createHref({pathname:u,search:l,hash:s})}function Di(){return z.useContext(Cl)!=null}function go(){return Di()||Ae(!1),z.useContext(Cl).location}function Hv(t){z.useContext(or).static||z.useLayoutEffect(t)}function Rl(){let{isDataRoute:t}=z.useContext(ar);return t?PT():yT()}function yT(){Di()||Ae(!1);let t=z.useContext(hd),{basename:e,future:n,navigator:r}=z.useContext(or),{matches:i}=z.useContext(ar),{pathname:s}=go(),o=JSON.stringify(ud(i,n.v7_relativeSplatPath)),l=z.useRef(!1);return Hv(()=>{l.current=!0}),z.useCallback(function(h,p){if(p===void 0&&(p={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=cd(h,JSON.parse(o),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Hn([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,o,s,t])}function Wv(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=z.useContext(or),{matches:i}=z.useContext(ar),{pathname:s}=go(),o=JSON.stringify(ud(i,r.v7_relativeSplatPath));return z.useMemo(()=>cd(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function vT(t,e){return _T(t,e)}function _T(t,e,n,r){Di()||Ae(!1);let{navigator:i}=z.useContext(or),{matches:s}=z.useContext(ar),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=go(),p;if(e){var m;let R=typeof e=="string"?Vi(e):e;u==="/"||(m=R.pathname)!=null&&m.startsWith(u)||Ae(!1),p=R}else p=h;let g=p.pathname||"/",A=g;if(u!=="/"){let R=u.replace(/^\//,"").split("/");A="/"+g.replace(/^\//,"").split("/").slice(R.length).join("/")}let k=WE(t,{pathname:A}),b=ST(k&&k.map(R=>Object.assign({},R,{params:Object.assign({},l,R.params),pathname:Hn([u,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:Hn([u,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),s,n,r);return e&&b?z.createElement(Cl.Provider,{value:{location:Zs({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Dn.Pop}},b):b}function wT(){let t=RT(),e=fT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),n?z.createElement("pre",{style:i},n):null,null)}const ET=z.createElement(wT,null);class TT extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?z.createElement(ar.Provider,{value:this.props.routeContext},z.createElement($v.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xT(t){let{routeContext:e,match:n,children:r}=t,i=z.useContext(hd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),z.createElement(ar.Provider,{value:e},r)}function ST(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Ae(!1),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:g,errors:A}=n,k=m.route.loader&&g[m.route.id]===void 0&&(!A||A[m.route.id]===void 0);if(m.route.lazy||k){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,m,g)=>{let A,k=!1,b=null,R=null;n&&(A=l&&m.route.id?l[m.route.id]:void 0,b=m.route.errorElement||ET,u&&(h<0&&g===0?(kT("route-fallback"),k=!0,R=null):h===g&&(k=!0,R=m.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),_=()=>{let w;return A?w=b:k?w=R:m.route.Component?w=z.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=p,z.createElement(xT,{match:m,routeContext:{outlet:p,matches:x,isDataRoute:n!=null},children:w})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?z.createElement(TT,{location:n.location,revalidation:n.revalidation,component:b,error:A,children:_(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):_()},null)}var qv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(qv||{}),Gv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Gv||{});function IT(t){let e=z.useContext(hd);return e||Ae(!1),e}function AT(t){let e=z.useContext(mT);return e||Ae(!1),e}function CT(t){let e=z.useContext(ar);return e||Ae(!1),e}function Qv(t){let e=CT(),n=e.matches[e.matches.length-1];return n.route.id||Ae(!1),n.route.id}function RT(){var t;let e=z.useContext($v),n=AT(),r=Qv();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function PT(){let{router:t}=IT(qv.UseNavigateStable),e=Qv(Gv.UseNavigateStable),n=z.useRef(!1);return Hv(()=>{n.current=!0}),z.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Zs({fromRouteId:e},s)))},[t,e])}const um={};function kT(t,e,n){um[t]||(um[t]=!0)}function bT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function cm(t){let{to:e,replace:n,state:r,relative:i}=t;Di()||Ae(!1);let{future:s,static:o}=z.useContext(or),{matches:l}=z.useContext(ar),{pathname:u}=go(),h=Rl(),p=cd(e,ud(l,s.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(p);return z.useEffect(()=>h(JSON.parse(m),{replace:n,state:r,relative:i}),[h,m,i,n,r]),null}function an(t){Ae(!1)}function NT(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Dn.Pop,navigator:s,static:o=!1,future:l}=t;Di()&&Ae(!1);let u=e.replace(/^\/*/,"/"),h=z.useMemo(()=>({basename:u,navigator:s,static:o,future:Zs({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Vi(r));let{pathname:p="/",search:m="",hash:g="",state:A=null,key:k="default"}=r,b=z.useMemo(()=>{let R=ld(p,u);return R==null?null:{location:{pathname:R,search:m,hash:g,state:A,key:k},navigationType:i}},[u,p,m,g,A,k,i]);return b==null?null:z.createElement(or.Provider,{value:h},z.createElement(Cl.Provider,{children:n,value:b}))}function VT(t){let{children:e,location:n}=t;return vT(Bc(e),n)}new Promise(()=>{});function Bc(t,e){e===void 0&&(e=[]);let n=[];return z.Children.forEach(t,(r,i)=>{if(!z.isValidElement(r))return;let s=[...e,i];if(r.type===z.Fragment){n.push.apply(n,Bc(r.props.children,s));return}r.type!==an&&Ae(!1),!r.props.index||!r.props.children||Ae(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Bc(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $c(){return $c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$c.apply(this,arguments)}function DT(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function jT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function OT(t,e){return t.button===0&&(!e||e==="_self")&&!jT(t)}const LT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],MT="6";try{window.__reactRouterVersion=MT}catch{}const FT="startTransition",hm=k1[FT];function zT(t){let{basename:e,children:n,future:r,window:i}=t,s=z.useRef();s.current==null&&(s.current=BE({window:i,v5Compat:!0}));let o=s.current,[l,u]=z.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},p=z.useCallback(m=>{h&&hm?hm(()=>u(m)):u(m)},[u,h]);return z.useLayoutEffect(()=>o.listen(p),[o,p]),z.useEffect(()=>bT(r),[r]),z.createElement(NT,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const UT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kt=z.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:h,preventScrollReset:p,viewTransition:m}=e,g=DT(e,LT),{basename:A}=z.useContext(or),k,b=!1;if(typeof h=="string"&&BT.test(h)&&(k=h,UT))try{let w=new URL(window.location.href),V=h.startsWith("//")?new URL(w.protocol+h):new URL(h),M=ld(V.pathname,A);V.origin===w.origin&&M!=null?h=M+V.search+V.hash:b=!0}catch{}let R=gT(h,{relative:i}),x=$T(h,{replace:o,state:l,target:u,preventScrollReset:p,relative:i,viewTransition:m});function _(w){r&&r(w),w.defaultPrevented||x(w)}return z.createElement("a",$c({},g,{href:k||R,onClick:b||s?r:_,ref:n,target:u}))});var dm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dm||(dm={}));var fm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(fm||(fm={}));function $T(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=Rl(),h=go(),p=Wv(t,{relative:o});return z.useCallback(m=>{if(OT(m,n)){m.preventDefault();let g=r!==void 0?r:Ka(h)===Ka(p);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[h,u,p,r,i,n,t,s,o,l])}function HT(){return f.jsxs("div",{className:"landing-root",children:[f.jsx("style",{children:`
        .landing-root {
          position: relative;
          min-height: calc(100vh - 64px);
          /* space for header */
          margin-top: 12px;
          overflow: hidden;
          color: #e5e7eb;
          font-family: -apple-system, BlinkMacSystemFont, system-ui, "Segoe UI",
            Roboto, Helvetica, Arial, sans-serif;
        }

        /* animated background */
        .landing-bg {
          position: absolute;
          inset: 0;
          z-index: -1;
          background:
            radial-gradient(circle at 0% 0%, #22c55e18, transparent 55%),
            radial-gradient(circle at 100% 0%, #0ea5e918, transparent 55%),
            radial-gradient(circle at 0% 100%, #f9731618, transparent 55%),
            radial-gradient(circle at 100% 100%, #6366f118, transparent 55%),
            #020617;
          overflow: hidden;
        }

        .landing-bg::before {
          content: "";
          position: absolute;
          width: 170%;
          height: 170%;
          left: -35%;
          top: -35%;
          background-image:
            radial-gradient(circle, #22c55e66 1px, transparent 1px),
            radial-gradient(circle, #0ea5e966 1px, transparent 1px),
            radial-gradient(circle, #f9731666 1px, transparent 1px);
          background-size: 80px 80px, 120px 120px, 150px 150px;
          background-position: 0 0, 40px 40px, 20px 60px;
          opacity: 0.5;
          animation: landingDots 30s linear infinite;
        }

        @keyframes landingDots {
          0% {
            transform: translate3d(-8%, -8%, 0) scale(1);
          }
          50% {
            transform: translate3d(8%, 5%, 0) scale(1.05);
          }
          100% {
            transform: translate3d(-8%, -8%, 0) scale(1);
          }
        }

        .landing-inner {
          max-width: 1120px;
          margin: 0 auto;
          padding: 12px 16px 32px;
        }

        .landing-grid {
          display: grid;
          grid-template-columns: minmax(0, 3fr) minmax(0, 2.2fr);
          gap: 22px;
          align-items: stretch;
        }

        @media (max-width: 900px) {
          .landing-grid {
            grid-template-columns: minmax(0, 1fr);
          }
        }

        .landing-glass {
          border-radius: 24px;
          padding: 22px 24px;
          background:
            radial-gradient(circle at top left, #22c55e33, transparent 55%),
            radial-gradient(circle at bottom right, #06b6d433, transparent 55%),
            rgba(15,23,42,0.96);
          border: 1px solid rgba(148,163,184,0.4);
          box-shadow:
            0 30px 80px rgba(15,23,42,0.95),
            0 0 0 1px rgba(15,23,42,0.9);
          backdrop-filter: blur(18px);
        }

        .landing-pill {
          display: inline-flex;
          align-items: center;
          gap: 8px;
          padding: 4px 10px;
          border-radius: 999px;
          font-size: 0.75rem;
          background: rgba(15,23,42,1);
          border: 1px solid rgba(34,197,94,0.6);
          color: #bbf7d0;
        }

        .landing-pill-dot {
          width: 7px;
          height: 7px;
          border-radius: 999px;
          background: #22c55e;
          box-shadow: 0 0 12px #22c55e;
        }

        .landing-title {
          font-size: 2.3rem;
          line-height: 1.1;
          font-weight: 700;
          margin: 10px 0 8px;
          background: linear-gradient(to right, #22c55e, #06b6d4);
          -webkit-background-clip: text;
          color: transparent;
        }

        @media (max-width: 640px) {
          .landing-title {
            font-size: 2rem;
          }
        }

        .landing-sub {
          font-size: 0.95rem;
          color: #cbd5f5;
          max-width: 540px;
        }

        .landing-chip-row {
          display: flex;
          flex-wrap: wrap;
          gap: 8px;
          margin-top: 10px;
          font-size: 0.78rem;
        }

        .landing-chip {
          padding: 4px 10px;
          border-radius: 999px;
          border: 1px solid rgba(148,163,184,0.7);
          background: rgba(15,23,42,0.95);
          color: #e5e7eb;
        }

        .landing-cta-row {
          display: flex;
          flex-wrap: wrap;
          gap: 12px;
          margin-top: 18px;
        }

        .landing-btn-primary {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          padding: 10px 24px;
          border-radius: 999px;
          border: none;
          font-size: 0.95rem;
          font-weight: 600;
          text-decoration: none;
          background: linear-gradient(135deg, #22c55e, #4ade80);
          color: #022c22;
          box-shadow: 0 14px 40px rgba(34,197,94,0.6);
          cursor: pointer;
        }

        .landing-btn-secondary {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          padding: 9px 22px;
          border-radius: 999px;
          border: 1px solid rgba(148,163,184,0.7);
          font-size: 0.9rem;
          font-weight: 500;
          text-decoration: none;
          color: #e5e7eb;
          background: rgba(15,23,42,0.95);
          cursor: pointer;
        }

        .landing-small-caption {
          margin-top: 8px;
          font-size: 0.78rem;
          color: #9ca3af;
        }

        .landing-stat-card {
          border-radius: 20px;
          padding: 16px 18px;
          background:
            radial-gradient(circle at top, #4ade8033, transparent 60%),
            rgba(15,23,42,0.98);
          border: 1px solid rgba(148,163,184,0.45);
          box-shadow: 0 20px 55px rgba(15,23,42,0.95);
          display: grid;
          gap: 10px;
          font-size: 0.83rem;
        }

        .landing-stat-header {
          display: flex;
          justify-content: space-between;
          gap: 10px;
          align-items: center;
        }

        .landing-stat-badge {
          display: inline-flex;
          align-items: center;
          gap: 6px;
          padding: 4px 9px;
          border-radius: 999px;
          font-size: 0.7rem;
          background: rgba(15,23,42,0.95);
          border: 1px solid rgba(148,163,184,0.7);
        }

        .landing-stat-dot {
          width: 7px;
          height: 7px;
          border-radius: 999px;
          background: #22c55e;
          box-shadow: 0 0 10px #22c55e;
        }

        .landing-stat-row {
          display: flex;
          justify-content: space-between;
        }

        .landing-stat-label {
          color: #9ca3af;
        }

        .landing-section {
          margin-top: 32px;
        }

        .landing-section-title {
          font-size: 1.05rem;
          font-weight: 600;
          margin-bottom: 8px;
          color: #e5e7eb;
        }

        .landing-section-sub {
          font-size: 0.86rem;
          color: #cbd5f5;
          max-width: 820px;
        }

        .landing-cols-3 {
          display: grid;
          grid-template-columns: repeat(3, minmax(0,1fr));
          gap: 16px;
          margin-top: 12px;
        }

        @media (max-width: 900px) {
          .landing-cols-3 {
            grid-template-columns: repeat(2, minmax(0,1fr));
          }
        }

        @media (max-width: 640px) {
          .landing-cols-3 {
            grid-template-columns: minmax(0,1fr);
          }
        }

        .landing-mini-card {
          background: rgba(15,23,42,0.97);
          border-radius: 16px;
          border: 1px solid rgba(55,65,81,0.95);
          padding: 12px 14px;
          font-size: 0.84rem;
          color: #d1d5db;
        }

        .landing-mini-card h4 {
          margin: 0 0 4px;
          font-size: 0.87rem;
          font-weight: 600;
          color: #e5e7eb;
        }

        .landing-mini-badge {
          display: inline-flex;
          align-items: center;
          padding: 2px 8px;
          border-radius: 999px;
          font-size: 0.7rem;
          background: rgba(15,23,42,0.9);
          border: 1px solid rgba(148,163,184,0.9);
          margin-bottom: 4px;
        }

        .landing-mini-badge span {
          width: 6px;
          height: 6px;
          border-radius: 999px;
          background: #22c55e;
          margin-right: 4px;
        }
      `}),f.jsx("div",{className:"landing-bg"}),f.jsxs("div",{className:"landing-inner",children:[f.jsxs("section",{className:"landing-grid",children:[f.jsxs("div",{className:"landing-glass",children:[f.jsxs("div",{className:"landing-pill",children:[f.jsx("span",{className:"landing-pill-dot"}),"Smart maintenance for hostels & campus utilities"]}),f.jsxs("h1",{className:"landing-title",children:["Track incidents in seconds.",f.jsx("br",{}),"Predict the next failure before it hits."]}),f.jsx("p",{className:"landing-sub",children:"Single place for students, admins and technicians to report issues, monitor campus health, and prevent repeated breakdowns. Our prediction engine learns from frequency, priority and ageing incidents to highlight the next high-risk spots."}),f.jsxs("div",{className:"landing-chip-row",children:[f.jsx("div",{className:"landing-chip",children:" Reporter  hostel students"}),f.jsx("div",{className:"landing-chip",children:" Admin  campus ops team"}),f.jsx("div",{className:"landing-chip",children:" Technician  maintenance crew"})]}),f.jsxs("div",{className:"landing-cta-row",children:[f.jsx(kt,{to:"/register",className:"landing-btn-primary",children:"Get started  Register"}),f.jsx(kt,{to:"/login",className:"landing-btn-secondary",children:"Login as Reporter / Admin / Technician"})]}),f.jsxs("div",{className:"landing-small-caption",children:["Risk is computed per ",f.jsx("strong",{children:"hostel  problem category"})," ","using: recent incident frequency, % of high-priority tickets, current open count, age of oldest open ticket and last-24-hour activity, passed through a logistic (sigmoid) function."]})]}),f.jsxs("div",{className:"landing-stat-card",children:[f.jsxs("div",{className:"landing-stat-header",children:[f.jsxs("div",{children:[f.jsx("div",{style:{fontSize:"0.86rem",fontWeight:600,color:"#f9fafb"},children:"Todays campus snapshot"}),f.jsx("div",{style:{fontSize:"0.8rem",color:"#9ca3af",marginTop:2},children:"All numbers are driven from the local incident data in this prototype."})]}),f.jsxs("div",{className:"landing-stat-badge",children:[f.jsx("span",{className:"landing-stat-dot"}),"AI prediction active"]})]}),f.jsxs("div",{className:"landing-stat-row",children:[f.jsx("span",{className:"landing-stat-label",children:"Incident logic"}),f.jsx("span",{style:{fontWeight:600},children:"Unique hostel+room, duplicate prevention"})]}),f.jsxs("div",{className:"landing-stat-row",children:[f.jsx("span",{className:"landing-stat-label",children:"Prediction"}),f.jsx("span",{style:{fontWeight:600},children:"Risk per hostel  category (0100%)"})]}),f.jsxs("div",{className:"landing-stat-row",children:[f.jsx("span",{className:"landing-stat-label",children:"Scheduling"}),f.jsx("span",{style:{fontWeight:600},children:"No overlapping tasks per technician"})]}),f.jsxs("div",{className:"landing-stat-row",children:[f.jsx("span",{className:"landing-stat-label",children:"SLA & GPS"}),f.jsx("span",{style:{fontWeight:600},children:"30-minute SLA alerts + GPS link for technicians"})]}),f.jsxs("div",{style:{marginTop:4,fontSize:"0.78rem",color:"#9ca3af"},children:["Login as ",f.jsx("strong",{children:"Admin"})," to see: campus health score, hostel heatmap, incident trend over time, predicted risk list and SLA breach counts."]})]})]}),f.jsxs("section",{className:"landing-section",children:[f.jsx("h3",{className:"landing-section-title",children:"What this platform actually solves for the hackathon"}),f.jsx("p",{className:"landing-section-sub",children:"Instead of scattered WhatsApp complaints, we give a structured incident platform with prediction and technician scheduling that aligns with the problem statement: unique users, no spam, GPS, auto-priority and incident forecasting."}),f.jsxs("div",{className:"landing-cols-3",children:[f.jsxs("div",{className:"landing-mini-card",children:[f.jsx("h4",{children:"1. Smart complaint capture"}),f.jsxs("p",{children:["Students log issues with ",f.jsx("strong",{children:"hostel, room, category"}),", description and optional GPS. Repeated complaints from the same hostel & room for the same category are linked together instead of spamming admins."]})]}),f.jsxs("div",{className:"landing-mini-card",children:[f.jsx("h4",{children:"2. Intelligent priority & SLA"}),f.jsxs("p",{children:["Rules auto-mark unsafe electrical, water leakage and fire-risk issues as ",f.jsx("strong",{children:"High"}),". SLA logic flags incidents open for more than 30 minutes so they are surfaced on the admin dashboard."]})]}),f.jsxs("div",{className:"landing-mini-card",children:[f.jsx("h4",{children:"3. Prediction & hotspots"}),f.jsxs("p",{children:["For every hostel  problem category we compute a score from frequency trends, open vs resolved ratio and recent activity, then convert it to a probability of the"," ",f.jsx("em",{children:"next incident happening"}),"."]})]})]})]}),f.jsxs("section",{className:"landing-section",children:[f.jsx("h3",{className:"landing-section-title",children:"How each role uses it"}),f.jsxs("div",{className:"landing-cols-3",children:[f.jsxs("div",{className:"landing-mini-card",children:[f.jsxs("div",{className:"landing-mini-badge",children:[f.jsx("span",{})," Reporter"]}),f.jsx("h4",{children:"Student / Resident"}),f.jsxs("ul",{style:{margin:"6px 0 0 14px",padding:0,fontSize:"0.8rem"},children:[f.jsx("li",{children:"Login as Reporter"}),f.jsx("li",{children:"File incident with hostel, room, category & GPS"}),f.jsx("li",{children:"See status updates and history of own complaints"}),f.jsx("li",{children:"Prevents duplicate spam for the same issue"})]})]}),f.jsxs("div",{className:"landing-mini-card",children:[f.jsxs("div",{className:"landing-mini-badge",children:[f.jsx("span",{})," Admin"]}),f.jsx("h4",{children:"Admin / Warden"}),f.jsxs("ul",{style:{margin:"6px 0 0 14px",padding:0,fontSize:"0.8rem"},children:[f.jsx("li",{children:"Sees live incident list with filters"}),f.jsx("li",{children:"Views hostel risk heatmap & campus health score"}),f.jsx("li",{children:"Assigns tasks to technicians while avoiding overload"}),f.jsx("li",{children:"Gets alerts for SLA breaches and repeat hotspots"})]})]}),f.jsxs("div",{className:"landing-mini-card",children:[f.jsxs("div",{className:"landing-mini-badge",children:[f.jsx("span",{})," Technician"]}),f.jsx("h4",{children:"Maintenance team"}),f.jsxs("ul",{style:{margin:"6px 0 0 14px",padding:0,fontSize:"0.8rem"},children:[f.jsx("li",{children:"Can only hold one active task at a time"}),f.jsx("li",{children:"Gets full context: hostel, room, GPS, age & priority"}),f.jsx("li",{children:"Updates status: New  In Progress  Resolved"}),f.jsx("li",{children:"Helps admin see load per technician clearly"})]})]})]})]})]})]})}const Kv=z.createContext(null);function WT({children:t}){const[e,n]=z.useState(null);z.useEffect(()=>{const o=localStorage.getItem("incidentUser");if(o)try{n(JSON.parse(o))}catch{localStorage.removeItem("incidentUser")}},[]);const r=o=>{n(o),localStorage.setItem("incidentUser",JSON.stringify(o))},i=()=>{n(null),localStorage.removeItem("incidentUser")},s=o=>{r(o)};return f.jsx(Kv.Provider,{value:{user:e,login:r,logout:i,register:s},children:t})}function lr(){return z.useContext(Kv)}const qT="users_v1";function GT(){try{const t=localStorage.getItem(qT);return t?JSON.parse(t):[]}catch{return[]}}function QT(){const{login:t}=lr(),e=Rl(),[n,r]=z.useState({email:"",password:"",role:"reporter"}),[i,s]=z.useState(""),o=u=>{r(h=>({...h,[u.target.name]:u.target.value}))},l=u=>{if(u.preventDefault(),s(""),!n.email||!n.password){s("Please fill in email and password.");return}const p=GT().find(A=>A.email.toLowerCase()===n.email.toLowerCase()&&A.password===n.password&&A.role===n.role);if(!p){s("No account found for this email / password / role.");return}const{password:m,...g}=p;t(g),p.role==="reporter"?e("/reporter/dashboard"):p.role==="admin"?e("/admin/dashboard"):e("/technician/dashboard")};return f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.4fr) minmax(0, 1fr)",gap:32,alignItems:"center"},children:[f.jsxs("div",{children:[f.jsxs("div",{style:{padding:"22px 24px",borderRadius:24,background:"radial-gradient(circle at top left,#22c55e,#2563eb 45%,#0f172a 90%)",color:"white",boxShadow:"0 25px 55px rgba(15,23,42,0.55)",minHeight:220,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[f.jsxs("div",{children:[f.jsx("p",{style:{fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:1,opacity:.85},children:"Smart campus  Incident intelligence"}),f.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:700,marginTop:8,marginBottom:6},children:"Track, predict and resolve campus issues in real-time."}),f.jsx("p",{style:{fontSize:"0.95rem",opacity:.92},children:"Our system combines incident logs with intelligent risk scoring to highlight hotspots before they turn into failures."})]}),f.jsxs("div",{style:{marginTop:18,paddingTop:12,borderTop:"1px solid rgba(248,250,252,0.18)",display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:10,fontSize:"0.78rem"},children:[f.jsxs("div",{children:[f.jsx("p",{style:{opacity:.7},children:"Roles"}),f.jsx("p",{style:{fontWeight:600},children:"Reporter  Admin  Tech"})]}),f.jsxs("div",{children:[f.jsx("p",{style:{opacity:.7},children:"Smartness"}),f.jsx("p",{style:{fontWeight:600},children:"Auto-priority & risk score"})]}),f.jsxs("div",{children:[f.jsx("p",{style:{opacity:.7},children:"Insights"}),f.jsx("p",{style:{fontWeight:600},children:"Hotspots  SLA alerts"})]})]})]}),f.jsx("p",{style:{marginTop:14,fontSize:"0.85rem",color:"#6b7280"},children:"Try logging in with different roles to see how the experience changes for reporters, admins and technicians."})]}),f.jsxs("div",{style:{maxWidth:420,marginLeft:"auto",padding:24,background:"white",borderRadius:16,boxShadow:"0 14px 38px rgba(15,23,42,0.14)"},children:[f.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:600,marginBottom:4},children:"Sign in"}),f.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280",marginBottom:16},children:"Choose your role and explore the live dashboards."}),i&&f.jsx("div",{style:{marginBottom:12,padding:"8px 10px",borderRadius:8,background:"#fee2e2",color:"#b91c1c",fontSize:"0.85rem"},children:i}),f.jsxs("form",{onSubmit:l,style:{display:"grid",gap:12,marginTop:4},children:[f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Email"}),f.jsx("input",{type:"email",name:"email",value:n.email,onChange:o,placeholder:"you@campus.edu",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"}})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Password"}),f.jsx("input",{type:"password",name:"password",value:n.password,onChange:o,placeholder:"",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"}})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Login as"}),f.jsxs("select",{name:"role",value:n.role,onChange:o,style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"},children:[f.jsx("option",{value:"reporter",children:"Reporter"}),f.jsx("option",{value:"admin",children:"Admin"}),f.jsx("option",{value:"technician",children:"Technician"})]})]}),f.jsx("button",{type:"submit",style:{marginTop:8,padding:"10px 14px",borderRadius:999,border:"none",fontWeight:600,fontSize:"0.95rem",background:"linear-gradient(135deg, #2563eb, #4f46e5)",color:"white",cursor:"pointer"},children:"Continue"})]}),f.jsxs("p",{style:{marginTop:12,fontSize:"0.8rem",color:"#9ca3af"},children:["New here?"," ",f.jsx(kt,{to:"/register",style:{color:"#2563eb",textDecoration:"none"},children:"Create an account"})]})]})]})}const Yv="users_v1";function KT(){try{const t=localStorage.getItem(Yv);return t?JSON.parse(t):[]}catch{return[]}}function YT(t){localStorage.setItem(Yv,JSON.stringify(t))}function XT(){const{register:t}=lr(),e=Rl(),[n,r]=z.useState({name:"",email:"",password:"",role:"reporter",location:"",skills:""}),[i,s]=z.useState(""),o=u=>{r(h=>({...h,[u.target.name]:u.target.value}))},l=u=>{if(u.preventDefault(),s(""),!n.name||!n.email||!n.password){s("Please fill name, email and password.");return}if(n.role==="reporter"&&!n.location){s("Please enter your hostel/block location.");return}const h=KT();if(h.find(b=>b.email.toLowerCase()===n.email.toLowerCase())){s("An account with this email already exists.");return}const m={name:n.name,email:n.email,password:n.password,role:n.role,location:n.role==="reporter"?n.location:"",skills:n.role==="technician"?n.skills.split(",").map(b=>b.trim()).filter(Boolean):[]},g=[...h,m];YT(g);const{password:A,...k}=m;t(k),n.role==="reporter"?e("/reporter/dashboard"):n.role==="admin"?e("/admin/dashboard"):e("/technician/dashboard")};return f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.2fr) minmax(0, 1fr)",gap:32,alignItems:"center"},children:[f.jsxs("div",{children:[f.jsxs("div",{style:{padding:"22px 24px",borderRadius:24,background:"white",boxShadow:"0 18px 40px rgba(15,23,42,0.12)",border:"1px solid #e5e7eb"},children:[f.jsx("p",{style:{fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:1,color:"#6b7280"},children:"Create your workspace identity"}),f.jsx("h2",{style:{fontSize:"1.7rem",fontWeight:700,marginTop:8,marginBottom:10,color:"#0f172a"},children:"Different roles, one connected incident pipeline."}),f.jsx("p",{style:{fontSize:"0.95rem",color:"#4b5563"},children:"Reporters raise issues in hostels and labs, admins see patterns and SLAs, and technicians get a focused queue of tasks. Your role defines what you see in the system."}),f.jsxs("div",{style:{marginTop:18,display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:12,fontSize:"0.8rem"},children:[f.jsxs("div",{style:{padding:"8px 10px",borderRadius:12,background:"#eff6ff"},children:[f.jsx("p",{style:{fontWeight:600,color:"#1d4ed8"},children:"Reporter"}),f.jsx("p",{style:{color:"#4b5563"},children:"Students/staff log incidents with context like hostel, block and category."})]}),f.jsxs("div",{style:{padding:"8px 10px",borderRadius:12,background:"#ecfdf5"},children:[f.jsx("p",{style:{fontWeight:600,color:"#15803d"},children:"Admin"}),f.jsx("p",{style:{color:"#4b5563"},children:"Sees analytics, risk prediction per location & category, and SLA risks."})]}),f.jsxs("div",{style:{padding:"8px 10px",borderRadius:12,background:"#fefce8"},children:[f.jsx("p",{style:{fontWeight:600,color:"#92400e"},children:"Technician"}),f.jsx("p",{style:{color:"#4b5563"},children:"Gets a prioritized queue and updates status to keep everyone in sync."})]})]})]}),f.jsx("p",{style:{marginTop:14,fontSize:"0.85rem",color:"#6b7280"},children:"You can register once for each role to demo all three journeys during evaluation."})]}),f.jsxs("div",{style:{maxWidth:440,marginLeft:"auto",padding:24,background:"white",borderRadius:16,boxShadow:"0 14px 38px rgba(15,23,42,0.14)"},children:[f.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:600,marginBottom:4},children:"Create an account"}),f.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280",marginBottom:16},children:"Pick how youll use the system: as a reporter, admin or technician."}),i&&f.jsx("div",{style:{marginBottom:12,padding:"8px 10px",borderRadius:8,background:"#fee2e2",color:"#b91c1c",fontSize:"0.85rem"},children:i}),f.jsxs("form",{onSubmit:l,style:{display:"grid",gap:12,marginTop:4},children:[f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Name"}),f.jsx("input",{name:"name",value:n.name,onChange:o,placeholder:"Your full name",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"}})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Email"}),f.jsx("input",{type:"email",name:"email",value:n.email,onChange:o,placeholder:"you@campus.edu",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"}})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Password"}),f.jsx("input",{type:"password",name:"password",value:n.password,onChange:o,placeholder:"Set a password",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"}})]}),f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Role"}),f.jsxs("select",{name:"role",value:n.role,onChange:o,style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"},children:[f.jsx("option",{value:"reporter",children:"Reporter"}),f.jsx("option",{value:"admin",children:"Admin"}),f.jsx("option",{value:"technician",children:"Technician"})]})]}),n.role==="reporter"&&f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Location (Hostel / Block)"}),f.jsx("input",{name:"location",value:n.location,onChange:o,placeholder:"e.g., Hostel A, Block 3",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"}})]}),n.role==="technician"&&f.jsxs("div",{children:[f.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Skills (comma separated)"}),f.jsx("input",{name:"skills",value:n.skills,onChange:o,placeholder:"Electricity, Water, Internet",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"}})]}),f.jsx("button",{type:"submit",style:{marginTop:8,padding:"10px 14px",borderRadius:999,border:"none",fontWeight:600,fontSize:"0.95rem",background:"linear-gradient(135deg, #22c55e, #16a34a)",color:"white",cursor:"pointer"},children:"Create account"})]}),f.jsxs("p",{style:{marginTop:12,fontSize:"0.8rem",color:"#9ca3af"},children:["Already registered?"," ",f.jsx(kt,{to:"/login",style:{color:"#2563eb",textDecoration:"none"},children:"Back to login"})]})]})]})}const JT=()=>{};var pm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ZT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Jv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=s>>2,m=(s&3)<<4|l>>4;let g=(l&15)<<2|h>>6,A=h&63;u||(A=64,o||(g=64)),r.push(n[p],n[m],n[g],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Xv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||m==null)throw new ex;const g=s<<2|l>>4;if(r.push(g),h!==64){const A=l<<4&240|h>>2;if(r.push(A),m!==64){const k=h<<6&192|m;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ex extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tx=function(t){const e=Xv(t);return Jv.encodeByteArray(e,!0)},Ya=function(t){return tx(t).replace(/\./g,"")},nx=function(t){try{return Jv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=()=>rx().__FIREBASE_DEFAULTS__,sx=()=>{if(typeof process>"u"||typeof pm>"u")return;const t=pm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ox=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nx(t[1]);return e&&JSON.parse(e)},dd=()=>{try{return JT()||ix()||sx()||ox()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ax=t=>{var e,n;return(n=(e=dd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},lx=t=>{const e=ax(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Zv=()=>{var t;return(t=dd())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ya(JSON.stringify(n)),Ya(JSON.stringify(o)),""].join(".")}const ks={};function dx(){const t={prod:[],emulator:[]};for(const e of Object.keys(ks))ks[e]?t.emulator.push(e):t.prod.push(e);return t}function fx(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let mm=!1;function px(t,e){if(typeof window>"u"||typeof document>"u"||!fd(window.location.host)||ks[t]===e||ks[t]||mm)return;ks[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=dx().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,A){g.setAttribute("width","24"),g.setAttribute("id",A),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{mm=!0,o()},g}function p(g,A){g.setAttribute("id",A),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=fx(r),A=n("text"),k=document.getElementById(A)||document.createElement("span"),b=n("learnmore"),R=document.getElementById(b)||document.createElement("a"),x=n("preprendIcon"),_=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const w=g.element;l(w),p(R,b);const V=h();u(_,x),w.append(_,k,R,V),document.body.appendChild(w)}s?(k.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gx(){var e;const t=(e=dd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yx(){return!gx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vx(){try{return typeof indexedDB=="object"}catch{return!1}}function _x(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="FirebaseError";class ji extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wx,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,e_.prototype.create)}}class e_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Ex(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new ji(i,l,r)}}function Ex(t,e){return t.replace(Tx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Tx=/\{\$([^}]+)}/g;function Xa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(gm(s)&&gm(o)){if(!Xa(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function gm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){return t&&t._delegate?t._delegate:t}class eo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ux;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ix(e))try{this.getOrInitializeService({instanceIdentifier:_r})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=_r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_r){return this.instances.has(e)}getOptions(e=_r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Sx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_r){return this.component?this.component.multipleInstances?e:_r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sx(t){return t===_r?void 0:t}function Ix(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const Cx={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},Rx=ie.INFO,Px={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},kx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Px[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class t_{constructor(e){this.name=e,this._logLevel=Rx,this._logHandler=kx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Cx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const bx=(t,e)=>e.some(n=>t instanceof n);let ym,vm;function Nx(){return ym||(ym=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Vx(){return vm||(vm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n_=new WeakMap,Hc=new WeakMap,r_=new WeakMap,Mu=new WeakMap,pd=new WeakMap;function Dx(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Wn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&n_.set(n,t)}).catch(()=>{}),pd.set(e,t),e}function jx(t){if(Hc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Hc.set(t,e)}let Wc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||r_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ox(t){Wc=t(Wc)}function Lx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fu(this),e,...n);return r_.set(r,e.sort?e.sort():[e]),Wn(r)}:Vx().includes(t)?function(...e){return t.apply(Fu(this),e),Wn(n_.get(this))}:function(...e){return Wn(t.apply(Fu(this),e))}}function Mx(t){return typeof t=="function"?Lx(t):(t instanceof IDBTransaction&&jx(t),bx(t,Nx())?new Proxy(t,Wc):t)}function Wn(t){if(t instanceof IDBRequest)return Dx(t);if(Mu.has(t))return Mu.get(t);const e=Mx(t);return e!==t&&(Mu.set(t,e),pd.set(e,t)),e}const Fu=t=>pd.get(t);function Fx(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Wn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Wn(o.result),u.oldVersion,u.newVersion,Wn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const zx=["get","getKey","getAll","getAllKeys","count"],Ux=["put","add","delete","clear"],zu=new Map;function _m(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zu.get(e))return zu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Ux.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zx.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return zu.set(e,s),s}Ox(t=>({...t,get:(e,n,r)=>_m(e,n)||t.get(e,n,r),has:(e,n)=>!!_m(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($x(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $x(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qc="@firebase/app",wm="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn=new t_("@firebase/app"),Hx="@firebase/app-compat",Wx="@firebase/analytics-compat",qx="@firebase/analytics",Gx="@firebase/app-check-compat",Qx="@firebase/app-check",Kx="@firebase/auth",Yx="@firebase/auth-compat",Xx="@firebase/database",Jx="@firebase/data-connect",Zx="@firebase/database-compat",eS="@firebase/functions",tS="@firebase/functions-compat",nS="@firebase/installations",rS="@firebase/installations-compat",iS="@firebase/messaging",sS="@firebase/messaging-compat",oS="@firebase/performance",aS="@firebase/performance-compat",lS="@firebase/remote-config",uS="@firebase/remote-config-compat",cS="@firebase/storage",hS="@firebase/storage-compat",dS="@firebase/firestore",fS="@firebase/ai",pS="@firebase/firestore-compat",mS="firebase",gS="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc="[DEFAULT]",yS={[qc]:"fire-core",[Hx]:"fire-core-compat",[qx]:"fire-analytics",[Wx]:"fire-analytics-compat",[Qx]:"fire-app-check",[Gx]:"fire-app-check-compat",[Kx]:"fire-auth",[Yx]:"fire-auth-compat",[Xx]:"fire-rtdb",[Jx]:"fire-data-connect",[Zx]:"fire-rtdb-compat",[eS]:"fire-fn",[tS]:"fire-fn-compat",[nS]:"fire-iid",[rS]:"fire-iid-compat",[iS]:"fire-fcm",[sS]:"fire-fcm-compat",[oS]:"fire-perf",[aS]:"fire-perf-compat",[lS]:"fire-rc",[uS]:"fire-rc-compat",[cS]:"fire-gcs",[hS]:"fire-gcs-compat",[dS]:"fire-fst",[pS]:"fire-fst-compat",[fS]:"fire-vertex","fire-js":"fire-js",[mS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=new Map,vS=new Map,Qc=new Map;function Em(t,e){try{t.container.addComponent(e)}catch(n){yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Za(t){const e=t.name;if(Qc.has(e))return yn.debug(`There were multiple attempts to register component ${e}.`),!1;Qc.set(e,t);for(const n of Ja.values())Em(n,t);for(const n of vS.values())Em(n,t);return!0}function _S(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wS(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qn=new e_("app","Firebase",ES);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=gS;function i_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Gc,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw qn.create("bad-app-name",{appName:String(i)});if(n||(n=Zv()),!n)throw qn.create("no-options");const s=Ja.get(i);if(s){if(Xa(n,s.options)&&Xa(r,s.config))return s;throw qn.create("duplicate-app",{appName:i})}const o=new Ax(i);for(const u of Qc.values())o.addComponent(u);const l=new TS(n,r,o);return Ja.set(i,l),l}function SS(t=Gc){const e=Ja.get(t);if(!e&&t===Gc&&Zv())return i_();if(!e)throw qn.create("no-app",{appName:t});return e}function pi(t,e,n){let r=yS[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yn.warn(o.join(" "));return}Za(new eo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="firebase-heartbeat-database",AS=1,to="firebase-heartbeat-store";let Uu=null;function s_(){return Uu||(Uu=Fx(IS,AS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(to)}catch(n){console.warn(n)}}}}).catch(t=>{throw qn.create("idb-open",{originalErrorMessage:t.message})})),Uu}async function CS(t){try{const n=(await s_()).transaction(to),r=await n.objectStore(to).get(o_(t));return await n.done,r}catch(e){if(e instanceof ji)yn.warn(e.message);else{const n=qn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yn.warn(n.message)}}}async function Tm(t,e){try{const r=(await s_()).transaction(to,"readwrite");await r.objectStore(to).put(e,o_(t)),await r.done}catch(n){if(n instanceof ji)yn.warn(n.message);else{const r=qn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yn.warn(r.message)}}}function o_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=1024,PS=30;class kS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=xm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>PS){const o=VS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xm(),{heartbeatsToSend:r,unsentEntries:i}=bS(this._heartbeatsCache.heartbeats),s=Ya(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return yn.warn(n),""}}}function xm(){return new Date().toISOString().substring(0,10)}function bS(t,e=RS){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Sm(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Sm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class NS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vx()?_x().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Tm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Tm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Sm(t){return Ya(JSON.stringify({version:2,heartbeats:t})).length}function VS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){Za(new eo("platform-logger",e=>new Bx(e),"PRIVATE")),Za(new eo("heartbeat",e=>new kS(e),"PRIVATE")),pi(qc,wm,t),pi(qc,wm,"esm2020"),pi("fire-js","")}DS("");var Im=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gn,a_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function T(){}T.prototype=y.prototype,E.F=y.prototype,E.prototype=new T,E.prototype.constructor=E,E.D=function(I,C,P){for(var S=Array(arguments.length-2),de=2;de<arguments.length;de++)S[de-2]=arguments[de];return y.prototype[C].apply(I,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,y,T){T||(T=0);const I=Array(16);if(typeof y=="string")for(var C=0;C<16;++C)I[C]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(C=0;C<16;++C)I[C]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=E.g[0],T=E.g[1],C=E.g[2];let P=E.g[3],S;S=y+(P^T&(C^P))+I[0]+3614090360&4294967295,y=T+(S<<7&4294967295|S>>>25),S=P+(C^y&(T^C))+I[1]+3905402710&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(T^P&(y^T))+I[2]+606105819&4294967295,C=P+(S<<17&4294967295|S>>>15),S=T+(y^C&(P^y))+I[3]+3250441966&4294967295,T=C+(S<<22&4294967295|S>>>10),S=y+(P^T&(C^P))+I[4]+4118548399&4294967295,y=T+(S<<7&4294967295|S>>>25),S=P+(C^y&(T^C))+I[5]+1200080426&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(T^P&(y^T))+I[6]+2821735955&4294967295,C=P+(S<<17&4294967295|S>>>15),S=T+(y^C&(P^y))+I[7]+4249261313&4294967295,T=C+(S<<22&4294967295|S>>>10),S=y+(P^T&(C^P))+I[8]+1770035416&4294967295,y=T+(S<<7&4294967295|S>>>25),S=P+(C^y&(T^C))+I[9]+2336552879&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(T^P&(y^T))+I[10]+4294925233&4294967295,C=P+(S<<17&4294967295|S>>>15),S=T+(y^C&(P^y))+I[11]+2304563134&4294967295,T=C+(S<<22&4294967295|S>>>10),S=y+(P^T&(C^P))+I[12]+1804603682&4294967295,y=T+(S<<7&4294967295|S>>>25),S=P+(C^y&(T^C))+I[13]+4254626195&4294967295,P=y+(S<<12&4294967295|S>>>20),S=C+(T^P&(y^T))+I[14]+2792965006&4294967295,C=P+(S<<17&4294967295|S>>>15),S=T+(y^C&(P^y))+I[15]+1236535329&4294967295,T=C+(S<<22&4294967295|S>>>10),S=y+(C^P&(T^C))+I[1]+4129170786&4294967295,y=T+(S<<5&4294967295|S>>>27),S=P+(T^C&(y^T))+I[6]+3225465664&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^T&(P^y))+I[11]+643717713&4294967295,C=P+(S<<14&4294967295|S>>>18),S=T+(P^y&(C^P))+I[0]+3921069994&4294967295,T=C+(S<<20&4294967295|S>>>12),S=y+(C^P&(T^C))+I[5]+3593408605&4294967295,y=T+(S<<5&4294967295|S>>>27),S=P+(T^C&(y^T))+I[10]+38016083&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^T&(P^y))+I[15]+3634488961&4294967295,C=P+(S<<14&4294967295|S>>>18),S=T+(P^y&(C^P))+I[4]+3889429448&4294967295,T=C+(S<<20&4294967295|S>>>12),S=y+(C^P&(T^C))+I[9]+568446438&4294967295,y=T+(S<<5&4294967295|S>>>27),S=P+(T^C&(y^T))+I[14]+3275163606&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^T&(P^y))+I[3]+4107603335&4294967295,C=P+(S<<14&4294967295|S>>>18),S=T+(P^y&(C^P))+I[8]+1163531501&4294967295,T=C+(S<<20&4294967295|S>>>12),S=y+(C^P&(T^C))+I[13]+2850285829&4294967295,y=T+(S<<5&4294967295|S>>>27),S=P+(T^C&(y^T))+I[2]+4243563512&4294967295,P=y+(S<<9&4294967295|S>>>23),S=C+(y^T&(P^y))+I[7]+1735328473&4294967295,C=P+(S<<14&4294967295|S>>>18),S=T+(P^y&(C^P))+I[12]+2368359562&4294967295,T=C+(S<<20&4294967295|S>>>12),S=y+(T^C^P)+I[5]+4294588738&4294967295,y=T+(S<<4&4294967295|S>>>28),S=P+(y^T^C)+I[8]+2272392833&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^T)+I[11]+1839030562&4294967295,C=P+(S<<16&4294967295|S>>>16),S=T+(C^P^y)+I[14]+4259657740&4294967295,T=C+(S<<23&4294967295|S>>>9),S=y+(T^C^P)+I[1]+2763975236&4294967295,y=T+(S<<4&4294967295|S>>>28),S=P+(y^T^C)+I[4]+1272893353&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^T)+I[7]+4139469664&4294967295,C=P+(S<<16&4294967295|S>>>16),S=T+(C^P^y)+I[10]+3200236656&4294967295,T=C+(S<<23&4294967295|S>>>9),S=y+(T^C^P)+I[13]+681279174&4294967295,y=T+(S<<4&4294967295|S>>>28),S=P+(y^T^C)+I[0]+3936430074&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^T)+I[3]+3572445317&4294967295,C=P+(S<<16&4294967295|S>>>16),S=T+(C^P^y)+I[6]+76029189&4294967295,T=C+(S<<23&4294967295|S>>>9),S=y+(T^C^P)+I[9]+3654602809&4294967295,y=T+(S<<4&4294967295|S>>>28),S=P+(y^T^C)+I[12]+3873151461&4294967295,P=y+(S<<11&4294967295|S>>>21),S=C+(P^y^T)+I[15]+530742520&4294967295,C=P+(S<<16&4294967295|S>>>16),S=T+(C^P^y)+I[2]+3299628645&4294967295,T=C+(S<<23&4294967295|S>>>9),S=y+(C^(T|~P))+I[0]+4096336452&4294967295,y=T+(S<<6&4294967295|S>>>26),S=P+(T^(y|~C))+I[7]+1126891415&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~T))+I[14]+2878612391&4294967295,C=P+(S<<15&4294967295|S>>>17),S=T+(P^(C|~y))+I[5]+4237533241&4294967295,T=C+(S<<21&4294967295|S>>>11),S=y+(C^(T|~P))+I[12]+1700485571&4294967295,y=T+(S<<6&4294967295|S>>>26),S=P+(T^(y|~C))+I[3]+2399980690&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~T))+I[10]+4293915773&4294967295,C=P+(S<<15&4294967295|S>>>17),S=T+(P^(C|~y))+I[1]+2240044497&4294967295,T=C+(S<<21&4294967295|S>>>11),S=y+(C^(T|~P))+I[8]+1873313359&4294967295,y=T+(S<<6&4294967295|S>>>26),S=P+(T^(y|~C))+I[15]+4264355552&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~T))+I[6]+2734768916&4294967295,C=P+(S<<15&4294967295|S>>>17),S=T+(P^(C|~y))+I[13]+1309151649&4294967295,T=C+(S<<21&4294967295|S>>>11),S=y+(C^(T|~P))+I[4]+4149444226&4294967295,y=T+(S<<6&4294967295|S>>>26),S=P+(T^(y|~C))+I[11]+3174756917&4294967295,P=y+(S<<10&4294967295|S>>>22),S=C+(y^(P|~T))+I[2]+718787259&4294967295,C=P+(S<<15&4294967295|S>>>17),S=T+(P^(C|~y))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(C+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.v=function(E,y){y===void 0&&(y=E.length);const T=y-this.blockSize,I=this.C;let C=this.h,P=0;for(;P<y;){if(C==0)for(;P<=T;)i(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<y;)if(I[C++]=E.charCodeAt(P++),C==this.blockSize){i(this,I),C=0;break}}else for(;P<y;)if(I[C++]=E[P++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=y},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;y=this.o*8;for(var T=E.length-8;T<E.length;++T)E[T]=y&255,y/=256;for(this.v(E),E=Array(16),y=0,T=0;T<4;++T)for(let I=0;I<32;I+=8)E[y++]=this.g[T]>>>I&255;return E};function s(E,y){var T=l;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=y(E)}function o(E,y){this.h=y;const T=[];let I=!0;for(let C=E.length-1;C>=0;C--){const P=E[C]|0;I&&P==y||(T[C]=P,I=!1)}this.g=T}var l={};function u(E){return-128<=E&&E<128?s(E,function(y){return new o([y|0],y<0?-1:0)}):new o([E|0],E<0?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(E<0)return R(h(-E));const y=[];let T=1;for(let I=0;E>=T;I++)y[I]=E/T|0,T*=4294967296;return new o(y,0)}function p(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return R(p(E.substring(1),y));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=h(Math.pow(y,8));let I=m;for(let P=0;P<E.length;P+=8){var C=Math.min(8,E.length-P);const S=parseInt(E.substring(P,P+C),y);C<8?(C=h(Math.pow(y,C)),I=I.j(C).add(h(S))):(I=I.j(T),I=I.add(h(S)))}return I}var m=u(0),g=u(1),A=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-R(this).m();let E=0,y=1;for(let T=0;T<this.g.length;T++){const I=this.i(T);E+=(I>=0?I:4294967296+I)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(k(this))return"0";if(b(this))return"-"+R(this).toString(E);const y=h(Math.pow(E,6));var T=this;let I="";for(;;){const C=V(T,y).g;T=x(T,C.j(y));let P=((T.g.length>0?T.g[0]:T.h)>>>0).toString(E);if(T=C,k(T))return P+I;for(;P.length<6;)P="0"+P;I=P+I}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function k(E){if(E.h!=0)return!1;for(let y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function b(E){return E.h==-1}t.l=function(E){return E=x(this,E),b(E)?-1:k(E)?0:1};function R(E){const y=E.g.length,T=[];for(let I=0;I<y;I++)T[I]=~E.g[I];return new o(T,~E.h).add(g)}t.abs=function(){return b(this)?R(this):this},t.add=function(E){const y=Math.max(this.g.length,E.g.length),T=[];let I=0;for(let C=0;C<=y;C++){let P=I+(this.i(C)&65535)+(E.i(C)&65535),S=(P>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);I=S>>>16,P&=65535,S&=65535,T[C]=S<<16|P}return new o(T,T[T.length-1]&-2147483648?-1:0)};function x(E,y){return E.add(R(y))}t.j=function(E){if(k(this)||k(E))return m;if(b(this))return b(E)?R(this).j(R(E)):R(R(this).j(E));if(b(E))return R(this.j(R(E)));if(this.l(A)<0&&E.l(A)<0)return h(this.m()*E.m());const y=this.g.length+E.g.length,T=[];for(var I=0;I<2*y;I++)T[I]=0;for(I=0;I<this.g.length;I++)for(let C=0;C<E.g.length;C++){const P=this.i(I)>>>16,S=this.i(I)&65535,de=E.i(C)>>>16,Ce=E.i(C)&65535;T[2*I+2*C]+=S*Ce,_(T,2*I+2*C),T[2*I+2*C+1]+=P*Ce,_(T,2*I+2*C+1),T[2*I+2*C+1]+=S*de,_(T,2*I+2*C+1),T[2*I+2*C+2]+=P*de,_(T,2*I+2*C+2)}for(E=0;E<y;E++)T[E]=T[2*E+1]<<16|T[2*E];for(E=y;E<2*y;E++)T[E]=0;return new o(T,0)};function _(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function w(E,y){this.g=E,this.h=y}function V(E,y){if(k(y))throw Error("division by zero");if(k(E))return new w(m,m);if(b(E))return y=V(R(E),y),new w(R(y.g),R(y.h));if(b(y))return y=V(E,R(y)),new w(R(y.g),y.h);if(E.g.length>30){if(b(E)||b(y))throw Error("slowDivide_ only works with positive integers.");for(var T=g,I=y;I.l(E)<=0;)T=M(T),I=M(I);var C=F(T,1),P=F(I,1);for(I=F(I,2),T=F(T,2);!k(I);){var S=P.add(I);S.l(E)<=0&&(C=C.add(T),P=S),I=F(I,1),T=F(T,1)}return y=x(E,C.j(y)),new w(C,y)}for(C=m;E.l(y)>=0;){for(T=Math.max(1,Math.floor(E.m()/y.m())),I=Math.ceil(Math.log(T)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),P=h(T),S=P.j(y);b(S)||S.l(E)>0;)T-=I,P=h(T),S=P.j(y);k(P)&&(P=g),C=C.add(P),E=x(E,S)}return new w(C,E)}t.B=function(E){return V(this,E).h},t.and=function(E){const y=Math.max(this.g.length,E.g.length),T=[];for(let I=0;I<y;I++)T[I]=this.i(I)&E.i(I);return new o(T,this.h&E.h)},t.or=function(E){const y=Math.max(this.g.length,E.g.length),T=[];for(let I=0;I<y;I++)T[I]=this.i(I)|E.i(I);return new o(T,this.h|E.h)},t.xor=function(E){const y=Math.max(this.g.length,E.g.length),T=[];for(let I=0;I<y;I++)T[I]=this.i(I)^E.i(I);return new o(T,this.h^E.h)};function M(E){const y=E.g.length+1,T=[];for(let I=0;I<y;I++)T[I]=E.i(I)<<1|E.i(I-1)>>>31;return new o(T,E.h)}function F(E,y){const T=y>>5;y%=32;const I=E.g.length-T,C=[];for(let P=0;P<I;P++)C[P]=y>0?E.i(P+T)>>>y|E.i(P+T+1)<<32-y:E.i(P+T);return new o(C,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,a_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Gn=o}).apply(typeof Im<"u"?Im:typeof self<"u"?self:typeof window<"u"?window:{});var ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var l_,ys,u_,_a,Kc,c_,h_,d_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ea=="object"&&ea];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var d=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var N=a[v];if(!(N in d))break e;d=d[N]}a=a[a.length-1],v=d[a],c=c(v),c!=v&&c!=null&&e(d,a,{configurable:!0,writable:!0,value:c})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(c){var d=[],v;for(v in c)Object.prototype.hasOwnProperty.call(c,v)&&d.push([v,c[v]]);return d}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function u(a,c,d){return a.call.apply(a.bind,arguments)}function h(a,c,d){return h=u,h.apply(null,arguments)}function p(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var v=d.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function m(a,c){function d(){}d.prototype=c.prototype,a.Z=c.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(v,N,D){for(var B=Array(arguments.length-2),J=2;J<arguments.length;J++)B[J-2]=arguments[J];return c.prototype[N].apply(v,B)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function A(a){const c=a.length;if(c>0){const d=Array(c);for(let v=0;v<c;v++)d[v]=a[v];return d}return[]}function k(a,c){for(let v=1;v<arguments.length;v++){const N=arguments[v];var d=typeof N;if(d=d!="object"?d:N?Array.isArray(N)?"array":d:"null",d=="array"||d=="object"&&typeof N.length=="number"){d=a.length||0;const D=N.length||0;a.length=d+D;for(let B=0;B<D;B++)a[d+B]=N[B]}else a.push(N)}}class b{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function R(a){o.setTimeout(()=>{throw a},0)}function x(){var a=E;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class _{constructor(){this.h=this.g=null}add(c,d){const v=w.get();v.set(c,d),this.h?this.h.next=v:this.g=v,this.h=v}}var w=new b(()=>new V,a=>a.reset());class V{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,E=new _,y=()=>{const a=Promise.resolve(void 0);M=()=>{a.then(T)}};function T(){for(var a;a=x();){try{a.h.call(a.g)}catch(d){R(d)}var c=w;c.j(a),c.h<100&&(c.h++,a.next=c.g,c.g=a)}F=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,c),o.removeEventListener("test",d,c)}catch{}return a}();function S(a){return/^[\s\xa0]*$/.test(a)}function de(a,c){C.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,c)}m(de,C),de.prototype.init=function(a,c){const d=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget,c||(d=="mouseover"?c=a.fromElement:d=="mouseout"&&(c=a.toElement)),this.relatedTarget=c,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ce="closure_listenable_"+(Math.random()*1e6|0),It=0;function Dt(a,c,d,v,N){this.listener=a,this.proxy=null,this.src=c,this.type=d,this.capture=!!v,this.ha=N,this.key=++It,this.da=this.fa=!1}function L(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function $(a,c,d){for(const v in a)c.call(d,a[v],v,a)}function K(a,c){for(const d in a)c.call(void 0,a[d],d,a)}function ee(a){const c={};for(const d in a)c[d]=a[d];return c}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Re(a,c){let d,v;for(let N=1;N<arguments.length;N++){v=arguments[N];for(d in v)a[d]=v[d];for(let D=0;D<oe.length;D++)d=oe[D],Object.prototype.hasOwnProperty.call(v,d)&&(a[d]=v[d])}}function Me(a){this.src=a,this.g={},this.h=0}Me.prototype.add=function(a,c,d,v,N){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const B=rt(a,c,v,N);return B>-1?(c=a[B],d||(c.fa=!1)):(c=new Dt(c,this.src,D,!!v,N),c.fa=d,a.push(c)),c};function jt(a,c){const d=c.type;if(d in a.g){var v=a.g[d],N=Array.prototype.indexOf.call(v,c,void 0),D;(D=N>=0)&&Array.prototype.splice.call(v,N,1),D&&(L(c),a.g[d].length==0&&(delete a.g[d],a.h--))}}function rt(a,c,d,v){for(let N=0;N<a.length;++N){const D=a[N];if(!D.da&&D.listener==c&&D.capture==!!d&&D.ha==v)return N}return-1}var Ot="closure_lm_"+(Math.random()*1e6|0),Ui={};function xo(a,c,d,v,N){if(Array.isArray(c)){for(let D=0;D<c.length;D++)xo(a,c[D],d,v,N);return null}return d=Zd(d),a&&a[Ce]?a.J(c,d,l(v)?!!v.capture:!1,N):Ur(a,c,d,!1,v,N)}function Ur(a,c,d,v,N,D){if(!c)throw Error("Invalid event type");const B=l(N)?!!N.capture:!!N;let J=ql(a);if(J||(a[Ot]=J=new Me(a)),d=J.add(c,d,v,B,D),d.proxy)return d;if(v=Hl(),d.proxy=v,v.src=a,v.listener=d,a.addEventListener)P||(N=B),N===void 0&&(N=!1),a.addEventListener(c.toString(),v,N);else if(a.attachEvent)a.attachEvent(Wl(c.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Hl(){function a(d){return c.call(a.src,a.listener,d)}const c=z0;return a}function So(a,c,d,v,N){if(Array.isArray(c))for(var D=0;D<c.length;D++)So(a,c[D],d,v,N);else v=l(v)?!!v.capture:!!v,d=Zd(d),a&&a[Ce]?(a=a.i,D=String(c).toString(),D in a.g&&(c=a.g[D],d=rt(c,d,v,N),d>-1&&(L(c[d]),Array.prototype.splice.call(c,d,1),c.length==0&&(delete a.g[D],a.h--)))):a&&(a=ql(a))&&(c=a.g[c.toString()],a=-1,c&&(a=rt(c,d,v,N)),(d=a>-1?c[a]:null)&&hr(d))}function hr(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[Ce])jt(c.i,a);else{var d=a.type,v=a.proxy;c.removeEventListener?c.removeEventListener(d,v,a.capture):c.detachEvent?c.detachEvent(Wl(d),v):c.addListener&&c.removeListener&&c.removeListener(v),(d=ql(c))?(jt(d,a),d.h==0&&(d.src=null,c[Ot]=null)):L(a)}}}function Wl(a){return a in Ui?Ui[a]:Ui[a]="on"+a}function z0(a,c){if(a.da)a=!0;else{c=new de(c,this);const d=a.listener,v=a.ha||a.src;a.fa&&hr(a),a=d.call(v,c)}return a}function ql(a){return a=a[Ot],a instanceof Me?a:null}var Gl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Zd(a){return typeof a=="function"?a:(a[Gl]||(a[Gl]=function(c){return a.handleEvent(c)}),a[Gl])}function Ke(){I.call(this),this.i=new Me(this),this.M=this,this.G=null}m(Ke,I),Ke.prototype[Ce]=!0,Ke.prototype.removeEventListener=function(a,c,d,v){So(this,a,c,d,v)};function it(a,c){var d,v=a.G;if(v)for(d=[];v;v=v.G)d.push(v);if(a=a.M,v=c.type||c,typeof c=="string")c=new C(c,a);else if(c instanceof C)c.target=c.target||a;else{var N=c;c=new C(v,a),Re(c,N)}N=!0;let D,B;if(d)for(B=d.length-1;B>=0;B--)D=c.g=d[B],N=Io(D,v,!0,c)&&N;if(D=c.g=a,N=Io(D,v,!0,c)&&N,N=Io(D,v,!1,c)&&N,d)for(B=0;B<d.length;B++)D=c.g=d[B],N=Io(D,v,!1,c)&&N}Ke.prototype.N=function(){if(Ke.Z.N.call(this),this.i){var a=this.i;for(const c in a.g){const d=a.g[c];for(let v=0;v<d.length;v++)L(d[v]);delete a.g[c],a.h--}}this.G=null},Ke.prototype.J=function(a,c,d,v){return this.i.add(String(a),c,!1,d,v)},Ke.prototype.K=function(a,c,d,v){return this.i.add(String(a),c,!0,d,v)};function Io(a,c,d,v){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();let N=!0;for(let D=0;D<c.length;++D){const B=c[D];if(B&&!B.da&&B.capture==d){const J=B.listener,De=B.ha||B.src;B.fa&&jt(a.i,B),N=J.call(De,v)!==!1&&N}}return N&&!v.defaultPrevented}function U0(a,c){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:o.setTimeout(a,c||0)}function ef(a){a.g=U0(()=>{a.g=null,a.i&&(a.i=!1,ef(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class B0 extends I{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:ef(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bi(a){I.call(this),this.h=a,this.g={}}m(Bi,I);var tf=[];function nf(a){$(a.g,function(c,d){this.g.hasOwnProperty(d)&&hr(c)},a),a.g={}}Bi.prototype.N=function(){Bi.Z.N.call(this),nf(this)},Bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ql=o.JSON.stringify,$0=o.JSON.parse,H0=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function rf(){}function sf(){}var $i={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kl(){C.call(this,"d")}m(Kl,C);function Yl(){C.call(this,"c")}m(Yl,C);var dr={},of=null;function Ao(){return of=of||new Ke}dr.Ia="serverreachability";function af(a){C.call(this,dr.Ia,a)}m(af,C);function Hi(a){const c=Ao();it(c,new af(c))}dr.STAT_EVENT="statevent";function lf(a,c){C.call(this,dr.STAT_EVENT,a),this.stat=c}m(lf,C);function st(a){const c=Ao();it(c,new lf(c,a))}dr.Ja="timingevent";function uf(a,c){C.call(this,dr.Ja,a),this.size=c}m(uf,C);function Wi(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},c)}function qi(){this.g=!0}qi.prototype.ua=function(){this.g=!1};function W0(a,c,d,v,N,D){a.info(function(){if(a.g)if(D){var B="",J=D.split("&");for(let ue=0;ue<J.length;ue++){var De=J[ue].split("=");if(De.length>1){const Fe=De[0];De=De[1];const qt=Fe.split("_");B=qt.length>=2&&qt[1]=="type"?B+(Fe+"="+De+"&"):B+(Fe+"=redacted&")}}}else B=null;else B=D;return"XMLHTTP REQ ("+v+") [attempt "+N+"]: "+c+`
`+d+`
`+B})}function q0(a,c,d,v,N,D,B){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+N+"]: "+c+`
`+d+`
`+D+" "+B})}function Br(a,c,d,v){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+Q0(a,d)+(v?" "+v:"")})}function G0(a,c){a.info(function(){return"TIMEOUT: "+c})}qi.prototype.info=function(){};function Q0(a,c){if(!a.g)return c;if(!c)return null;try{const D=JSON.parse(c);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var d=D[a];if(!(d.length<2)){var v=d[1];if(Array.isArray(v)&&!(v.length<1)){var N=v[0];if(N!="noop"&&N!="stop"&&N!="close")for(let B=1;B<v.length;B++)v[B]=""}}}}return Ql(D)}catch{return c}}var Co={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hf;function Xl(){}m(Xl,rf),Xl.prototype.g=function(){return new XMLHttpRequest},hf=new Xl;function Gi(a){return encodeURIComponent(String(a))}function K0(a){var c=1;a=a.split(":");const d=[];for(;c>0&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(":")),d}function En(a,c,d,v){this.j=a,this.i=c,this.l=d,this.S=v||1,this.V=new Bi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new df}function df(){this.i=null,this.g="",this.h=!1}var ff={},Jl={};function Zl(a,c,d){a.M=1,a.A=Po(Wt(c)),a.u=d,a.R=!0,pf(a,null)}function pf(a,c){a.F=Date.now(),Ro(a),a.B=Wt(a.A);var d=a.B,v=a.S;Array.isArray(v)||(v=[String(v)]),Cf(d.i,"t",v),a.C=0,d=a.j.L,a.h=new df,a.g=Wf(a.j,d?c:null,!a.u),a.P>0&&(a.O=new B0(h(a.Y,a,a.g),a.P)),c=a.V,d=a.g,v=a.ba;var N="readystatechange";Array.isArray(N)||(N&&(tf[0]=N.toString()),N=tf);for(let D=0;D<N.length;D++){const B=xo(d,N[D],v||c.handleEvent,!1,c.h||c);if(!B)break;c.g[B.key]=B}c=a.J?ee(a.J):{},a.u?(a.v||(a.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,c)):(a.v="GET",a.g.ea(a.B,a.v,null,c)),Hi(),W0(a.i,a.v,a.B,a.l,a.S,a.u)}En.prototype.ba=function(a){a=a.target;const c=this.O;c&&Sn(a)==3?c.j():this.Y(a)},En.prototype.Y=function(a){try{if(a==this.g)e:{const J=Sn(this.g),De=this.g.ya(),ue=this.g.ca();if(!(J<3)&&(J!=3||this.g&&(this.h.h||this.g.la()||Df(this.g)))){this.K||J!=4||De==7||(De==8||ue<=0?Hi(3):Hi(2)),eu(this);var c=this.g.ca();this.X=c;var d=Y0(this);if(this.o=c==200,q0(this.i,this.v,this.B,this.l,this.S,J,c),this.o){if(this.U&&!this.L){t:{if(this.g){var v,N=this.g;if((v=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(v)){var D=v;break t}}D=null}if(a=D)Br(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tu(this,a);else{this.o=!1,this.m=3,st(12),fr(this),Qi(this);break e}}if(this.R){a=!0;let Fe;for(;!this.K&&this.C<d.length;)if(Fe=X0(this,d),Fe==Jl){J==4&&(this.m=4,st(14),a=!1),Br(this.i,this.l,null,"[Incomplete Response]");break}else if(Fe==ff){this.m=4,st(15),Br(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else Br(this.i,this.l,Fe,null),tu(this,Fe);if(mf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),J!=4||d.length!=0||this.h.h||(this.m=1,st(16),a=!1),this.o=this.o&&a,!a)Br(this.i,this.l,d,"[Invalid Chunked Response]"),fr(this),Qi(this);else if(d.length>0&&!this.W){this.W=!0;var B=this.j;B.g==this&&B.aa&&!B.P&&(B.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),uu(B),B.P=!0,st(11))}}else Br(this.i,this.l,d,null),tu(this,d);J==4&&fr(this),this.o&&!this.K&&(J==4?Uf(this.j,this):(this.o=!1,Ro(this)))}else h1(this.g),c==400&&d.indexOf("Unknown SID")>0?(this.m=3,st(12)):(this.m=0,st(13)),fr(this),Qi(this)}}}catch{}finally{}};function Y0(a){if(!mf(a))return a.g.la();const c=Df(a.g);if(c==="")return"";let d="";const v=c.length,N=Sn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return fr(a),Qi(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<v;D++)a.h.h=!0,d+=a.h.i.decode(c[D],{stream:!(N&&D==v-1)});return c.length=0,a.h.g+=d,a.C=0,a.h.g}function mf(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function X0(a,c){var d=a.C,v=c.indexOf(`
`,d);return v==-1?Jl:(d=Number(c.substring(d,v)),isNaN(d)?ff:(v+=1,v+d>c.length?Jl:(c=c.slice(v,v+d),a.C=v+d,c)))}En.prototype.cancel=function(){this.K=!0,fr(this)};function Ro(a){a.T=Date.now()+a.H,gf(a,a.H)}function gf(a,c){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Wi(h(a.aa,a),c)}function eu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}En.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(G0(this.i,this.B),this.M!=2&&(Hi(),st(17)),fr(this),this.m=2,Qi(this)):gf(this,this.T-a)};function Qi(a){a.j.I==0||a.K||Uf(a.j,a)}function fr(a){eu(a);var c=a.O;c&&typeof c.dispose=="function"&&c.dispose(),a.O=null,nf(a.V),a.g&&(c=a.g,a.g=null,c.abort(),c.dispose())}function tu(a,c){try{var d=a.j;if(d.I!=0&&(d.g==a||nu(d.h,a))){if(!a.L&&nu(d.h,a)&&d.I==3){try{var v=d.Ba.g.parse(c)}catch{v=null}if(Array.isArray(v)&&v.length==3){var N=v;if(N[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)Do(d),No(d);else break e;lu(d),st(18)}}else d.xa=N[1],0<d.xa-d.K&&N[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Wi(h(d.Va,d),6e3));_f(d.h)<=1&&d.ta&&(d.ta=void 0)}else mr(d,11)}else if((a.L||d.g==a)&&Do(d),!S(c))for(N=d.Ba.g.parse(c),c=0;c<N.length;c++){let ue=N[c];const Fe=ue[0];if(!(Fe<=d.K))if(d.K=Fe,ue=ue[1],d.I==2)if(ue[0]=="c"){d.M=ue[1],d.ba=ue[2];const qt=ue[3];qt!=null&&(d.ka=qt,d.j.info("VER="+d.ka));const gr=ue[4];gr!=null&&(d.za=gr,d.j.info("SVER="+d.za));const In=ue[5];In!=null&&typeof In=="number"&&In>0&&(v=1.5*In,d.O=v,d.j.info("backChannelRequestTimeoutMs_="+v)),v=d;const An=a.g;if(An){const Oo=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oo){var D=v.h;D.g||Oo.indexOf("spdy")==-1&&Oo.indexOf("quic")==-1&&Oo.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(ru(D,D.h),D.h=null))}if(v.G){const cu=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;cu&&(v.wa=cu,fe(v.J,v.G,cu))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),v=d;var B=a;if(v.na=Hf(v,v.L?v.ba:null,v.W),B.L){wf(v.h,B);var J=B,De=v.O;De&&(J.H=De),J.D&&(eu(J),Ro(J)),v.g=B}else Ff(v);d.i.length>0&&Vo(d)}else ue[0]!="stop"&&ue[0]!="close"||mr(d,7);else d.I==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?mr(d,7):au(d):ue[0]!="noop"&&d.l&&d.l.qa(ue),d.A=0)}}Hi(4)}catch{}}var J0=class{constructor(a,c){this.g=a,this.map=c}};function yf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function _f(a){return a.h?1:a.g?a.g.size:0}function nu(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function ru(a,c){a.g?a.g.add(c):a.h=c}function wf(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}yf.prototype.cancel=function(){if(this.i=Ef(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ef(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const d of a.g.values())c=c.concat(d.G);return c}return A(a.i)}var Tf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Z0(a,c){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const v=a[d].indexOf("=");let N,D=null;v>=0?(N=a[d].substring(0,v),D=a[d].substring(v+1)):N=a[d],c(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Tn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;a instanceof Tn?(this.l=a.l,Ki(this,a.j),this.o=a.o,this.g=a.g,Yi(this,a.u),this.h=a.h,iu(this,Rf(a.i)),this.m=a.m):a&&(c=String(a).match(Tf))?(this.l=!1,Ki(this,c[1]||"",!0),this.o=Xi(c[2]||""),this.g=Xi(c[3]||"",!0),Yi(this,c[4]),this.h=Xi(c[5]||"",!0),iu(this,c[6]||"",!0),this.m=Xi(c[7]||"")):(this.l=!1,this.i=new Zi(null,this.l))}Tn.prototype.toString=function(){const a=[];var c=this.j;c&&a.push(Ji(c,xf,!0),":");var d=this.g;return(d||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Ji(c,xf,!0),"@"),a.push(Gi(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Ji(d,d.charAt(0)=="/"?n1:t1,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Ji(d,i1)),a.join("")},Tn.prototype.resolve=function(a){const c=Wt(this);let d=!!a.j;d?Ki(c,a.j):d=!!a.o,d?c.o=a.o:d=!!a.g,d?c.g=a.g:d=a.u!=null;var v=a.h;if(d)Yi(c,a.u);else if(d=!!a.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var N=c.h.lastIndexOf("/");N!=-1&&(v=c.h.slice(0,N+1)+v)}if(N=v,N==".."||N==".")v="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){v=N.lastIndexOf("/",0)==0,N=N.split("/");const D=[];for(let B=0;B<N.length;){const J=N[B++];J=="."?v&&B==N.length&&D.push(""):J==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),v&&B==N.length&&D.push("")):(D.push(J),v=!0)}v=D.join("/")}else v=N}return d?c.h=v:d=a.i.toString()!=="",d?iu(c,Rf(a.i)):d=!!a.m,d&&(c.m=a.m),c};function Wt(a){return new Tn(a)}function Ki(a,c,d){a.j=d?Xi(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Yi(a,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);a.u=c}else a.u=null}function iu(a,c,d){c instanceof Zi?(a.i=c,s1(a.i,a.l)):(d||(c=Ji(c,r1)),a.i=new Zi(c,a.l))}function fe(a,c,d){a.i.set(c,d)}function Po(a){return fe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Xi(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ji(a,c,d){return typeof a=="string"?(a=encodeURI(a).replace(c,e1),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function e1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var xf=/[#\/\?@]/g,t1=/[#\?:]/g,n1=/[#\?]/g,r1=/[#\?@]/g,i1=/#/g;function Zi(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function pr(a){a.g||(a.g=new Map,a.h=0,a.i&&Z0(a.i,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=Zi.prototype,t.add=function(a,c){pr(this),this.i=null,a=$r(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(c),this.h+=1,this};function Sf(a,c){pr(a),c=$r(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function If(a,c){return pr(a),c=$r(a,c),a.g.has(c)}t.forEach=function(a,c){pr(this),this.g.forEach(function(d,v){d.forEach(function(N){a.call(c,N,v,this)},this)},this)};function Af(a,c){pr(a);let d=[];if(typeof c=="string")If(a,c)&&(d=d.concat(a.g.get($r(a,c))));else for(a=Array.from(a.g.values()),c=0;c<a.length;c++)d=d.concat(a[c]);return d}t.set=function(a,c){return pr(this),this.i=null,a=$r(this,a),If(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=Af(this,a),a.length>0?String(a[0]):c):c};function Cf(a,c,d){Sf(a,c),d.length>0&&(a.i=null,a.g.set($r(a,c),A(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(let v=0;v<c.length;v++){var d=c[v];const N=Gi(d);d=Af(this,d);for(let D=0;D<d.length;D++){let B=N;d[D]!==""&&(B+="="+Gi(d[D])),a.push(B)}}return this.i=a.join("&")};function Rf(a){const c=new Zi;return c.i=a.i,a.g&&(c.g=new Map(a.g),c.h=a.h),c}function $r(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function s1(a,c){c&&!a.j&&(pr(a),a.i=null,a.g.forEach(function(d,v){const N=v.toLowerCase();v!=N&&(Sf(this,v),Cf(this,N,d))},a)),a.j=c}function o1(a,c){const d=new qi;if(o.Image){const v=new Image;v.onload=p(xn,d,"TestLoadImage: loaded",!0,c,v),v.onerror=p(xn,d,"TestLoadImage: error",!1,c,v),v.onabort=p(xn,d,"TestLoadImage: abort",!1,c,v),v.ontimeout=p(xn,d,"TestLoadImage: timeout",!1,c,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else c(!1)}function a1(a,c){const d=new qi,v=new AbortController,N=setTimeout(()=>{v.abort(),xn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:v.signal}).then(D=>{clearTimeout(N),D.ok?xn(d,"TestPingServer: ok",!0,c):xn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),xn(d,"TestPingServer: error",!1,c)})}function xn(a,c,d,v,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),v(d)}catch{}}function l1(){this.g=new H0}function su(a){this.i=a.Sb||null,this.h=a.ab||!1}m(su,rf),su.prototype.g=function(){return new ko(this.i,this.h)};function ko(a,c){Ke.call(this),this.H=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(ko,Ke),t=ko.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=c,this.readyState=1,ts(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(c.body=a),(this.H||o).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,es(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ts(this)),this.g&&(this.readyState=3,ts(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?es(this):ts(this),this.readyState==3&&Pf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,es(this))},t.Na=function(a){this.g&&(this.response=a,es(this))},t.ga=function(){this.g&&es(this)};function es(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ts(a)}t.setRequestHeader=function(a,c){this.A.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=c.next();return a.join(`\r
`)};function ts(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ko.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function kf(a){let c="";return $(a,function(d,v){c+=v,c+=":",c+=d,c+=`\r
`}),c}function ou(a,c,d){e:{for(v in d){var v=!1;break e}v=!0}v||(d=kf(d),typeof a=="string"?d!=null&&Gi(d):fe(a,c,d))}function Te(a){Ke.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Te,Ke);var u1=/^https?$/i,c1=["POST","PUT"];t=Te.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,c,d,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hf.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(D){bf(this,D);return}if(a=d||"",d=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var N in v)d.set(N,v[N]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const D of v.keys())d.set(D,v.get(D));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),N=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(c1,c,void 0)>=0)||v||N||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,B]of d)this.g.setRequestHeader(D,B);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){bf(this,D)}};function bf(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.o=5,Nf(a),bo(a)}function Nf(a){a.A||(a.A=!0,it(a,"complete"),it(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,it(this,"complete"),it(this,"abort"),bo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bo(this,!0)),Te.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Vf(this):this.Xa())},t.Xa=function(){Vf(this)};function Vf(a){if(a.h&&typeof s<"u"){if(a.v&&Sn(a)==4)setTimeout(a.Ca.bind(a),0);else if(it(a,"readystatechange"),Sn(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var v;if(v=D===0){let B=String(a.D).match(Tf)[1]||null;!B&&o.self&&o.self.location&&(B=o.self.location.protocol.slice(0,-1)),v=!u1.test(B?B.toLowerCase():"")}d=v}if(d)it(a,"complete"),it(a,"success");else{a.o=6;try{var N=Sn(a)>2?a.g.statusText:""}catch{N=""}a.l=N+" ["+a.ca()+"]",Nf(a)}}finally{bo(a)}}}}function bo(a,c){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,c||it(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Sn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Sn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),$0(c)}};function Df(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function h1(a){const c={};a=(a.g&&Sn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(S(a[v]))continue;var d=K0(a[v]);const N=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const D=c[N]||[];c[N]=D,D.push(d)}K(c,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ns(a,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||c}function jf(a){this.za=0,this.i=[],this.j=new qi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ns("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ns("baseRetryDelayMs",5e3,a),this.Za=ns("retryDelaySeedMs",1e4,a),this.Ta=ns("forwardChannelMaxRetries",2,a),this.va=ns("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new yf(a&&a.concurrentRequestLimit),this.Ba=new l1,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=jf.prototype,t.ka=8,t.I=1,t.connect=function(a,c,d,v){st(0),this.W=a,this.H=c||{},d&&v!==void 0&&(this.H.OSID=d,this.H.OAID=v),this.F=this.X,this.J=Hf(this,null,this.W),Vo(this)};function au(a){if(Of(a),a.I==3){var c=a.V++,d=Wt(a.J);if(fe(d,"SID",a.M),fe(d,"RID",c),fe(d,"TYPE","terminate"),rs(a,d),c=new En(a,a.j,c),c.M=2,c.A=Po(Wt(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(c.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=c.A,d=!0),d||(c.g=Wf(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Ro(c)}$f(a)}function No(a){a.g&&(uu(a),a.g.cancel(),a.g=null)}function Of(a){No(a),a.v&&(o.clearTimeout(a.v),a.v=null),Do(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Vo(a){if(!vf(a.h)&&!a.m){a.m=!0;var c=a.Ea;M||y(),F||(M(),F=!0),E.add(c,a),a.D=0}}function d1(a,c){return _f(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=c.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Wi(h(a.Ea,a,c),Bf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const N=new En(this,this.j,a);let D=this.o;if(this.U&&(D?(D=ee(D),Re(D,this.U)):D=this.U),this.u!==null||this.R||(N.J=D,D=null),this.S)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var v=this.i[d];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(c+=v,c>4096){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Mf(this,N,c),d=Wt(this.J),fe(d,"RID",a),fe(d,"CVER",22),this.G&&fe(d,"X-HTTP-Session-Id",this.G),rs(this,d),D&&(this.R?c="headers="+Gi(kf(D))+"&"+c:this.u&&ou(d,this.u,D)),ru(this.h,N),this.Ra&&fe(d,"TYPE","init"),this.S?(fe(d,"$req",c),fe(d,"SID","null"),N.U=!0,Zl(N,d,null)):Zl(N,d,c),this.I=2}}else this.I==3&&(a?Lf(this,a):this.i.length==0||vf(this.h)||Lf(this))};function Lf(a,c){var d;c?d=c.l:d=a.V++;const v=Wt(a.J);fe(v,"SID",a.M),fe(v,"RID",d),fe(v,"AID",a.K),rs(a,v),a.u&&a.o&&ou(v,a.u,a.o),d=new En(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),c&&(a.i=c.G.concat(a.i)),c=Mf(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),ru(a.h,d),Zl(d,v,c)}function rs(a,c){a.H&&$(a.H,function(d,v){fe(c,v,d)}),a.l&&$({},function(d,v){fe(c,v,d)})}function Mf(a,c,d){d=Math.min(a.i.length,d);const v=a.l?h(a.l.Ka,a.l,a):null;e:{var N=a.i;let J=-1;for(;;){const De=["count="+d];J==-1?d>0?(J=N[0].g,De.push("ofs="+J)):J=0:De.push("ofs="+J);let ue=!0;for(let Fe=0;Fe<d;Fe++){var D=N[Fe].g;const qt=N[Fe].map;if(D-=J,D<0)J=Math.max(0,N[Fe].g-100),ue=!1;else try{D="req"+D+"_"||"";try{var B=qt instanceof Map?qt:Object.entries(qt);for(const[gr,In]of B){let An=In;l(In)&&(An=Ql(In)),De.push(D+gr+"="+encodeURIComponent(An))}}catch(gr){throw De.push(D+"type="+encodeURIComponent("_badmap")),gr}}catch{v&&v(qt)}}if(ue){B=De.join("&");break e}}B=void 0}return a=a.i.splice(0,d),c.G=a,B}function Ff(a){if(!a.g&&!a.v){a.Y=1;var c=a.Da;M||y(),F||(M(),F=!0),E.add(c,a),a.A=0}}function lu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Wi(h(a.Da,a),Bf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,zf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Wi(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,st(10),No(this),zf(this))};function uu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function zf(a){a.g=new En(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var c=Wt(a.na);fe(c,"RID","rpc"),fe(c,"SID",a.M),fe(c,"AID",a.K),fe(c,"CI",a.F?"0":"1"),!a.F&&a.ia&&fe(c,"TO",a.ia),fe(c,"TYPE","xmlhttp"),rs(a,c),a.u&&a.o&&ou(c,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=Po(Wt(c)),d.u=null,d.R=!0,pf(d,a)}t.Va=function(){this.C!=null&&(this.C=null,No(this),lu(this),st(19))};function Do(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Uf(a,c){var d=null;if(a.g==c){Do(a),uu(a),a.g=null;var v=2}else if(nu(a.h,c))d=c.G,wf(a.h,c),v=1;else return;if(a.I!=0){if(c.o)if(v==1){d=c.u?c.u.length:0,c=Date.now()-c.F;var N=a.D;v=Ao(),it(v,new uf(v,d)),Vo(a)}else Ff(a);else if(N=c.m,N==3||N==0&&c.X>0||!(v==1&&d1(a,c)||v==2&&lu(a)))switch(d&&d.length>0&&(c=a.h,c.i=c.i.concat(d)),N){case 1:mr(a,5);break;case 4:mr(a,10);break;case 3:mr(a,6);break;default:mr(a,2)}}}function Bf(a,c){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*c}function mr(a,c){if(a.j.info("Error code "+c),c==2){var d=h(a.bb,a),v=a.Ua;const N=!v;v=new Tn(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ki(v,"https"),Po(v),N?o1(v.toString(),d):a1(v.toString(),d)}else st(2);a.I=0,a.l&&a.l.pa(c),$f(a),Of(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function $f(a){if(a.I=0,a.ja=[],a.l){const c=Ef(a.h);(c.length!=0||a.i.length!=0)&&(k(a.ja,c),k(a.ja,a.i),a.h.i.length=0,A(a.i),a.i.length=0),a.l.oa()}}function Hf(a,c,d){var v=d instanceof Tn?Wt(d):new Tn(d);if(v.g!="")c&&(v.g=c+"."+v.g),Yi(v,v.u);else{var N=o.location;v=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;const D=new Tn(null);v&&Ki(D,v),c&&(D.g=c),N&&Yi(D,N),d&&(D.h=d),v=D}return d=a.G,c=a.wa,d&&c&&fe(v,d,c),fe(v,"VER",a.ka),rs(a,v),v}function Wf(a,c,d){if(c&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Aa&&!a.ma?new Te(new su({ab:d})):new Te(a.ma),c.Fa(a.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qf(){}t=qf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function jo(){}jo.prototype.g=function(a,c){return new yt(a,c)};function yt(a,c){Ke.call(this),this.g=new jf(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(a?a["X-WebChannel-Client-Profile"]=c.sa:a={"X-WebChannel-Client-Profile":c.sa}),this.g.U=a,(a=c&&c.Qb)&&!S(a)&&(this.g.u=a),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!S(c)&&(this.g.G=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Hr(this)}m(yt,Ke),yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yt.prototype.close=function(){au(this.g)},yt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=Ql(a),a=d);c.i.push(new J0(c.Ya++,a)),c.I==3&&Vo(c)},yt.prototype.N=function(){this.g.l=null,delete this.j,au(this.g),delete this.g,yt.Z.N.call(this)};function Gf(a){Kl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const d in c){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}m(Gf,Kl);function Qf(){Yl.call(this),this.status=1}m(Qf,Yl);function Hr(a){this.g=a}m(Hr,qf),Hr.prototype.ra=function(){it(this.g,"a")},Hr.prototype.qa=function(a){it(this.g,new Gf(a))},Hr.prototype.pa=function(a){it(this.g,new Qf)},Hr.prototype.oa=function(){it(this.g,"b")},jo.prototype.createWebChannel=jo.prototype.g,yt.prototype.send=yt.prototype.o,yt.prototype.open=yt.prototype.m,yt.prototype.close=yt.prototype.close,d_=function(){return new jo},h_=function(){return Ao()},c_=dr,Kc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Co.NO_ERROR=0,Co.TIMEOUT=8,Co.HTTP_ERROR=6,_a=Co,cf.COMPLETE="complete",u_=cf,sf.EventType=$i,$i.OPEN="a",$i.CLOSE="b",$i.ERROR="c",$i.MESSAGE="d",Ke.prototype.listen=Ke.prototype.J,ys=sf,Te.prototype.listenOnce=Te.prototype.K,Te.prototype.getLastError=Te.prototype.Ha,Te.prototype.getLastErrorCode=Te.prototype.ya,Te.prototype.getStatus=Te.prototype.ca,Te.prototype.getResponseJson=Te.prototype.La,Te.prototype.getResponseText=Te.prototype.la,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Fa,l_=Te}).apply(typeof ea<"u"?ea:typeof self<"u"?self:typeof window<"u"?window:{});const Am="@firebase/firestore",Cm="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oi="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new t_("@firebase/firestore");function qr(){return Dr.logLevel}function W(t,...e){if(Dr.logLevel<=ie.DEBUG){const n=e.map(md);Dr.debug(`Firestore (${Oi}): ${t}`,...n)}}function vn(t,...e){if(Dr.logLevel<=ie.ERROR){const n=e.map(md);Dr.error(`Firestore (${Oi}): ${t}`,...n)}}function Si(t,...e){if(Dr.logLevel<=ie.WARN){const n=e.map(md);Dr.warn(`Firestore (${Oi}): ${t}`,...n)}}function md(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,f_(t,r,n)}function f_(t,e,n){let r=`FIRESTORE (${Oi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vn(r),new Error(r)}function ae(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||f_(e,i,r)}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends ji{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ze.UNAUTHENTICATED))}shutdown(){}}class OS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LS{constructor(e){this.t=e,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ae(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ar,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ar)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string",31837,{l:r}),new p_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string",2055,{h:e}),new Ze(e)}}class MS{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FS{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new MS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wS(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ae(this.o===void 0,3512);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Rm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Rm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=US(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function te(t,e){return t<e?-1:t>e?1:0}function Yc(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Bu(i)===Bu(s)?te(i,s):Bu(i)?1:-1}return te(t.length,e.length)}const BS=55296,$S=57343;function Bu(t){const e=t.charCodeAt(0);return e>=BS&&e<=$S}function Ii(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="__name__";class Kt{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Kt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kt?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Kt.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return te(e.length,n.length)}static compareSegments(e,n){const r=Kt.isNumericId(e),i=Kt.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Kt.extractNumericId(e).compare(Kt.extractNumericId(n)):Yc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gn.fromString(e.substring(4,e.length-2))}}class ce extends Kt{construct(e,n,r){return new ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ce(n)}static emptyPath(){return new ce([])}}const HS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class We extends Kt{construct(e,n,r){return new We(e,n,r)}static isValidIdentifier(e){return HS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),We.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Pm}static keyField(){return new We([Pm])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new H(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new H(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new We(n)}static emptyPath(){return new We([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(ce.fromString(e))}static fromName(e){return new G(ce.fromString(e).popFirst(5))}static empty(){return new G(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new ce(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(t,e,n){if(!n)throw new H(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WS(t,e,n,r){if(e===!0&&r===!0)throw new H(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function km(t){if(!G.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bm(t){if(G.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function g_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function Cr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pl(t);throw new H(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t,e){const n={typeString:t};return e&&(n.value=e),n}function yo(t,e){if(!g_(t))throw new H(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new H(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm=-62135596800,Vm=1e6;class me{static now(){return me.fromMillis(Date.now())}static fromDate(e){return me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Vm);return new me(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Nm)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vm}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yo(e,me._jsonSchema))return new me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Nm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}me._jsonSchemaVersion="firestore/timestamp/1.0",me._jsonSchema={type:Ne("string",me._jsonSchemaVersion),seconds:Ne("number"),nanoseconds:Ne("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{static fromTimestamp(e){return new Y(e)}static min(){return new Y(new me(0,0))}static max(){return new Y(new me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=-1;function qS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new me(n+1,0):new me(n,r));return new Xn(i,G.empty(),e)}function GS(t){return new Xn(t.readTime,t.key,no)}class Xn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xn(Y.min(),G.empty(),no)}static max(){return new Xn(Y.max(),G.empty(),no)}}function QS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Li(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==KS)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++l,l===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function XS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=-1;function bl(t){return t==null}function el(t){return t===0&&1/t==-1/0}function JS(t){return typeof t=="number"&&Number.isInteger(t)&&!el(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="";function ZS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Dm(e)),e=eI(t.get(n),e);return Dm(e)}function eI(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case y_:n+="";break;default:n+=s}}return n}function Dm(t){return t+y_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ur(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function v_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,n){this.comparator=e,this.root=n||He.EMPTY}insert(e,n){return new Ee(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,He.BLACK,null,null))}remove(e){return new Ee(this.comparator,this.root.remove(e,this.comparator).copy(null,null,He.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ta(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ta(this.root,e,this.comparator,!1)}getReverseIterator(){return new ta(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ta(this.root,e,this.comparator,!0)}}class ta{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class He{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??He.RED,this.left=i??He.EMPTY,this.right=s??He.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new He(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return He.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return He.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,He.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,He.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}He.EMPTY=null,He.RED=!0,He.BLACK=!1;He.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new He(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Om(this.data.getIterator())}getIteratorFrom(e){return new Om(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Le)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Le(this.comparator);return n.data=e,n}}class Om{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new wt([])}unionWith(e){let n=new Le(We.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ii(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new __("Invalid base64 string: "+s):s}}(e);return new Qe(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Qe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const tI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jn(t){if(ae(!!t,39018),typeof t=="string"){let e=0;const n=tI.exec(t);if(ae(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zn(t){return typeof t=="string"?Qe.fromBase64String(t):Qe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="server_timestamp",E_="__type__",T_="__previous_value__",x_="__local_write_time__";function vd(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[E_])==null?void 0:r.stringValue)===w_}function Nl(t){const e=t.mapValue.fields[T_];return vd(e)?Nl(e):e}function ro(t){const e=Jn(t.mapValue.fields[x_].timestampValue);return new me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n,r,i,s,o,l,u,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p}}const tl="(default)";class io{constructor(e,n){this.projectId=e,this.database=n||tl}static empty(){return new io("","")}get isDefaultDatabase(){return this.database===tl}isEqual(e){return e instanceof io&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="__type__",rI="__max__",na={mapValue:{}},I_="__vector__",nl="value";function er(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vd(t)?4:sI(t)?9007199254740991:iI(t)?10:11:Q(28295,{value:t})}function on(t,e){if(t===e)return!0;const n=er(t);if(n!==er(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ro(t).isEqual(ro(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Jn(i.timestampValue),l=Jn(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Zn(i.bytesValue).isEqual(Zn(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Se(i.geoPointValue.latitude)===Se(s.geoPointValue.latitude)&&Se(i.geoPointValue.longitude)===Se(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Se(i.integerValue)===Se(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Se(i.doubleValue),l=Se(s.doubleValue);return o===l?el(o)===el(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ii(t.arrayValue.values||[],e.arrayValue.values||[],on);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(jm(o)!==jm(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!on(o[u],l[u])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function so(t,e){return(t.values||[]).find(n=>on(n,e))!==void 0}function Ai(t,e){if(t===e)return 0;const n=er(t),r=er(e);if(n!==r)return te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return te(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Se(s.integerValue||s.doubleValue),u=Se(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Lm(t.timestampValue,e.timestampValue);case 4:return Lm(ro(t),ro(e));case 5:return Yc(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Zn(s),u=Zn(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=te(l[h],u[h]);if(p!==0)return p}return te(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=te(Se(s.latitude),Se(o.latitude));return l!==0?l:te(Se(s.longitude),Se(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Mm(t.arrayValue,e.arrayValue);case 10:return function(s,o){var g,A,k,b;const l=s.fields||{},u=o.fields||{},h=(g=l[nl])==null?void 0:g.arrayValue,p=(A=u[nl])==null?void 0:A.arrayValue,m=te(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((b=p==null?void 0:p.values)==null?void 0:b.length)||0);return m!==0?m:Mm(h,p)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===na.mapValue&&o===na.mapValue)return 0;if(s===na.mapValue)return 1;if(o===na.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=Yc(u[m],p[m]);if(g!==0)return g;const A=Ai(l[u[m]],h[p[m]]);if(A!==0)return A}return te(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{he:n})}}function Lm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return te(t,e);const n=Jn(t),r=Jn(e),i=te(n.seconds,r.seconds);return i!==0?i:te(n.nanos,r.nanos)}function Mm(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ai(n[i],r[i]);if(s)return s}return te(n.length,r.length)}function Ci(t){return Xc(t)}function Xc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Xc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Xc(n.fields[o])}`;return i+"}"}(t.mapValue):Q(61005,{value:t})}function wa(t){switch(er(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nl(t);return e?16+wa(e):16;case 5:return 2*t.stringValue.length;case 6:return Zn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+wa(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ur(r.fields,(s,o)=>{i+=s.length+wa(o)}),i}(t.mapValue);default:throw Q(13486,{value:t})}}function Fm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jc(t){return!!t&&"integerValue"in t}function _d(t){return!!t&&"arrayValue"in t}function zm(t){return!!t&&"nullValue"in t}function Um(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ea(t){return!!t&&"mapValue"in t}function iI(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[S_])==null?void 0:r.stringValue)===I_}function bs(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ur(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bs(t.arrayValue.values[n]);return e}return{...t}}function sI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===rI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.value=e}static empty(){return new dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ea(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bs(n)}setAll(e){let n=We.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=bs(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ea(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return on(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ea(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ur(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new dt(bs(this.value))}}function A_(t){const e=[];return ur(t.fields,(n,r)=>{const i=new We([n]);if(Ea(r)){const s=A_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new wt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new tt(e,0,Y.min(),Y.min(),Y.min(),dt.empty(),0)}static newFoundDocument(e,n,r,i){return new tt(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new tt(e,2,n,Y.min(),Y.min(),dt.empty(),0)}static newUnknownDocument(e,n){return new tt(e,3,n,Y.min(),Y.min(),dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n){this.position=e,this.inclusive=n}}function Bm(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Ai(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function $m(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!on(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n="asc"){this.field=e,this.dir=n}}function oI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{}class be extends C_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lI(e,n,r):n==="array-contains"?new hI(e,r):n==="in"?new dI(e,r):n==="not-in"?new fI(e,r):n==="array-contains-any"?new pI(e,r):new be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uI(e,r):new cI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ai(n,this.value)):n!==null&&er(this.value)===er(n)&&this.matchesComparison(Ai(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends C_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ht(e,n)}matches(e){return R_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function R_(t){return t.op==="and"}function P_(t){return aI(t)&&R_(t)}function aI(t){for(const e of t.filters)if(e instanceof Ht)return!1;return!0}function Zc(t){if(t instanceof be)return t.field.canonicalString()+t.op.toString()+Ci(t.value);if(P_(t))return t.filters.map(e=>Zc(e)).join(",");{const e=t.filters.map(n=>Zc(n)).join(",");return`${t.op}(${e})`}}function k_(t,e){return t instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.field.isEqual(i.field)&&on(r.value,i.value)}(t,e):t instanceof Ht?function(r,i){return i instanceof Ht&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&k_(o,i.filters[l]),!0):!1}(t,e):void Q(19439)}function b_(t){return t instanceof be?function(n){return`${n.field.canonicalString()} ${n.op} ${Ci(n.value)}`}(t):t instanceof Ht?function(n){return n.op.toString()+" {"+n.getFilters().map(b_).join(" ,")+"}"}(t):"Filter"}class lI extends be{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class uI extends be{constructor(e,n){super(e,"in",n),this.keys=N_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cI extends be{constructor(e,n){super(e,"not-in",n),this.keys=N_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function N_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class hI extends be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _d(n)&&so(n.arrayValue,this.value)}}class dI extends be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&so(this.value.arrayValue,n)}}class fI extends be{constructor(e,n){super(e,"not-in",n)}matches(e){if(so(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!so(this.value.arrayValue,n)}}class pI extends be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_d(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>so(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function Hm(t,e=null,n=[],r=[],i=null,s=null,o=null){return new mI(t,e,n,r,i,s,o)}function wd(t){const e=X(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ci(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ci(r)).join(",")),e.Te=n}return e.Te}function Ed(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!k_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$m(t.startAt,e.startAt)&&$m(t.endAt,e.endAt)}function eh(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gI(t,e,n,r,i,s,o,l){return new Fi(t,e,n,r,i,s,o,l)}function Td(t){return new Fi(t)}function Wm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function V_(t){return t.collectionGroup!==null}function Ns(t){const e=X(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Le(We.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new oo(s,r))}),n.has(We.keyField().canonicalString())||e.Ie.push(new oo(We.keyField(),r))}return e.Ie}function Zt(t){const e=X(t);return e.Ee||(e.Ee=yI(e,Ns(t))),e.Ee}function yI(t,e){if(t.limitType==="F")return Hm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new oo(i.field,s)});const n=t.endAt?new rl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rl(t.startAt.position,t.startAt.inclusive):null;return Hm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function th(t,e){const n=t.filters.concat([e]);return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nh(t,e,n){return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vl(t,e){return Ed(Zt(t),Zt(e))&&t.limitType===e.limitType}function D_(t){return`${wd(Zt(t))}|lt:${t.limitType}`}function Gr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>b_(i)).join(", ")}]`),bl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ci(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ci(i)).join(",")),`Target(${r})`}(Zt(t))}; limitType=${t.limitType})`}function Dl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ns(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=Bm(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Ns(r),i)||r.endAt&&!function(o,l,u){const h=Bm(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Ns(r),i))}(t,e)}function vI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function j_(t){return(e,n)=>{let r=!1;for(const i of Ns(t)){const s=_I(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _I(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ai(u,h):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ur(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return v_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new Ee(G.comparator);function _n(){return wI}const O_=new Ee(G.comparator);function vs(...t){let e=O_;for(const n of t)e=e.insert(n.key,n);return e}function L_(t){let e=O_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xr(){return Vs()}function M_(){return Vs()}function Vs(){return new Mr(t=>t.toString(),(t,e)=>t.isEqual(e))}const EI=new Ee(G.comparator),TI=new Le(G.comparator);function ne(...t){let e=TI;for(const n of t)e=e.add(n);return e}const xI=new Le(te);function SI(){return xI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:el(e)?"-0":e}}function F_(t){return{integerValue:""+t}}function II(t,e){return JS(e)?F_(e):xd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this._=void 0}}function AI(t,e,n){return t instanceof il?function(i,s){const o={fields:{[E_]:{stringValue:w_},[x_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&vd(s)&&(s=Nl(s)),s&&(o.fields[T_]=s),{mapValue:o}}(n,e):t instanceof ao?U_(t,e):t instanceof lo?B_(t,e):function(i,s){const o=z_(i,s),l=qm(o)+qm(i.Ae);return Jc(o)&&Jc(i.Ae)?F_(l):xd(i.serializer,l)}(t,e)}function CI(t,e,n){return t instanceof ao?U_(t,e):t instanceof lo?B_(t,e):n}function z_(t,e){return t instanceof sl?function(r){return Jc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class il extends jl{}class ao extends jl{constructor(e){super(),this.elements=e}}function U_(t,e){const n=$_(e);for(const r of t.elements)n.some(i=>on(i,r))||n.push(r);return{arrayValue:{values:n}}}class lo extends jl{constructor(e){super(),this.elements=e}}function B_(t,e){let n=$_(e);for(const r of t.elements)n=n.filter(i=>!on(i,r));return{arrayValue:{values:n}}}class sl extends jl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function qm(t){return Se(t.integerValue||t.doubleValue)}function $_(t){return _d(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function RI(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ao&&i instanceof ao||r instanceof lo&&i instanceof lo?Ii(r.elements,i.elements,on):r instanceof sl&&i instanceof sl?on(r.Ae,i.Ae):r instanceof il&&i instanceof il}(t.transform,e.transform)}class PI{constructor(e,n){this.version=e,this.transformResults=n}}class en{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ta(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ol{}function H_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new q_(t.key,en.none()):new vo(t.key,t.data,en.none());{const n=t.data,r=dt.empty();let i=new Le(We.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new cr(t.key,r,new wt(i.toArray()),en.none())}}function kI(t,e,n){t instanceof vo?function(i,s,o){const l=i.value.clone(),u=Qm(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof cr?function(i,s,o){if(!Ta(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Qm(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(W_(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ds(t,e,n,r){return t instanceof vo?function(s,o,l,u){if(!Ta(s.precondition,o))return l;const h=s.value.clone(),p=Km(s.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof cr?function(s,o,l,u){if(!Ta(s.precondition,o))return l;const h=Km(s.fieldTransforms,u,o),p=o.data;return p.setAll(W_(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return Ta(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function bI(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=z_(r.transform,i||null);s!=null&&(n===null&&(n=dt.empty()),n.set(r.field,s))}return n||null}function Gm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ii(r,i,(s,o)=>RI(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vo extends Ol{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class cr extends Ol{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function W_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Qm(t,e,n){const r=new Map;ae(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,CI(o,l,n[i]))}return r}function Km(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,AI(s,o,e))}return r}class q_ extends Ol{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NI extends Ol{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&kI(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ds(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ds(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=M_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=H_(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&Ii(this.mutations,e.mutations,(n,r)=>Gm(n,r))&&Ii(this.baseMutations,e.baseMutations,(n,r)=>Gm(n,r))}}class Sd{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return EI}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Sd(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe,re;function OI(t){switch(t){case j.OK:return Q(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function G_(t){if(t===void 0)return vn("GRPC error has no .code"),j.UNKNOWN;switch(t){case Pe.OK:return j.OK;case Pe.CANCELLED:return j.CANCELLED;case Pe.UNKNOWN:return j.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return j.INTERNAL;case Pe.UNAVAILABLE:return j.UNAVAILABLE;case Pe.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Pe.NOT_FOUND:return j.NOT_FOUND;case Pe.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Pe.ABORTED:return j.ABORTED;case Pe.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Pe.DATA_LOSS:return j.DATA_LOSS;default:return Q(39323,{code:t})}}(re=Pe||(Pe={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=new Gn([4294967295,4294967295],0);function Ym(t){const e=LI().encode(t),n=new a_;return n.update(e),new Uint8Array(n.digest())}function Xm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Gn([n,r],0),new Gn([i,s],0)]}class Id{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _s(`Invalid padding: ${n}`);if(r<0)throw new _s(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _s(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _s(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Gn.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Gn.fromNumber(r)));return i.compare(MI)===1&&(i=new Gn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ym(e),[r,i]=Xm(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Id(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Ym(e),[r,i]=Xm(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _s extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,_o.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ll(Y.min(),i,new Ee(te),_n(),ne())}}class _o{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _o(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Q_{constructor(e,n){this.targetId=e,this.Ce=n}}class K_{constructor(e,n,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Jm{constructor(){this.ve=0,this.Fe=Zm(),this.Me=Qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ne(),n=ne(),r=ne();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:s})}}),new _o(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Zm()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class FI{constructor(e){this.Ge=e,this.ze=new Map,this.je=_n(),this.Je=ra(),this.He=ra(),this.Ye=new Ee(te)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(eh(s))if(r===0){const o=new G(s.path);this.et(n,o,tt.newNoDocument(o,Y.min()))}else ae(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Zn(r).toUint8Array()}catch(u){if(u instanceof __)return Si("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Id(o,i,s)}catch(u){return Si(u instanceof _s?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&eh(l.target)){const u=new G(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,tt.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=ne();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Ll(e,n,this.Ye,this.je,r);return this.je=_n(),this.Je=ra(),this.He=ra(),this.Ye=new Ee(te),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Jm,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Le(te),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Le(te),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Jm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ra(){return new Ee(G.comparator)}function Zm(){return new Ee(G.comparator)}const zI={asc:"ASCENDING",desc:"DESCENDING"},UI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BI={and:"AND",or:"OR"};class $I{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rh(t,e){return t.useProto3Json||bl(e)?e:{value:e}}function ol(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Y_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HI(t,e){return ol(t,e.toTimestamp())}function tn(t){return ae(!!t,49232),Y.fromTimestamp(function(n){const r=Jn(n);return new me(r.seconds,r.nanos)}(t))}function Ad(t,e){return ih(t,e).canonicalString()}function ih(t,e){const n=function(i){return new ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function X_(t){const e=ce.fromString(t);return ae(n0(e),10190,{key:e.toString()}),e}function sh(t,e){return Ad(t.databaseId,e.path)}function $u(t,e){const n=X_(e);if(n.get(1)!==t.databaseId.projectId)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(Z_(n))}function J_(t,e){return Ad(t.databaseId,e)}function WI(t){const e=X_(t);return e.length===4?ce.emptyPath():Z_(e)}function oh(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Z_(t){return ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function eg(t,e,n){return{name:sh(t,e),fields:n.value.mapValue.fields}}function qI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Q(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(ae(p===void 0||typeof p=="string",58123),Qe.fromBase64String(p||"")):(ae(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Qe.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?j.UNKNOWN:G_(h.code);return new H(p,h.message||"")}(o);n=new K_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=$u(t,r.document.name),s=tn(r.document.updateTime),o=r.document.createTime?tn(r.document.createTime):Y.min(),l=new dt({mapValue:{fields:r.document.fields}}),u=tt.newFoundDocument(i,s,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new xa(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=$u(t,r.document),s=r.readTime?tn(r.readTime):Y.min(),o=tt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new xa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=$u(t,r.document),s=r.removedTargetIds||[];n=new xa([],s,i,null)}else{if(!("filter"in e))return Q(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new jI(i,s),l=r.targetId;n=new Q_(l,o)}}return n}function GI(t,e){let n;if(e instanceof vo)n={update:eg(t,e.key,e.value)};else if(e instanceof q_)n={delete:sh(t,e.key)};else if(e instanceof cr)n={update:eg(t,e.key,e.data),updateMask:n2(e.fieldMask)};else{if(!(e instanceof NI))return Q(16599,{Vt:e.type});n={verify:sh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof il)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ao)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof lo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sl)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Q(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:HI(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q(27497)}(t,e.precondition)),n}function QI(t,e){return t&&t.length>0?(ae(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?tn(i.updateTime):tn(s);return o.isEqual(Y.min())&&(o=tn(s)),new PI(o,i.transformResults||[])}(n,e))):[]}function KI(t,e){return{documents:[J_(t,e.path)]}}function YI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=J_(t,i);const s=function(h){if(h.length!==0)return t0(Ht.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(p=>function(g){return{field:Qr(g.field),direction:ZI(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=rh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function XI(t){let e=WI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ae(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const g=e0(m);return g instanceof Ht&&P_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(k){return new oo(Kr(k.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,bl(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,A=m.values||[];return new rl(A,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,A=m.values||[];return new rl(A,g)}(n.endAt)),gI(e,i,o,s,l,"F",u,h)}function JI(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function e0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Kr(n.unaryFilter.field);return be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Kr(n.unaryFilter.field);return be.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Kr(n.unaryFilter.field);return be.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Kr(n.unaryFilter.field);return be.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return be.create(Kr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ht.create(n.compositeFilter.filters.map(r=>e0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function ZI(t){return zI[t]}function e2(t){return UI[t]}function t2(t){return BI[t]}function Qr(t){return{fieldPath:t.canonicalString()}}function Kr(t){return We.fromServerFormat(t.fieldPath)}function t0(t){return t instanceof be?function(n){if(n.op==="=="){if(Um(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NAN"}};if(zm(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Um(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NOT_NAN"}};if(zm(n.value))return{unaryFilter:{field:Qr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qr(n.field),op:e2(n.op),value:n.value}}}(t):t instanceof Ht?function(n){const r=n.getFilters().map(i=>t0(i));return r.length===1?r[0]:{compositeFilter:{op:t2(n.op),filters:r}}}(t):Q(54877,{filter:t})}function n2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function n0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n,r,i,s=Y.min(),o=Y.min(),l=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new jn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.yt=e}}function i2(t){const e=XI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.Cn=new o2}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Xn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Xn.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class o2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Le(ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Le(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},r0=41943040;class ct{static withCacheSize(e){return new ct(e,ct.DEFAULT_COLLECTION_PERCENTILE,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ct.DEFAULT_COLLECTION_PERCENTILE=10,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ct.DEFAULT=new ct(r0,ct.DEFAULT_COLLECTION_PERCENTILE,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ct.DISABLED=new ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ri(0)}static cr(){return new Ri(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="LruGarbageCollector",a2=1048576;function rg([t,e],[n,r]){const i=te(t,n);return i===0?te(e,r):i}class l2{constructor(e){this.Ir=e,this.buffer=new Le(rg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();rg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class u2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(ng,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mi(n)?W(ng,"Ignoring IndexedDB error during garbage collection: ",n):await Li(n)}await this.Vr(3e5)})}}class c2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(kl.ce);const r=new l2(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(tg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),qr()<=ie.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function h2(t,e){return new c2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.changes=new Mr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ds(r.mutation,i,wt.empty(),me.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const i=xr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=vs();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=xr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=_n();const o=Vs(),l=function(){return Vs()}();return n.forEach((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof cr)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Ds(p.mutation,h,p.mutation.getFieldMask(),me.now())):o.set(h.key,wt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>l.set(h,new f2(p,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Vs();let i=new Ee((o,l)=>o-l),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||wt.empty();p=l.applyToLocalView(h,p),r.set(u,p);const m=(i.get(l.batchId)||ne()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,m=M_();p.forEach(g=>{if(!s.has(g)){const A=H_(n.get(g),r.get(g));A!==null&&m.set(g,A),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):V_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(xr());let l=no,u=s;return o.next(h=>O.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(p)?O.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ne())).next(p=>({batchId:l,changes:L_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=vs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=vs();return this.indexManager.getCollectionParents(e,s).next(l=>O.forEach(l,u=>{const h=function(m,g){return new Fi(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,tt.newInvalidDocument(p)))});let l=vs();return o.forEach((u,h)=>{const p=s.get(u);p!==void 0&&Ds(p.mutation,h,wt.empty(),me.now()),Dl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return O.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:tn(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:i2(i.bundledQuery),readTime:tn(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.overlays=new Ee(G.comparator),this.qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xr();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=xr(),s=n.length+1,o=new G(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ee((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=xr(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=xr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return O.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DI(n,r));let s=this.qr.get(n);s===void 0&&(s=ne(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(){this.Qr=new Le(ze.$r),this.Ur=new Le(ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ze(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ze(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new G(new ce([])),r=new ze(n,e),i=new ze(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new G(new ce([])),r=new ze(n,e),i=new ze(n,e+1);let s=ne();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ze(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ze{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return G.comparator(e.key,n.key)||te(e.Yr,n.Yr)}static Kr(e,n){return te(e.Yr,n.Yr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Le(ze.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new VI(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new ze(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?yd:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ze(n,0),i=new ze(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(te);return n.forEach(i=>{const s=new ze(i,0),o=new ze(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),O.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new ze(new G(s),0);let l=new Le(te);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Yr)),!0)},o),O.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ae(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return O.forEach(n.mutations,i=>{const s=new ze(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new ze(n,0),i=this.Zr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.ri=e,this.docs=function(){return new Ee(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(n))}getEntries(e,n){let r=_n();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tt.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=_n();const o=n.path,l=new G(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||QS(GS(p),r)<=0||(i.has(p.key)||Dl(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q(9500)}ii(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new w2(this)}getSize(e){return O.resolve(this.size)}}class w2 extends d2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.persistence=e,this.si=new Mr(n=>wd(n),Ed),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.oi=0,this._i=new Cd,this.targetCount=0,this.ai=Ri.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),O.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ri(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Pr(n),O.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,n){this.ui={},this.overlays={},this.ci=new kl(0),this.li=!1,this.li=!0,this.hi=new y2,this.referenceDelegate=e(this),this.Pi=new E2(this),this.indexManager=new s2,this.remoteDocumentCache=function(i){return new _2(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new r2(n),this.Ii=new m2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new g2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new v2(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new T2(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return O.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class T2 extends YS{constructor(e){super(),this.currentSequenceNumber=e}}class Rd{constructor(e){this.persistence=e,this.Ri=new Cd,this.Vi=null}static mi(e){return new Rd(e)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,r=>{const i=G.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class al{constructor(e,n){this.persistence=e,this.pi=new Mr(r=>ZS(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=h2(this,n)}static mi(e,n){return new al(e,n)}Ei(){}di(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return O.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?O.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,Y.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wa(e.data.value)),n}br(e,n,r){return O.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ne(),i=ne();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Pd(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return yx()?8:XS(mx())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new x2;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(qr()<=ie.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Gr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(qr()<=ie.DEBUG&&W("QueryEngine","Query:",Gr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(qr()<=ie.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Gr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zt(n))):O.resolve())}ys(e,n){if(Wm(n))return O.resolve(null);let r=Zt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=nh(n,null,"F"),r=Zt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ne(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,o,u.readTime)?this.ys(e,nh(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,i){return Wm(n)||i.isEqual(Y.min())?O.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?O.resolve(null):(qr()<=ie.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gr(n)),this.vs(e,o,n,qS(i,no)).next(l=>l))})}Ds(e,n){let r=new Le(j_(e));return n.forEach((i,s)=>{Dl(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return qr()<=ie.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Gr(n)),this.ps.getDocumentsMatchingQuery(e,n,Xn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="LocalStore",I2=3e8;class A2{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ee(te),this.xs=new Mr(s=>wd(s),Ed),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new p2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function C2(t,e,n,r){return new A2(t,e,n,r)}async function s0(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ne();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function R2(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const m=h.batch,g=m.keys();let A=O.resolve();return g.forEach(k=>{A=A.next(()=>p.getEntry(u,k)).next(b=>{const R=h.docVersions.get(k);ae(R!==null,48541),b.version.compareTo(R)<0&&(m.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),p.addEntry(b)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ne();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function o0(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function P2(t,e){const n=X(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((p,m)=>{const g=i.get(m);if(!g)return;l.push(n.Pi.removeMatchingKeys(s,p.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(s,p.addedDocuments,m)));let A=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?A=A.withResumeToken(Qe.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):p.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(p.resumeToken,r)),i=i.insert(m,A),function(b,R,x){return b.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=I2?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,A,p)&&l.push(n.Pi.updateTargetData(s,A))});let u=_n(),h=ne();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(k2(s,o,e.documentUpdates).next(p=>{u=p.ks,h=p.qs})),!r.isEqual(Y.min())){const p=n.Pi.getLastRemoteSnapshotVersion(s).next(m=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(p)}return O.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=i,s))}function k2(t,e,n){let r=ne(),i=ne();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=_n();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W(kd,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:i}})}function b2(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=yd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function N2(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new jn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function ah(t,e,n){const r=X(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Mi(o))throw o;W(kd,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function ig(t,e,n){const r=X(t);let i=Y.min(),s=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const m=X(u),g=m.xs.get(p);return g!==void 0?O.resolve(m.Ms.get(g)):m.Pi.getTargetData(h,p)}(r,o,Zt(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:ne())).next(l=>(V2(r,vI(e),l),{documents:l,Qs:s})))}function V2(t,e,n){let r=t.Os.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class sg{constructor(){this.activeTargetIds=SI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class D2{constructor(){this.Mo=new sg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new sg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="ConnectivityMonitor";class ag{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(og,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){W(og,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ia=null;function lh(){return ia===null?ia=function(){return 268435456+Math.round(2147483648*Math.random())}():ia++,"0x"+ia.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu="RestConnection",O2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class L2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===tl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=lh(),l=this.zo(e,n.toUriEncodedString());W(Hu,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:h}=new URL(l),p=fd(h);return this.Jo(e,l,u,r,p).then(m=>(W(Hu,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Si(Hu,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=O2[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je="WebChannelConnection";class F2 extends L2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=lh();return new Promise((l,u)=>{const h=new l_;h.setWithCredentials(!0),h.listenOnce(u_.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case _a.NO_ERROR:const m=h.getResponseJson();W(Je,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case _a.TIMEOUT:W(Je,`RPC '${e}' ${o} timed out`),u(new H(j.DEADLINE_EXCEEDED,"Request time out"));break;case _a.HTTP_ERROR:const g=h.getStatus();if(W(Je,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let A=h.getResponseJson();Array.isArray(A)&&(A=A[0]);const k=A==null?void 0:A.error;if(k&&k.status&&k.message){const b=function(x){const _=x.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(_)>=0?_:j.UNKNOWN}(k.status);u(new H(b,k.message))}else u(new H(j.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new H(j.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{W(Je,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);W(Je,`RPC '${e}' ${o} sending request:`,i),h.send(n,"POST",p,r,15)})}T_(e,n,r){const i=lh(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=d_(),l=h_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=s.join("");W(Je,`Creating RPC '${e}' stream ${i}: ${p}`,u);const m=o.createWebChannel(p,u);this.I_(m);let g=!1,A=!1;const k=new M2({Yo:R=>{A?W(Je,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(W(Je,`Opening RPC '${e}' stream ${i} transport.`),m.open(),g=!0),W(Je,`RPC '${e}' stream ${i} sending:`,R),m.send(R))},Zo:()=>m.close()}),b=(R,x,_)=>{R.listen(x,w=>{try{_(w)}catch(V){setTimeout(()=>{throw V},0)}})};return b(m,ys.EventType.OPEN,()=>{A||(W(Je,`RPC '${e}' stream ${i} transport opened.`),k.o_())}),b(m,ys.EventType.CLOSE,()=>{A||(A=!0,W(Je,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(m))}),b(m,ys.EventType.ERROR,R=>{A||(A=!0,Si(Je,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),k.a_(new H(j.UNAVAILABLE,"The operation could not be completed")))}),b(m,ys.EventType.MESSAGE,R=>{var x;if(!A){const _=R.data[0];ae(!!_,16349);const w=_,V=(w==null?void 0:w.error)||((x=w[0])==null?void 0:x.error);if(V){W(Je,`RPC '${e}' stream ${i} received error:`,V);const M=V.status;let F=function(T){const I=Pe[T];if(I!==void 0)return G_(I)}(M),E=V.message;F===void 0&&(F=j.INTERNAL,E="Unknown error status: "+M+" with message "+V.message),A=!0,k.a_(new H(F,E)),m.close()}else W(Je,`RPC '${e}' stream ${i} received:`,_),k.u_(_)}}),b(l,c_.STAT_EVENT,R=>{R.stat===Kc.PROXY?W(Je,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Kc.NOPROXY&&W(Je,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Wu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){return new $I(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="PersistentStream";class l0{constructor(e,n,r,i,s,o,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new a0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(vn(n.toString()),vn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new H(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(lg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(W(lg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class z2 extends l0{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=qI(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?tn(o.readTime):Y.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=oh(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=eh(u)?{documents:KI(s,u)}:{query:YI(s,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Y_(s,o.resumeToken);const h=rh(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Y.min())>0){l.readTime=ol(s,o.snapshotVersion.toTimestamp());const h=rh(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=JI(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=oh(this.serializer),n.removeTarget=e,this.q_(n)}}class U2 extends l0{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=QI(e.writeResults,e.commitTime),r=tn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=oh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>GI(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{}class $2 extends B2{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,ih(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(j.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,ih(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class H2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vn(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="RemoteStore";class W2{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Fr(this)&&(W(jr,"Restarting streams for network reachability change."),await async function(u){const h=X(u);h.Ea.add(4),await wo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Fl(h)}(this))})}),this.Ra=new H2(r,i)}}async function Fl(t){if(Fr(t))for(const e of t.da)await e(!0)}async function wo(t){for(const e of t.da)await e(!1)}function u0(t,e){const n=X(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Dd(n)?Vd(n):zi(n).O_()&&Nd(n,e))}function bd(t,e){const n=X(t),r=zi(n);n.Ia.delete(e),r.O_()&&c0(n,e),n.Ia.size===0&&(r.O_()?r.L_():Fr(n)&&n.Ra.set("Unknown"))}function Nd(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zi(t).Y_(e)}function c0(t,e){t.Va.Ue(e),zi(t).Z_(e)}function Vd(t){t.Va=new FI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),zi(t).start(),t.Ra.ua()}function Dd(t){return Fr(t)&&!zi(t).x_()&&t.Ia.size>0}function Fr(t){return X(t).Ea.size===0}function h0(t){t.Va=void 0}async function q2(t){t.Ra.set("Online")}async function G2(t){t.Ia.forEach((e,n)=>{Nd(t,e)})}async function Q2(t,e){h0(t),Dd(t)?(t.Ra.ha(e),Vd(t)):t.Ra.set("Unknown")}async function K2(t,e,n){if(t.Ra.set("Online"),e instanceof K_&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){W(jr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ll(t,r)}else if(e instanceof xa?t.Va.Ze(e):e instanceof Q_?t.Va.st(e):t.Va.tt(e),!n.isEqual(Y.min()))try{const r=await o0(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.Ia.get(h);p&&s.Ia.set(h,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const p=s.Ia.get(u);if(!p)return;s.Ia.set(u,p.withResumeToken(Qe.EMPTY_BYTE_STRING,p.snapshotVersion)),c0(s,u);const m=new jn(p.target,u,h,p.sequenceNumber);Nd(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W(jr,"Failed to raise snapshot:",r),await ll(t,r)}}async function ll(t,e,n){if(!Mi(e))throw e;t.Ea.add(1),await wo(t),t.Ra.set("Offline"),n||(n=()=>o0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(jr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Fl(t)})}function d0(t,e){return e().catch(n=>ll(t,n,e))}async function zl(t){const e=X(t),n=tr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:yd;for(;Y2(e);)try{const i=await b2(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,X2(e,i)}catch(i){await ll(e,i)}f0(e)&&p0(e)}function Y2(t){return Fr(t)&&t.Ta.length<10}function X2(t,e){t.Ta.push(e);const n=tr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function f0(t){return Fr(t)&&!tr(t).x_()&&t.Ta.length>0}function p0(t){tr(t).start()}async function J2(t){tr(t).ra()}async function Z2(t){const e=tr(t);for(const n of t.Ta)e.ea(n.mutations)}async function eA(t,e,n){const r=t.Ta.shift(),i=Sd.from(r,e,n);await d0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await zl(t)}async function tA(t,e){e&&tr(t).X_&&await async function(r,i){if(function(o){return OI(o)&&o!==j.ABORTED}(i.code)){const s=r.Ta.shift();tr(r).B_(),await d0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await zl(r)}}(t,e),f0(t)&&p0(t)}async function ug(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),W(jr,"RemoteStore received new credentials");const r=Fr(n);n.Ea.add(3),await wo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fl(n)}async function nA(t,e){const n=X(t);e?(n.Ea.delete(2),await Fl(n)):e||(n.Ea.add(2),await wo(n),n.Ra.set("Unknown"))}function zi(t){return t.ma||(t.ma=function(n,r,i){const s=X(n);return s.sa(),new z2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:q2.bind(null,t),t_:G2.bind(null,t),r_:Q2.bind(null,t),H_:K2.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Dd(t)?Vd(t):t.Ra.set("Unknown")):(await t.ma.stop(),h0(t))})),t.ma}function tr(t){return t.fa||(t.fa=function(n,r,i){const s=X(n);return s.sa(),new U2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:J2.bind(null,t),r_:tA.bind(null,t),ta:Z2.bind(null,t),na:eA.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await zl(t)):(await t.fa.stop(),t.Ta.length>0&&(W(jr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new jd(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Od(t,e){if(vn("AsyncQueue",`${e}: ${t}`),Mi(t))return new H(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{static emptySet(e){return new mi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=vs(),this.sortedSet=new Ee(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new mi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(){this.ga=new Ee(G.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Q(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pi{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Pi(e,n,mi.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class iA{constructor(){this.queries=hg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=X(n),s=i.queries;i.queries=hg(),s.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new H(j.ABORTED,"Firestore shutting down"))}}function hg(){return new Mr(t=>D_(t),Vl)}async function sA(t,e){const n=X(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new rA,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Od(o,`Initialization of query '${Gr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Ld(n)}async function oA(t,e){const n=X(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aA(t,e){const n=X(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&Ld(n)}function lA(t,e,n){const r=X(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Ld(t){t.Ca.forEach(e=>{e.next()})}var uh,dg;(dg=uh||(uh={})).Ma="default",dg.Cache="cache";class uA{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Pi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Pi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==uh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(e){this.key=e}}class g0{constructor(e){this.key=e}}class cA{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ne(),this.mutatedKeys=ne(),this.eu=j_(e),this.tu=new mi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new cg,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const g=i.get(p),A=Dl(this.query,m)?m:null,k=!!g&&this.mutatedKeys.has(g.key),b=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let R=!1;g&&A?g.data.isEqual(A.data)?k!==b&&(r.track({type:3,doc:A}),R=!0):this.su(g,A)||(r.track({type:2,doc:A}),R=!0,(u&&this.eu(A,u)>0||h&&this.eu(A,h)<0)&&(l=!0)):!g&&A?(r.track({type:0,doc:A}),R=!0):g&&!A&&(r.track({type:1,doc:g}),R=!0,(u||h)&&(l=!0)),R&&(A?(o=o.add(A),s=b?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((p,m)=>function(A,k){const b=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Rt:R})}};return b(A)-b(k)}(p.type,m.type)||this.eu(p.doc,m.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new Pi(this.query,e.tu,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ne(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new g0(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new m0(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ne();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Pi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Md="SyncEngine";class hA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dA{constructor(e){this.key=e,this.hu=!1}}class fA{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Mr(l=>D_(l),Vl),this.Iu=new Map,this.Eu=new Set,this.du=new Ee(G.comparator),this.Au=new Map,this.Ru=new Cd,this.Vu={},this.mu=new Map,this.fu=Ri.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pA(t,e,n=!0){const r=T0(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await y0(r,e,n,!0),i}async function mA(t,e){const n=T0(t);await y0(n,e,!0,!1)}async function y0(t,e,n,r){const i=await N2(t.localStore,Zt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await gA(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&u0(t.remoteStore,i),l}async function gA(t,e,n,r,i){t.pu=(m,g,A)=>async function(b,R,x,_){let w=R.view.ru(x);w.Cs&&(w=await ig(b.localStore,R.query,!1).then(({documents:E})=>R.view.ru(E,w)));const V=_&&_.targetChanges.get(R.targetId),M=_&&_.targetMismatches.get(R.targetId)!=null,F=R.view.applyChanges(w,b.isPrimaryClient,V,M);return pg(b,R.targetId,F.au),F.snapshot}(t,m,g,A);const s=await ig(t.localStore,e,!0),o=new cA(e,s.Qs),l=o.ru(s.documents),u=_o.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);pg(t,n,h.au);const p=new hA(e,n,o);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function yA(t,e,n){const r=X(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Vl(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ah(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&bd(r.remoteStore,i.targetId),ch(r,i.targetId)}).catch(Li)):(ch(r,i.targetId),await ah(r.localStore,i.targetId,!0))}async function vA(t,e){const n=X(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bd(n.remoteStore,r.targetId))}async function _A(t,e,n){const r=AA(t);try{const i=await function(o,l){const u=X(o),h=me.now(),p=l.reduce((A,k)=>A.add(k.key),ne());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",A=>{let k=_n(),b=ne();return u.Ns.getEntries(A,p).next(R=>{k=R,k.forEach((x,_)=>{_.isValidDocument()||(b=b.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(A,k)).next(R=>{m=R;const x=[];for(const _ of l){const w=bI(_,m.get(_.key).overlayedDocument);w!=null&&x.push(new cr(_.key,w,A_(w.value.mapValue),en.exists(!0)))}return u.mutationQueue.addMutationBatch(A,h,x,l)}).next(R=>{g=R;const x=R.applyToLocalDocumentSet(m,b);return u.documentOverlayCache.saveOverlays(A,R.batchId,x)})}).then(()=>({batchId:g.batchId,changes:L_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new Ee(te)),h=h.insert(l,u),o.Vu[o.currentUser.toKey()]=h}(r,i.batchId,n),await Eo(r,i.changes),await zl(r.remoteStore)}catch(i){const s=Od(i,"Failed to persist write");n.reject(s)}}async function v0(t,e){const n=X(t);try{const r=await P2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ae(o.hu,14607):i.removedDocuments.size>0&&(ae(o.hu,42227),o.hu=!1))}),await Eo(n,r,e)}catch(r){await Li(r)}}function fg(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=X(o);u.onlineState=l;let h=!1;u.queries.forEach((p,m)=>{for(const g of m.Sa)g.va(l)&&(h=!0)}),h&&Ld(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wA(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ee(G.comparator);o=o.insert(s,tt.newNoDocument(s,Y.min()));const l=ne().add(s),u=new Ll(Y.min(),new Map,new Ee(te),o,l);await v0(r,u),r.du=r.du.remove(s),r.Au.delete(e),Fd(r)}else await ah(r.localStore,e,!1).then(()=>ch(r,e,n)).catch(Li)}async function EA(t,e){const n=X(t),r=e.batch.batchId;try{const i=await R2(n.localStore,e);w0(n,r,null),_0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Eo(n,i)}catch(i){await Li(i)}}async function TA(t,e,n){const r=X(t);try{const i=await function(o,l){const u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(ae(m!==null,37113),p=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);w0(r,e,n),_0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Eo(r,i)}catch(i){await Li(i)}}function _0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function w0(t,e,n){const r=X(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ch(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||E0(t,r)})}function E0(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(bd(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Fd(t))}function pg(t,e,n){for(const r of n)r instanceof m0?(t.Ru.addReference(r.key,e),xA(t,r)):r instanceof g0?(W(Md,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||E0(t,r.key)):Q(19791,{wu:r})}function xA(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(W(Md,"New document in limbo: "+n),t.Eu.add(r),Fd(t))}function Fd(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(ce.fromString(e)),r=t.fu.next();t.Au.set(r,new dA(n)),t.du=t.du.insert(n,r),u0(t.remoteStore,new jn(Zt(Td(n.path)),r,"TargetPurposeLimboResolution",kl.ce))}}async function Eo(t,e,n){const r=X(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){i.push(h);const m=Pd.As(u.targetId,h);s.push(m)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,h){const p=X(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(h,g=>O.forEach(g.Es,A=>p.persistence.referenceDelegate.addReference(m,g.targetId,A)).next(()=>O.forEach(g.ds,A=>p.persistence.referenceDelegate.removeReference(m,g.targetId,A)))))}catch(m){if(!Mi(m))throw m;W(kd,"Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const A=p.Ms.get(g),k=A.snapshotVersion,b=A.withLastLimboFreeSnapshotVersion(k);p.Ms=p.Ms.insert(g,b)}}}(r.localStore,s))}async function SA(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){W(Md,"User change. New user:",e.toKey());const r=await s0(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new H(j.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Eo(n,r.Ls)}}function IA(t,e){const n=X(t),r=n.Au.get(e);if(r&&r.hu)return ne().add(r.key);{let i=ne();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function T0(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=v0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wA.bind(null,e),e.Pu.H_=aA.bind(null,e.eventManager),e.Pu.yu=lA.bind(null,e.eventManager),e}function AA(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TA.bind(null,e),e}class ul{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ml(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return C2(this.persistence,new S2,e.initialUser,this.serializer)}Cu(e){return new i0(Rd.mi,this.serializer)}Du(e){return new D2}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ul.provider={build:()=>new ul};class CA extends ul{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ae(this.persistence.referenceDelegate instanceof al,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new u2(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ct.withCacheSize(this.cacheSizeBytes):ct.DEFAULT;return new i0(r=>al.mi(r,n),this.serializer)}}class hh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SA.bind(null,this.syncEngine),await nA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iA}()}createDatastore(e){const n=Ml(e.databaseInfo.databaseId),r=function(s){return new F2(s)}(e.databaseInfo);return function(s,o,l,u){return new $2(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new W2(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>fg(this.syncEngine,n,0),function(){return ag.v()?new ag:new j2}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,p){const m=new fA(i,s,o,l,u,h);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=X(i);W(jr,"RemoteStore shutting down."),s.Ea.add(5),await wo(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}hh.provider={build:()=>new hh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="FirestoreClient";class PA{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ze.UNAUTHENTICATED,this.clientId=gd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W(nr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(nr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Od(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qu(t,e){t.asyncQueue.verifyOperationInProgress(),W(nr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await s0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function mg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await kA(t);W(nr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ug(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ug(e.remoteStore,i)),t._onlineComponents=e}async function kA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(nr,"Using user provided OfflineComponentProvider");try{await qu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Si("Error using user provided cache. Falling back to memory cache: "+n),await qu(t,new ul)}}else W(nr,"Using default OfflineComponentProvider"),await qu(t,new CA(void 0));return t._offlineComponents}async function x0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(nr,"Using user provided OnlineComponentProvider"),await mg(t,t._uninitializedComponentsProvider._online)):(W(nr,"Using default OnlineComponentProvider"),await mg(t,new hh))),t._onlineComponents}function bA(t){return x0(t).then(e=>e.syncEngine)}async function gg(t){const e=await x0(t),n=e.eventManager;return n.onListen=pA.bind(null,e.syncEngine),n.onUnlisten=yA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vA.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="firestore.googleapis.com",vg=!0;class _g{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=I0,this.ssl=vg}else this.host=e.host,this.ssl=e.ssl??vg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=r0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<a2)throw new H(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S0(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ul{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _g({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _g(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jS;switch(r.type){case"firstParty":return new FS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=yg.get(n);r&&(W("ComponentProvider","Removing Datastore"),yg.delete(n),r.terminate())}(this),Promise.resolve()}}function NA(t,e,n,r={}){var h;t=Cr(t,Ul);const i=fd(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(cx(`https://${l}`),px("Firestore",!0)),s.host!==I0&&s.host!==l&&Si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!Xa(u,o)&&(t._setSettings(u),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=Ze.MOCK_USER;else{p=hx(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new H(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ze(g)}t._authCredentials=new OS(new p_(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class Ve{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ve(this.firestore,e,this._key)}toJSON(){return{type:Ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(yo(n,Ve._jsonSchema))return new Ve(e,r||null,new G(ce.fromString(n.referencePath)))}}Ve._jsonSchemaVersion="firestore/documentReference/1.0",Ve._jsonSchema={type:Ne("string",Ve._jsonSchemaVersion),referencePath:Ne("string")};class Qn extends zr{constructor(e,n,r){super(e,n,Td(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ve(this.firestore,null,new G(e))}withConverter(e){return new Qn(this.firestore,e,this._path)}}function A0(t,e,...n){if(t=sn(t),m_("collection","path",e),t instanceof Ul){const r=ce.fromString(e,...n);return bm(r),new Qn(t,null,r)}{if(!(t instanceof Ve||t instanceof Qn))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return bm(r),new Qn(t.firestore,null,r)}}function C0(t,e,...n){if(t=sn(t),arguments.length===1&&(e=gd.newId()),m_("doc","path",e),t instanceof Ul){const r=ce.fromString(e,...n);return km(r),new Ve(t,null,new G(r))}{if(!(t instanceof Ve||t instanceof Qn))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return km(r),new Ve(t.firestore,t instanceof Qn?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="AsyncQueue";class Eg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new a0(this,"async_queue_retry"),this._c=()=>{const r=Wu();r&&W(wg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Wu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Wu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ar;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Mi(e))throw e;W(wg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,vn("INTERNAL UNHANDLED ERROR: ",Tg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=jd.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Q(47125,{Pc:Tg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Tg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class uo extends Ul{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Eg,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Eg(e),this._firestoreClient=void 0,await e}}}function VA(t,e){const n=typeof t=="object"?t:SS(),r=typeof t=="string"?t:tl,i=_S(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=lx("firestore");s&&NA(i,...s)}return i}function R0(t){if(t._terminated)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||DA(t),t._firestoreClient}function DA(t){var r,i,s;const e=t._freezeSettings(),n=function(l,u,h,p){return new nI(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,S0(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new PA(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rt(Qe.fromBase64String(e))}catch(n){throw new H(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rt(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yo(e,Rt._jsonSchema))return Rt.fromBase64String(e.bytes)}}Rt._jsonSchemaVersion="firestore/bytes/1.0",Rt._jsonSchema={type:Ne("string",Rt._jsonSchemaVersion),bytes:Ne("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nn._jsonSchemaVersion}}static fromJSON(e){if(yo(e,nn._jsonSchema))return new nn(e.latitude,e.longitude)}}nn._jsonSchemaVersion="firestore/geoPoint/1.0",nn._jsonSchema={type:Ne("string",nn._jsonSchemaVersion),latitude:Ne("number"),longitude:Ne("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:rn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yo(e,rn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new rn(e.vectorValues);throw new H(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rn._jsonSchemaVersion="firestore/vectorValue/1.0",rn._jsonSchema={type:Ne("string",rn._jsonSchemaVersion),vectorValues:Ne("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=/^__.*__$/;class OA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cr(e,this.data,this.fieldMask,n,this.fieldTransforms):new vo(e,this.data,n,this.fieldTransforms)}}class P0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new cr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function k0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ac:t})}}class Ud{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ud({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return cl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(k0(this.Ac)&&jA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class LA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ml(e)}Cc(e,n,r,i=!1){return new Ud({Ac:e,methodName:n,Dc:r,path:We.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bd(t){const e=t._freezeSettings(),n=Ml(t._databaseId);return new LA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function MA(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);$d("Data must be an object, but it was:",o,r);const l=b0(r,o);let u,h;if(s.merge)u=new wt(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const g=dh(e,m,n);if(!o.contains(g))throw new H(j.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);V0(p,g)||p.push(g)}u=new wt(p),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new OA(new dt(l),u,h)}class $l extends zd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $l}}function FA(t,e,n,r){const i=t.Cc(1,e,n);$d("Data must be an object, but it was:",i,r);const s=[],o=dt.empty();ur(r,(u,h)=>{const p=Hd(e,u,n);h=sn(h);const m=i.yc(p);if(h instanceof $l)s.push(p);else{const g=To(h,m);g!=null&&(s.push(p),o.set(p,g))}});const l=new wt(s);return new P0(o,l,i.fieldTransforms)}function zA(t,e,n,r,i,s){const o=t.Cc(1,e,n),l=[dh(e,r,n)],u=[i];if(s.length%2!=0)throw new H(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(dh(e,s[g])),u.push(s[g+1]);const h=[],p=dt.empty();for(let g=l.length-1;g>=0;--g)if(!V0(h,l[g])){const A=l[g];let k=u[g];k=sn(k);const b=o.yc(A);if(k instanceof $l)h.push(A);else{const R=To(k,b);R!=null&&(h.push(A),p.set(A,R))}}const m=new wt(h);return new P0(p,m,o.fieldTransforms)}function UA(t,e,n,r=!1){return To(n,t.Cc(r?4:3,e))}function To(t,e){if(N0(t=sn(t)))return $d("Unsupported field value:",e,t),b0(t,e);if(t instanceof zd)return function(r,i){if(!k0(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=To(l,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return II(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=me.fromDate(r);return{timestampValue:ol(i.serializer,s)}}if(r instanceof me){const s=new me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ol(i.serializer,s)}}if(r instanceof nn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rt)return{bytesValue:Y_(i.serializer,r._byteString)};if(r instanceof Ve){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ad(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof rn)return function(o,l){return{mapValue:{fields:{[S_]:{stringValue:I_},[nl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return xd(l.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Pl(r)}`)}(t,e)}function b0(t,e){const n={};return v_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ur(t,(r,i)=>{const s=To(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function N0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof me||t instanceof nn||t instanceof Rt||t instanceof Ve||t instanceof zd||t instanceof rn)}function $d(t,e,n){if(!N0(n)||!g_(n)){const r=Pl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function dh(t,e,n){if((e=sn(e))instanceof Bl)return e._internalPath;if(typeof e=="string")return Hd(t,e);throw cl("Field path arguments must be of type string or ",t,!1,void 0,n)}const BA=new RegExp("[~\\*/\\[\\]]");function Hd(t,e,n){if(e.search(BA)>=0)throw cl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bl(...e.split("."))._internalPath}catch{throw cl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cl(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new H(j.INVALID_ARGUMENT,l+t+u)}function V0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $A(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $A extends D0{data(){return super.data()}}function Wd(t,e){return typeof e=="string"?Hd(t,e):e instanceof Bl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qd{}class j0 extends qd{}function WA(t,e,...n){let r=[];e instanceof qd&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Qd).length,l=s.filter(u=>u instanceof Gd).length;if(o>1||o>0&&l>0)throw new H(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Gd extends j0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Gd(e,n,r)}_apply(e){const n=this._parse(e);return O0(e._query,n),new zr(e.firestore,e.converter,th(e._query,n))}_parse(e){const n=Bd(e.firestore);return function(s,o,l,u,h,p,m){let g;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new H(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Ig(m,p);const k=[];for(const b of m)k.push(Sg(u,s,b));g={arrayValue:{values:k}}}else g=Sg(u,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Ig(m,p),g=UA(l,o,m,p==="in"||p==="not-in");return be.create(h,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Qd extends qd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Qd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ht.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)O0(o,u),o=th(o,u)}(e._query,n),new zr(e.firestore,e.converter,th(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kd extends j0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Kd(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new H(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oo(s,o)}(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Fi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function qA(t,e="asc"){const n=e,r=Wd("orderBy",t);return Kd._create(r,n)}function Sg(t,e,n){if(typeof(n=sn(n))=="string"){if(n==="")throw new H(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V_(e)&&n.indexOf("/")!==-1)throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ce.fromString(n));if(!G.isDocumentKey(r))throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fm(t,new G(r))}if(n instanceof Ve)return Fm(t,n._key);throw new H(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pl(n)}.`)}function Ig(t,e){if(!Array.isArray(t)||t.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O0(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class GA{convertValue(e,n="none"){switch(er(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ur(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[nl].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Se(o.doubleValue));return new rn(n)}convertGeoPoint(e){return new nn(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ro(e));default:return null}}convertTimestamp(e){const n=Jn(e);return new me(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ce.fromString(e);ae(n0(r),9688,{name:e});const i=new io(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||vn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class ws{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rr extends D0{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Sa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Wd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Rr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Rr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Rr._jsonSchema={type:Ne("string",Rr._jsonSchemaVersion),bundleSource:Ne("string","DocumentSnapshot"),bundleName:Ne("string"),bundle:Ne("string")};class Sa extends Rr{data(e={}){return super.data(e)}}class gi{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ws(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Sa(this._firestore,this._userDataWriter,r.key,r,new ws(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Sa(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ws(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Sa(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ws(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:KA(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function KA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}gi._jsonSchemaVersion="firestore/querySnapshot/1.0",gi._jsonSchema={type:Ne("string",gi._jsonSchemaVersion),bundleSource:Ne("string","QuerySnapshot"),bundleName:Ne("string"),bundle:Ne("string")};class L0 extends GA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,n)}}function YA(t,e,n,...r){t=Cr(t,Ve);const i=Cr(t.firestore,uo),s=Bd(i);let o;return o=typeof(e=sn(e))=="string"||e instanceof Bl?zA(s,"updateDoc",t._key,e,n,r):FA(s,"updateDoc",t._key,e),M0(i,[o.toMutation(t._key,en.exists(!0))])}function XA(t,e){const n=Cr(t.firestore,uo),r=C0(t),i=QA(t.converter,e);return M0(n,[MA(Bd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,en.exists(!1))]).then(()=>r)}function JA(t,...e){var u,h,p;t=sn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||xg(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(xg(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(h=m.error)==null?void 0:h.bind(m),e[r+2]=(p=m.complete)==null?void 0:p.bind(m)}let s,o,l;if(t instanceof Ve)o=Cr(t.firestore,uo),l=Td(t._key.path),s={next:m=>{e[r]&&e[r](ZA(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Cr(t,zr);o=Cr(m.firestore,uo),l=m._query;const g=new L0(o);s={next:A=>{e[r]&&e[r](new gi(o,g,m,A))},error:e[r+1],complete:e[r+2]},HA(t._query)}return function(g,A,k,b){const R=new RA(b),x=new uA(A,R,k);return g.asyncQueue.enqueueAndForget(async()=>sA(await gg(g),x)),()=>{R.Nu(),g.asyncQueue.enqueueAndForget(async()=>oA(await gg(g),x))}}(R0(o),l,i,s)}function M0(t,e){return function(r,i){const s=new Ar;return r.asyncQueue.enqueueAndForget(async()=>_A(await bA(r),i,s)),s.promise}(R0(t),e)}function ZA(t,e,n){const r=n.docs.get(e._key),i=new L0(t);return new Rr(t,i,e._key,r,new ws(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Oi=i})(xS),Za(new eo("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new uo(new LS(r.getProvider("auth-internal")),new zS(o,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new H(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new io(h.options.projectId,p)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),pi(Am,Cm,e),pi(Am,Cm,"esm2020")})();var eC="firebase",tC="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(eC,tC,"app");const nC={apiKey:"AIzaSyCjmy6wejHkx_YAvfzuWxRO4fJpWZaFgGM",authDomain:"incident-tracker-d329a.firebaseapp.com",projectId:"incident-tracker-d329a",storageBucket:"incident-tracker-d329a.firebasestorage.app",messagingSenderId:"519247779380",appId:"1:519247779380:web:47a8b4b40f14b169b45c61"},rC=i_(nC),Yd=VA(rC),Xd="incidents";function Jd(t){const e=WA(A0(Yd,Xd),qA("createdAt","desc"));return JA(e,n=>{const r=n.docs.map(i=>({_docId:i.id,...i.data()}));t(r)})}async function iC(t){const e={...t,createdAt:t.createdAt||new Date().toISOString()};await XA(A0(Yd,Xd),e)}async function sa(t,e){const n=C0(Yd,Xd,t);await YA(n,e)}const F0="notifications_v1";function sC(){try{const t=localStorage.getItem(F0);return t?JSON.parse(t):[]}catch{return[]}}function oC(t){localStorage.setItem(F0,JSON.stringify(t))}function Gu(t){const e=sC();e.unshift(t),oC(e)}function aC(t,e){const n=(t+" "+e).toLowerCase();return n.includes("fire")||n.includes("shock")||n.includes("leak")||n.includes("burst")||n.includes("short circuit")||t.toLowerCase()==="electricity"?"High":n.includes("slow")||n.includes("minor")||n.includes("low")?"Low":"Medium"}function lC(t){return 1/(1+Math.exp(-t))}function uC(){const{user:t}=lr(),[e,n]=z.useState([]),[r,i]=z.useState({title:"",category:"Electricity",description:"",hostel:"",room:"",imageUrl:"",manualPriority:"Medium"}),[s,o]=z.useState(""),[l,u]=z.useState(""),[h,p]=z.useState({lat:null,lng:null,loading:!1,error:""});z.useEffect(()=>{const _=Jd(w=>{n(w)});return()=>_()},[]);const m=_=>{const{name:w,value:V}=_.target;i(M=>({...M,[w]:V}))},g=()=>{if(p(_=>({..._,loading:!0,error:""})),!navigator.geolocation){p({lat:null,lng:null,loading:!1,error:"Geolocation not supported in this browser."});return}navigator.geolocation.getCurrentPosition(_=>{p({lat:_.coords.latitude,lng:_.coords.longitude,loading:!1,error:""})},()=>{p({lat:null,lng:null,loading:!1,error:"Unable to fetch location (permission denied or error)."})})},A=async _=>{if(_.preventDefault(),o(""),u(""),!r.title||!r.description||!r.hostel||!r.room){o("Please fill title, description, hostel and room.");return}const w=(t==null?void 0:t.email)||"anonymous";if(e.filter(I=>I.reporterEmail===w&&I.status!=="Resolved").length>=5){o("You already have 5 active incidents. Please wait for some to be resolved before creating more.");return}if(e.find(I=>{const C=(I.category||"").toLowerCase()===r.category.toLowerCase(),P=(I.hostel||"").trim().toLowerCase()===r.hostel.trim().toLowerCase(),S=(I.room||"").trim().toLowerCase()===r.room.trim().toLowerCase(),de=I.status!=="Resolved";return C&&P&&S&&de})){o("There is already an open incident for this problem in this exact hostel & room. Others from this room should follow that ticket instead of creating a new one.");return}const F=r.category==="Other"?r.manualPriority||"Medium":aC(r.category,r.description),E=new Date().toISOString(),y=`${r.hostel} - Room ${r.room}`,T={id:Date.now(),title:r.title,category:r.category,description:r.description,hostel:r.hostel,room:r.room,location:y,imageUrl:r.imageUrl,priority:F,status:"New",reporterEmail:w,createdAt:E,latitude:h.lat,longitude:h.lng};try{await iC(T),Gu({id:Date.now()+1,targetRole:"reporter",targetEmail:w,title:"Incident recorded",message:`Your ${F} priority ${r.category} issue in ${y} has been logged.`,createdAt:E}),Gu({id:Date.now()+2,targetRole:"admin",targetEmail:null,title:"New campus incident",message:`${F} priority ${r.category} issue reported in ${y}.`,createdAt:E}),F==="High"&&Gu({id:Date.now()+3,targetRole:"technician",targetEmail:null,title:"High priority incident",message:`High priority ${r.category} issue in ${y} requires quick attention.`,createdAt:E}),u("Incident created successfully with priority: "+F),i(I=>({...I,title:"",description:"",imageUrl:""}))}catch(I){console.error("Failed to create incident",I),o("Could not create incident. Please try again.")}},k=[],b={};e.forEach(_=>{const w=_.hostel||_.location||"Unknown",V=`${_.category}__${w}`;b[V]=(b[V]||0)+1}),Object.entries(b).forEach(([_,w])=>{if(w>=3){const[V,M]=_.split("__");k.push(`High chance of more ${V} issues in ${M} (reported ${w} times).`)}});const R=e.filter(_=>_.reporterEmail===((t==null?void 0:t.email)||"anonymous")).slice(0,4),x=z.useMemo(()=>{if(!e.length)return{currentPair:null,topForHostel:[]};const _=Date.now(),w={};e.forEach(y=>{const T=(y.hostel||y.location||"Unknown").trim(),I=y.category||"Other",C=`${T.toLowerCase()}__${I}`,P=y.createdAt?new Date(y.createdAt).getTime():null;w[C]||(w[C]={hostel:T,category:I,total:0,high:0,recent24h:0,openCount:0,oldestOpenTs:null});const S=w[C];S.total+=1,y.priority==="High"&&(S.high+=1),P!==null&&_-P<=24*60*60*1e3&&(S.recent24h+=1),y.status!=="Resolved"&&(S.openCount+=1,P!==null&&(!S.oldestOpenTs||P<S.oldestOpenTs)&&(S.oldestOpenTs=P))});const V=Object.values(w).map(y=>{const{hostel:T,category:I,total:C,high:P,recent24h:S,openCount:de}=y,Ce=y.oldestOpenTs!==null?(_-y.oldestOpenTs)/(1e3*60*60):0;let It=0;de>0&&Ce>0&&(It=Math.min(Ce,48)/48);const Dt=.35*C+.8*P+1.1*S+.9*de+1.1*It,L=lC(Dt/3.5),$=Math.round(L*100);return{hostel:T,category:I,total:C,high:P,recent24h:S,openCount:de,probability:$}});V.sort((y,T)=>T.probability-y.probability);const M=(r.hostel||"").trim().toLowerCase();let F=null,E=[];return M&&(E=V.filter(y=>y.hostel.toLowerCase()===M).slice(0,3),F=E.find(y=>y.category===r.category)||null),{currentPair:F,topForHostel:E}},[e,r.hostel,r.category]);return f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 3fr) minmax(0, 2fr)",gap:"24px"},children:[f.jsxs("div",{children:[f.jsxs("div",{style:{marginBottom:"18px",padding:"16px 18px",borderRadius:"16px",background:"linear-gradient(135deg, #1d4ed8, #6366f1)",color:"white",boxShadow:"0 18px 35px rgba(37,99,235,0.35)"},children:[f.jsx("p",{style:{fontSize:"0.85rem",opacity:.9},children:"Reporter  Smart Campus"}),f.jsxs("h2",{style:{fontSize:"1.4rem",fontWeight:600,marginTop:4},children:["Hi ",(t==null?void 0:t.name)||"Reporter",", log an issue in seconds."]}),f.jsx("p",{style:{fontSize:"0.9rem",marginTop:6,opacity:.95},children:"As you report, our model updates risk scores for each hostel and problem type to prevent repeated breakdowns."})]}),f.jsxs("div",{style:{padding:"18px 20px",borderRadius:"16px",background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10,alignItems:"center"},children:[f.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:600},children:"Create New Incident"}),f.jsx(kt,{to:"/reporter/incidents",style:{fontSize:"0.85rem",color:"#2563eb",textDecoration:"none"},children:"View my incidents "})]}),s&&f.jsx("div",{style:{marginBottom:10,padding:"8px 10px",borderRadius:8,background:"#fee2e2",color:"#b91c1c",fontSize:"0.85rem"},children:s}),l&&f.jsx("div",{style:{marginBottom:10,padding:"8px 10px",borderRadius:8,background:"#dcfce7",color:"#166534",fontSize:"0.85rem"},children:l}),f.jsxs("form",{onSubmit:A,style:{display:"grid",gap:"10px",marginTop:4},children:[f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",fontSize:"0.8rem",marginBottom:4,color:"#4b5563"},children:"Title"}),f.jsx("input",{name:"title",value:r.title,onChange:m,placeholder:"Short summary (e.g., Power outage in Hostel A - Room 101)",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",fontSize:"0.9rem"}})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:r.category==="Other"?"1.2fr 1.2fr 1.2fr 1.3fr":"1.2fr 1.2fr 1.2fr",gap:10},children:[f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",fontSize:"0.8rem",marginBottom:4,color:"#4b5563"},children:"Category"}),f.jsxs("select",{name:"category",value:r.category,onChange:m,style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",fontSize:"0.9rem"},children:[f.jsx("option",{children:"Electricity"}),f.jsx("option",{children:"Water"}),f.jsx("option",{children:"Internet"}),f.jsx("option",{children:"Hostel"}),f.jsx("option",{children:"Equipment"}),f.jsx("option",{children:"Other"})]})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",fontSize:"0.8rem",marginBottom:4,color:"#4b5563"},children:"Hostel / Block"}),f.jsx("input",{name:"hostel",value:r.hostel,onChange:m,placeholder:"e.g., Hostel A",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",fontSize:"0.9rem"}}),f.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:2},children:'Use the same name (e.g., "Hostel A") so all reports from that hostel are grouped correctly.'})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",fontSize:"0.8rem",marginBottom:4,color:"#4b5563"},children:"Room / Spot"}),f.jsx("input",{name:"room",value:r.room,onChange:m,placeholder:"e.g., 101, Ground floor lobby",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",fontSize:"0.9rem"}})]}),r.category==="Other"&&f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",fontSize:"0.8rem",marginBottom:4,color:"#4b5563"},children:'Priority (for "Other")'}),f.jsxs("select",{name:"manualPriority",value:r.manualPriority,onChange:m,style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",fontSize:"0.9rem"},children:[f.jsx("option",{value:"High",children:"High"}),f.jsx("option",{value:"Medium",children:"Medium"}),f.jsx("option",{value:"Low",children:"Low"})]})]})]}),f.jsxs("div",{style:{marginTop:2},children:[f.jsx("button",{type:"button",onClick:g,style:{fontSize:"0.75rem",padding:"4px 8px",borderRadius:999,border:"1px dashed #9ca3af",background:"#f9fafb",cursor:"pointer"},children:h.loading?"Capturing GPS...":"Use my GPS (beta)"}),h.lat&&h.lng&&f.jsxs("span",{style:{marginLeft:8,fontSize:"0.75rem",color:"#6b7280"},children:["Captured: ",h.lat.toFixed(4),", ",h.lng.toFixed(4)]}),h.error&&f.jsx("div",{style:{fontSize:"0.75rem",color:"#b91c1c",marginTop:2},children:h.error})]}),x.currentPair&&f.jsxs("div",{style:{marginTop:4,padding:"8px 10px",borderRadius:10,background:"#eff6ff",border:"1px dashed #bfdbfe",fontSize:"0.8rem",color:"#1d4ed8"},children:[f.jsxs("strong",{children:["AI prediction for ",x.currentPair.hostel," "," ",x.currentPair.category,":"]})," ","~",x.currentPair.probability,"% chance of another"," ",x.currentPair.category.toLowerCase()," issue soon, based on"," ",x.currentPair.total," past incidents (",x.currentPair.high," high priority,"," ",x.currentPair.recent24h," in last 24h,"," ",x.currentPair.openCount," currently open)."]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",fontSize:"0.8rem",marginBottom:4,color:"#4b5563"},children:"Description"}),f.jsx("textarea",{name:"description",value:r.description,onChange:m,rows:4,placeholder:"Describe the issue, how long it has been happening, any safety concerns, etc.",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",fontSize:"0.9rem",resize:"vertical"}})]}),f.jsxs("div",{children:[f.jsx("label",{style:{display:"block",fontSize:"0.8rem",marginBottom:4,color:"#4b5563"},children:"Image URL (optional)"}),f.jsx("input",{name:"imageUrl",value:r.imageUrl,onChange:m,placeholder:"Paste a hosted image link if available",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",fontSize:"0.9rem"}})]}),f.jsx("button",{type:"submit",style:{marginTop:6,padding:"10px 14px",borderRadius:"999px",border:"none",fontWeight:600,fontSize:"0.95rem",background:"linear-gradient(135deg, #10b981, #22c55e)",color:"white",cursor:"pointer",justifySelf:"flex-start"},children:"Submit incident"})]}),k.length>0&&f.jsxs("div",{style:{marginTop:16,padding:"10px 14px",borderRadius:12,background:"#ecfdf5",border:"1px dashed #6ee7b7",fontSize:"0.85rem",color:"#065f46"},children:[f.jsx("strong",{children:"Prediction insights:"}),f.jsx("ul",{style:{marginTop:6,paddingLeft:"18px"},children:k.map((_,w)=>f.jsx("li",{children:_},w))})]}),x.topForHostel.length>0&&f.jsxs("div",{style:{marginTop:12,padding:"10px 14px",borderRadius:12,background:"#f9fafb",border:"1px solid #e5e7eb",fontSize:"0.8rem",color:"#4b5563"},children:[f.jsxs("strong",{children:["Hotspots in ",x.topForHostel[0].hostel," (by model):"]}),f.jsx("ul",{style:{marginTop:6,paddingLeft:18},children:x.topForHostel.slice(0,2).map(_=>f.jsxs("li",{children:[_.category,"  ",_.probability,"% risk  ",_.total," incidents (",_.high," high, ",_.recent24h," in last 24h)"]},_.category))})]})]})]}),f.jsx("div",{children:f.jsxs("div",{style:{padding:"16px 18px",borderRadius:"16px",background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)"},children:[f.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:600,marginBottom:10},children:"Recent incidents by you"}),R.length===0&&f.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"You haven't logged any incidents yet. Your last 4 incidents will appear here once you submit."}),f.jsx("div",{style:{display:"grid",gap:10},children:R.map(_=>f.jsxs("div",{style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",background:"#f9fafb"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[f.jsx("div",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827"},children:_.title}),f.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:999,background:_.priority==="High"?"#fee2e2":_.priority==="Medium"?"#fef3c7":"#dcfce7",color:_.priority==="High"?"#b91c1c":_.priority==="Medium"?"#92400e":"#166534"},children:[_.priority," priority"]})]}),f.jsxs("p",{style:{fontSize:"0.8rem",color:"#4b5563",marginBottom:4},children:[_.category,"  ",_.location||`${_.hostel} - Room ${_.room}`]}),f.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",maxHeight:40,overflow:"hidden",textOverflow:"ellipsis"},children:_.description}),f.jsxs("div",{style:{marginTop:6,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:999,background:"#e0f2fe",color:"#0369a1"},children:_.status}),f.jsx("span",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:_.createdAt?new Date(_.createdAt).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}):""})]})]},_.id))}),R.length>0&&f.jsx("div",{style:{marginTop:10},children:f.jsx(kt,{to:"/reporter/incidents",style:{fontSize:"0.85rem",color:"#2563eb",textDecoration:"none"},children:"See full incident history "})})]})})]})}function cC(t){return 1/(1+Math.exp(-t))}function hC(){const[t,e]=z.useState([]);z.useEffect(()=>{const R=Jd(x=>{e(x||[])});return()=>R()},[]);const n=z.useMemo(()=>{const R=t.length,x=t.filter(L=>L.status!=="Resolved").length,_=t.filter(L=>L.status==="Resolved").length,w=t.filter(L=>L.priority==="High").length,V=Date.now(),M=30*60*1e3,F=t.filter(L=>{if(!L.createdAt||L.status==="Resolved")return!1;const $=new Date(L.createdAt).getTime();return V-$>M}).length,E={},y={};t.forEach(L=>{const $=(L.hostel||L.location||"Unknown").trim(),K=L.category||"Other",ee=L.createdAt?new Date(L.createdAt).getTime():null;E[$]||(E[$]={total:0,high:0}),E[$].total+=1,L.priority==="High"&&(E[$].high+=1);const oe=`${$.toLowerCase()}__${K}`;y[oe]||(y[oe]={hostel:$,category:K,total:0,high:0,recent24h:0,last7d:0,openCount:0,oldestOpenTs:null});const Re=y[oe];if(Re.total+=1,L.priority==="High"&&(Re.high+=1),ee!==null){const Me=V-ee;Me<=24*60*60*1e3&&(Re.recent24h+=1),Me<=7*24*60*60*1e3&&(Re.last7d+=1)}L.status!=="Resolved"&&(Re.openCount+=1,ee!==null&&(!Re.oldestOpenTs||ee<Re.oldestOpenTs)&&(Re.oldestOpenTs=ee))});const T=Object.entries(E).map(([L,$])=>({location:L,total:$.total,high:$.high})),I=T.reduce((L,$)=>$.total>L?$.total:L,0),C=Object.values(y).map(L=>{const{hostel:$,category:K,total:ee,high:oe,recent24h:Re,last7d:Me,openCount:jt}=L,rt=L.oldestOpenTs!==null?(V-L.oldestOpenTs)/(1e3*60*60):0;let Ot=0;jt>0&&rt>0&&(Ot=Math.min(rt,48)/48);const Ui=.35*ee+.8*oe+1.1*Re+.7*Me+.9*jt+1.3*Ot,xo=cC(Ui/3.5),Ur=Math.round(xo*100),Hl=Re||Math.max(ee/5,.5),So=Math.max(0,Math.round(Ur/100*Hl));let hr="Low";return Ur>=75?hr="High":Ur>=50&&(hr="Medium"),{hostel:$,category:K,total:ee,high:oe,recent24h:Re,last7d:Me,openCount:jt,oldestAgeHours:Math.round(rt),probability:Ur,expectedNext24h:So,band:hr}});C.sort((L,$)=>$.probability-L.probability);const P=[];for(let L=6;L>=0;L--){const $=new Date(V-L*24*60*60*1e3),K=$.toISOString().slice(0,10),ee=t.filter(oe=>oe.createdAt&&oe.createdAt.slice(0,10)===K).length;P.push({label:$.toLocaleDateString(void 0,{weekday:"short"}),count:ee})}const S=P.reduce((L,$)=>$.count>L?$.count:L,0),de=R===0?0:(x+2*w+3*F)/(R||1);let Ce=Math.round(100-22*de);Ce<0&&(Ce=0),Ce>100&&(Ce=100);let It="Healthy",Dt="#16a34a";return Ce<40?(It="Critical",Dt="#b91c1c"):Ce<70&&(It="Warning",Dt="#ea580c"),{total:R,open:x,resolved:_,highPriority:w,slaBreached:F,heatmap:T,maxTotal:I,riskPairs:C,last7Days:P,maxDayCount:S,healthScore:Ce,healthLabel:It,healthColor:Dt}},[t]),{total:r,open:i,resolved:s,highPriority:o,slaBreached:l,heatmap:u,maxTotal:h,riskPairs:p,last7Days:m,maxDayCount:g,healthScore:A,healthLabel:k,healthColor:b}=n;return f.jsxs("div",{style:{display:"grid",gap:20},children:[f.jsxs("div",{children:[f.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:600,marginBottom:4},children:"Admin Control Centre"}),f.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Live overview of all incidents across hostels, AI-based risk prediction for each (hostel, category) pair, campus health, and SLA risks."})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.2fr) minmax(0, 2fr)",gap:16},children:[f.jsxs("div",{style:{padding:"16px 18px",borderRadius:16,background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)",display:"flex",flexDirection:"column",gap:10},children:[f.jsx("p",{style:{fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:1,color:"#6b7280"},children:"Campus health score"}),f.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center"},children:[f.jsx("div",{style:{width:80,height:80,borderRadius:"999px",background:"conic-gradient("+b+" "+A+"%, #e5e7eb 0)",display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsxs("div",{style:{width:58,height:58,borderRadius:"999px",background:"white",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[f.jsx("span",{style:{fontSize:"1.2rem",fontWeight:700,color:b},children:A}),f.jsx("span",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"/100"})]})}),f.jsxs("div",{children:[f.jsxs("p",{style:{fontSize:"0.95rem",fontWeight:600,color:"#0f172a"},children:[k," campus state"]}),f.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:4},children:"This score combines open incidents, high-priority problems and SLA breaches. More long-lived, high-severity tickets reduce the score and highlight operational risk."})]})]})]}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(150px,1fr))",gap:12},children:[{label:"Total incidents",value:r,border:"#3b82f6",bg:"rgba(59,130,246,0.08)"},{label:"Open incidents",value:i,border:"#f97316",bg:"rgba(249,115,22,0.08)"},{label:"Resolved",value:s,border:"#22c55e",bg:"rgba(34,197,94,0.08)"},{label:"High priority",value:o,border:"#ef4444",bg:"rgba(239,68,68,0.08)"},{label:"SLA risks (30+ min)",value:l,border:"#0f172a",bg:"rgba(15,23,42,0.04)"}].map(R=>f.jsxs("div",{style:{padding:"12px 14px",borderRadius:16,border:`1px solid ${R.border}`,background:R.bg},children:[f.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",marginBottom:4},children:R.label}),f.jsx("p",{style:{fontSize:"1.3rem",fontWeight:700,color:"#0f172a"},children:R.value})]},R.label))})]}),f.jsxs("div",{style:{padding:"16px 18px",borderRadius:16,background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)"},children:[f.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:600,marginBottom:6},children:"AI risk prediction  all hostel & category combinations"}),f.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",marginBottom:10},children:["For each ",f.jsx("strong",{children:"(hostel, category)"})," pair with at least one incident, we build a feature vector: total incidents, number of high-priority cases, activity in the last 24 hours and 7 days, number of open tickets and how long the oldest open ticket has been waiting. These are combined into a weighted risk score and passed through a"," ",f.jsx("strong",{children:"logistic (sigmoid)"})," function to obtain a probability of another incident in the near future."]}),p.length===0?f.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"No incidents yet. As soon as reporters log issues, AI risk scores for each hostel & problem type will appear here."}):f.jsx("div",{style:{marginTop:6,display:"grid",gap:10},children:p.map(R=>f.jsxs("div",{style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",background:"#f9fafb"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4,alignItems:"center"},children:[f.jsxs("div",{children:[f.jsxs("div",{style:{fontSize:"0.95rem",fontWeight:600,color:"#0f172a"},children:[R.hostel,"  ",R.category]}),f.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:[R.total," incidents total  ",R.high," high priority "," ",R.recent24h," in last 24h  ",R.last7d," in last 7d"]}),f.jsxs("div",{style:{fontSize:"0.78rem",color:"#6b7280",marginTop:2},children:[R.openCount," open ticket",R.openCount===1?"":"s",R.openCount>0&&`  oldest open ~ ${R.oldestAgeHours}h`]})]}),f.jsxs("div",{style:{textAlign:"right"},children:[f.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Risk of another ",R.category.toLowerCase()," issue here"]}),f.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:R.band==="High"?"#b91c1c":R.band==="Medium"?"#92400e":"#15803d"},children:[R.probability,"%"]}),f.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:2},children:["Band: ",f.jsx("strong",{children:R.band}),"  Expected next 24h:"," ",f.jsx("strong",{children:R.expectedNext24h})," incident",R.expectedNext24h===1?"":"s"]})]})]}),f.jsx("div",{style:{marginTop:6,height:8,borderRadius:999,background:"#e5e7eb",overflow:"hidden"},children:f.jsx("div",{style:{width:`${R.probability}%`,height:"100%",background:R.band==="High"?"linear-gradient(90deg,#ef4444,#f97316)":R.band==="Medium"?"linear-gradient(90deg,#f97316,#eab308)":"linear-gradient(90deg,#22c55e,#16a34a)"}})}),f.jsxs("p",{style:{marginTop:4,fontSize:"0.78rem",color:"#6b7280"},children:["Interpretation: frequently recurring, high-priority and long-lived ",f.jsx("strong",{children:R.category.toLowerCase()})," issues in ",f.jsx("strong",{children:R.hostel})," push this probability upward. Admins can proactively schedule checks or preventive maintenance for the highest-risk pairs."]})]},`${R.hostel}__${R.category}`))})]}),f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.3fr) minmax(0, 1.7fr)",gap:16},children:[f.jsxs("div",{style:{padding:"16px 18px",borderRadius:16,background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)"},children:[f.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:600,marginBottom:6},children:"Incident trend  last 7 days"}),f.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:12},children:"Shows whether incident volume on campus is trending up or down. This supports pattern and trend detection in the evaluation."}),m.length===0?f.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"No incidents yet."}):f.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:10,height:150,paddingBottom:8},children:m.map(R=>{const x=g>0?20+R.count/g*80:0;return f.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",gap:4,fontSize:"0.75rem"},children:[f.jsx("div",{style:{width:"70%",height:`${x}%`,borderRadius:999,background:"linear-gradient(180deg,#2563eb,#38bdf8)"}}),f.jsx("span",{style:{color:"#6b7280"},children:R.label}),f.jsx("span",{style:{color:"#111827"},children:R.count})]},R.label)})})]}),f.jsxs("div",{style:{padding:"16px 18px",borderRadius:16,background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)"},children:[f.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:600,marginBottom:6},children:"Hostel / Block heatmap"}),f.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:12},children:"Distribution of incidents by hostel/block. Darker bars mean more incidents; the orange/red gradient shows locations with a high concentration of high-priority issues."}),u.length===0?f.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"No incidents yet. Ask a reporter to create a few demo complaints."}):f.jsx("div",{style:{display:"grid",gap:10},children:u.map(R=>{const x=h>0?20+R.total/h*80:0,_=R.high>0;return f.jsxs("div",{children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85rem",marginBottom:4},children:[f.jsx("span",{style:{fontWeight:500},children:R.location}),f.jsxs("span",{style:{color:"#6b7280"},children:[R.total," incidents  ",R.high," high"]})]}),f.jsx("div",{style:{height:10,borderRadius:999,background:"#e5e7eb",overflow:"hidden"},children:f.jsx("div",{style:{width:`${x}%`,height:"100%",background:_?"linear-gradient(90deg,#ef4444,#f97316)":"linear-gradient(90deg,#60a5fa,#22c55e)"}})})]},R.location)})})]})]})]})}function dC(t){if(!t)return"-";const e=Date.now(),n=new Date(t).getTime(),r=Math.max(0,Math.round((e-n)/(1e3*60)));if(r<60)return`${r} min`;const i=r/60;return i<24?`${i.toFixed(1)} h`:`${(i/24).toFixed(1)} d`}function oa(t){if(!t)return!1;const e=Date.now(),n=new Date(t).getTime();return(e-n)/(1e3*60)>30}function fC(){const{user:t}=lr(),[e,n]=z.useState([]),[r,i]=z.useState("all"),[s,o]=z.useState(""),[l,u]=z.useState(""),[h,p]=z.useState(null),m=(t==null?void 0:t.email)||"tech";z.useEffect(()=>{const w=Jd(V=>n(V||[]));return()=>w()},[]);const g=z.useMemo(()=>{const w=e.filter(F=>F.assignedTo===m&&F.status!=="Resolved"),V=w.filter(F=>F.status==="In Progress"),M=w.filter(F=>oa(F.createdAt));return{assignedCount:w.length,inProgressCount:V.length,slaRiskCount:M.length}},[e,m]),A=z.useMemo(()=>{let w=e.filter(M=>M.status!=="Resolved");r!=="all"&&(w=w.filter(M=>M.priority===r));const V={High:0,Medium:1,Low:2};return[...w].sort((M,F)=>{const E=oa(M.createdAt),y=oa(F.createdAt);if(E&&!y)return-1;if(!E&&y)return 1;const T=V[M.priority]??3,I=V[F.priority]??3;return T!==I?T-I:new Date(F.createdAt).getTime()-new Date(M.createdAt).getTime()})},[e,r]),k=async w=>{if(g.assignedCount>=1){o("You already have an assigned incident. Resolve or release it before taking another.");return}p(w),await sa(w._docId,{assignedTo:m,assignedName:(t==null?void 0:t.name)||"Technician",assignedAt:new Date().toISOString()}),u("Incident assigned to you.")},b=async w=>{p(w),await sa(w._docId,{status:"In Progress",startedAt:new Date().toISOString()}),u("Work started.")},R=async w=>{p(w),await sa(w._docId,{status:"Resolved",resolvedAt:new Date().toISOString()}),u("Incident marked resolved.")},x=async w=>{p(w),await sa(w._docId,{assignedTo:null,assignedName:null,assignedAt:null,startedAt:null,status:"New"}),u("Incident released.")},_=w=>{if(w.location)return w.location;const V=[];return w.hostel&&V.push(w.hostel),w.room&&V.push(`Room ${w.room}`),V.join(" - ")||"Unknown location"};return f.jsxs("div",{style:{display:"grid",gap:20},children:[f.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 1.2fr)",gap:16},children:[f.jsxs("div",{children:[f.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:600,marginBottom:4},children:"Technician workload"}),f.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Take ownership of incidents and resolve them in priority order."})]}),f.jsxs("div",{style:{padding:"10px 12px",borderRadius:14,background:"white",boxShadow:"0 10px 26px rgba(15,23,42,0.08)",display:"flex",justifyContent:"space-between",fontSize:"0.85rem"},children:[f.jsxs("div",{children:[f.jsx("p",{style:{color:"#6b7280"},children:"Assigned to you"}),f.jsx("p",{style:{fontWeight:600},children:g.assignedCount})]}),f.jsxs("div",{children:[f.jsx("p",{style:{color:"#6b7280"},children:"In progress"}),f.jsx("p",{style:{fontWeight:600},children:g.inProgressCount})]}),f.jsxs("div",{children:[f.jsx("p",{style:{color:"#6b7280"},children:"SLA risks (> 30 min)"}),f.jsx("p",{style:{fontWeight:600,color:g.slaRiskCount>0?"#b91c1c":"#16a34a"},children:g.slaRiskCount})]})]})]}),s&&f.jsx("div",{style:{marginBottom:8,padding:"8px 10px",borderRadius:8,background:"#fee2e2",color:"#b91c1c",fontSize:"0.85rem"},children:s}),l&&f.jsx("div",{style:{marginBottom:8,padding:"8px 10px",borderRadius:8,background:"#e0f2fe",color:"#075985",fontSize:"0.85rem"},children:l}),f.jsxs("div",{style:{padding:"16px 18px",borderRadius:16,background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10,alignItems:"center"},children:[f.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:600},children:"Open incidents"}),f.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[f.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Filter by priority:"}),f.jsxs("select",{value:r,onChange:w=>i(w.target.value),style:{fontSize:"0.8rem",padding:"4px 8px",borderRadius:999,border:"1px solid #d1d5db",background:"#f9fafb"},children:[f.jsx("option",{value:"all",children:"All"}),f.jsx("option",{value:"High",children:"High"}),f.jsx("option",{value:"Medium",children:"Medium"}),f.jsx("option",{value:"Low",children:"Low"})]})]})]}),A.length===0?f.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"No open incidents right now."}):f.jsx("div",{style:{display:"grid",gap:10},children:A.map(w=>{const V=oa(w.createdAt),M=dC(w.createdAt),F=w.assignedTo===m;let E="#e0f2fe",y="#0369a1";w.status==="In Progress"&&(E="#fef3c7",y="#92400e");const T=_(w);return f.jsxs("div",{style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",background:V?"#fef2f2":"#f9fafb"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[f.jsx("div",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827"},children:w.title}),f.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:999,background:w.priority==="High"?"#fee2e2":w.priority==="Medium"?"#fef3c7":"#dcfce7",color:w.priority==="High"?"#b91c1c":w.priority==="Medium"?"#92400e":"#166534"},children:[w.priority," priority"]})]}),f.jsxs("p",{style:{fontSize:"0.8rem",color:"#4b5563",marginBottom:2},children:[w.category,"  ",T]}),w.latitude&&w.longitude&&f.jsxs("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:4},children:["GPS:",f.jsxs("a",{href:`https://www.google.com/maps?q=${w.latitude},${w.longitude}`,target:"_blank",rel:"noreferrer",style:{textDecoration:"underline",color:"#2563eb"},children:[w.latitude.toFixed(4),", ",w.longitude.toFixed(4)]})]}),f.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",marginBottom:6},children:w.description}),f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[f.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[f.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:999,background:E,color:y},children:w.status}),w.assignedTo&&f.jsxs("span",{style:{fontSize:"0.75rem",color:F?"#16a34a":"#6b7280"},children:["Assigned to"," ",F?"you":w.assignedName||"technician"]}),V&&f.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:999,background:"#fee2e2",color:"#b91c1c"},children:"SLA > 30 min"})]}),f.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",textAlign:"right"},children:f.jsxs("div",{children:["Age: ",M]})})]}),f.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[f.jsx("button",{type:"button",onClick:()=>p(w),style:{fontSize:"0.8rem",padding:"4px 9px",borderRadius:999,border:"1px solid #93c5fd",background:"#eff6ff",color:"#1d4ed8",cursor:"pointer"},children:"View full details"}),!w.assignedTo&&f.jsx("button",{type:"button",onClick:()=>k(w),style:{fontSize:"0.8rem",padding:"5px 10px",borderRadius:999,border:"1px solid #22c55e",background:"#ecfdf5",color:"#15803d",cursor:"pointer"},children:"Assign to me"}),F&&w.status==="New"&&f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:()=>b(w),style:{fontSize:"0.8rem",padding:"5px 10px",borderRadius:999,border:"1px solid #f97316",background:"#fff7ed",color:"#c2410c",cursor:"pointer"},children:"Start work"}),f.jsx("button",{type:"button",onClick:()=>x(w),style:{fontSize:"0.8rem",padding:"5px 10px",borderRadius:999,border:"1px solid #d1d5db",background:"white",color:"#4b5563",cursor:"pointer"},children:"Release"})]}),F&&w.status==="In Progress"&&f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:()=>R(w),style:{fontSize:"0.8rem",padding:"5px 10px",borderRadius:999,border:"1px solid #22c55e",background:"#ecfdf5",color:"#15803d",cursor:"pointer"},children:"Resolve"}),f.jsx("button",{type:"button",onClick:()=>x(w),style:{fontSize:"0.8rem",padding:"5px 10px",borderRadius:999,border:"1px solid #d1d5db",background:"white",color:"#4b5563",cursor:"pointer"},children:"Release"})]})]})]},w._docId)})})]})]})}const pC="incidents_v1";function mC(){try{const t=localStorage.getItem(pC);return t?JSON.parse(t):[]}catch{return[]}}function Ag(t,e){return t==="priority"?e==="High"?{bg:"#fee2e2",color:"#b91c1c"}:e==="Medium"?{bg:"#fef3c7",color:"#92400e"}:{bg:"#dcfce7",color:"#166534"}:e==="Resolved"?{bg:"#dcfce7",color:"#15803d"}:e==="In Progress"||e==="Assigned"?{bg:"#e0f2fe",color:"#0369a1"}:{bg:"#f3f4f6",color:"#374151"}}function gC(){const{user:t}=lr(),[e,n]=z.useState([]);return z.useEffect(()=>{const i=mC().filter(s=>s.reporterEmail===((t==null?void 0:t.email)||"anonymous"));n(i)},[t]),f.jsxs("div",{children:[f.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{children:[f.jsx("h2",{style:{fontSize:"1.2rem",fontWeight:600},children:"My Incident History"}),f.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"All incidents you have reported on campus."})]}),f.jsx(kt,{to:"/reporter/dashboard",style:{fontSize:"0.85rem",color:"#2563eb",textDecoration:"none"},children:" Back to dashboard"})]}),e.length===0?f.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"No incidents yet. Create your first one from the dashboard."}):f.jsx("div",{style:{overflowX:"auto",borderRadius:12,border:"1px solid #e5e7eb",background:"white",boxShadow:"0 10px 26px rgba(15,23,42,0.06)"},children:f.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[f.jsx("thead",{children:f.jsx("tr",{style:{background:"#f9fafb",textAlign:"left"},children:["Title","Category","Location","Priority","Status","Created at"].map(r=>f.jsx("th",{style:{padding:"10px 12px",borderBottom:"1px solid #e5e7eb",color:"#6b7280",fontWeight:500},children:r},r))})}),f.jsx("tbody",{children:e.map(r=>{const i=Ag("priority",r.priority),s=Ag("status",r.status);return f.jsxs("tr",{children:[f.jsxs("td",{style:{padding:"9px 12px",borderBottom:"1px solid #f3f4f6",maxWidth:220},children:[f.jsx("div",{style:{fontWeight:500,color:"#111827",marginBottom:2},children:r.title}),f.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:r.description,children:r.description})]}),f.jsx("td",{style:{padding:"9px 12px",borderBottom:"1px solid #f3f4f6"},children:r.category}),f.jsx("td",{style:{padding:"9px 12px",borderBottom:"1px solid #f3f4f6"},children:r.location}),f.jsx("td",{style:{padding:"9px 12px",borderBottom:"1px solid #f3f4f6"},children:f.jsx("span",{style:{padding:"2px 8px",borderRadius:999,background:i.bg,color:i.color},children:r.priority})}),f.jsx("td",{style:{padding:"9px 12px",borderBottom:"1px solid #f3f4f6"},children:f.jsx("span",{style:{padding:"2px 8px",borderRadius:999,background:s.bg,color:s.color},children:r.status})}),f.jsx("td",{style:{padding:"9px 12px",borderBottom:"1px solid #f3f4f6",whiteSpace:"nowrap"},children:new Date(r.createdAt).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"})})]},r.id)})})]})})]})}const yC="notifications_v1";function vC(){try{const t=localStorage.getItem(yC);return t?JSON.parse(t):[]}catch{return[]}}function _C(){const{user:t}=lr(),[e,n]=z.useState([]);z.useEffect(()=>{const s=vC().filter(o=>!(o.targetRole&&o.targetRole!==(t==null?void 0:t.role)||o.targetEmail&&o.targetEmail!==(t==null?void 0:t.email)));s.sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime()),n(s)},[t]);const r=(t==null?void 0:t.role)==="admin"?"/admin/dashboard":(t==null?void 0:t.role)==="technician"?"/technician/dashboard":"/reporter/dashboard";return f.jsxs("div",{style:{display:"grid",gap:16},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs("div",{children:[f.jsx("h2",{style:{fontSize:"1.2rem",fontWeight:600},children:"Notifications"}),f.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Smart alerts for new incidents, status changes and risk patterns."})]}),f.jsx(kt,{to:r,style:{fontSize:"0.85rem",color:"#2563eb",textDecoration:"none"},children:" Back to dashboard"})]}),e.length===0?f.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"No notifications yet. As you create and update incidents, alerts will appear here."}):f.jsx("div",{style:{display:"grid",gap:10,padding:12,borderRadius:16,background:"white",boxShadow:"0 12px 26px rgba(15,23,42,0.08)"},children:e.map(i=>f.jsxs("div",{style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",background:"#f9fafb"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[f.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"#0f172a"},children:i.title||"System alert"}),f.jsx("span",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:new Date(i.createdAt).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"})})]}),f.jsx("p",{style:{fontSize:"0.85rem",color:"#4b5563"},children:i.message})]},i.id))})]})}function ds({children:t,allowedRoles:e}){const{user:n}=lr();return n?e&&!e.includes(n.role)?f.jsx(cm,{to:"/login",replace:!0}):t:f.jsx(cm,{to:"/login",replace:!0})}function wC(){var n;const{user:t,logout:e}=lr();return f.jsxs("div",{className:"app-shell",children:[f.jsx("div",{className:"app-bg"}),f.jsxs("div",{className:"app-content",children:[f.jsxs("header",{style:{padding:"10px 24px",background:"#111827",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,zIndex:20,borderRadius:18,marginTop:12,marginBottom:16,boxShadow:"0 18px 45px rgba(15,23,42,0.85)"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[f.jsx("div",{style:{width:28,height:28,borderRadius:999,background:"linear-gradient(135deg, #2563eb, #22c55e)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:700},children:"IT"}),f.jsx("h1",{style:{fontSize:"1.45rem",fontWeight:800,color:"#ffffff",textShadow:"0 0 10px #22c55e,0 0 18px #22c55e,0 0 26px #22c55e"},children:"Smart Campus Incident Tracker"})]}),f.jsxs("nav",{style:{display:"flex",alignItems:"center",gap:12},children:[f.jsx(kt,{to:"/",style:{color:"#e5e7eb",fontSize:"0.9rem",textDecoration:"none"},children:"Home"}),!t&&f.jsxs(f.Fragment,{children:[f.jsx(kt,{to:"/login",style:{color:"#e5e7eb",fontSize:"0.9rem"},children:"Login"}),f.jsx(kt,{to:"/register",style:{color:"#e5e7eb",fontSize:"0.9rem"},children:"Register"})]}),t&&f.jsxs(f.Fragment,{children:[f.jsx(kt,{to:"/notifications",style:{color:"#e5e7eb",fontSize:"0.85rem"},children:" Notifications"}),f.jsxs("span",{style:{fontSize:"0.8rem",color:"#9ca3af"},children:[(n=t.role)==null?void 0:n.toUpperCase(),"  ",t.name]}),f.jsx("button",{onClick:e,style:{fontSize:"0.8rem",padding:"4px 10px",borderRadius:999,border:"1px solid #4b5563",background:"transparent",color:"#e5e7eb",cursor:"pointer"},children:"Logout"})]})]})]}),f.jsx("main",{style:{padding:"8px 8px 24px"},children:f.jsxs(VT,{children:[f.jsx(an,{path:"/",element:f.jsx(HT,{})}),f.jsx(an,{path:"/login",element:f.jsx(QT,{})}),f.jsx(an,{path:"/register",element:f.jsx(XT,{})}),f.jsx(an,{path:"/reporter/dashboard",element:f.jsx(ds,{allowedRoles:["reporter"],children:f.jsx(uC,{})})}),f.jsx(an,{path:"/reporter/incidents",element:f.jsx(ds,{allowedRoles:["reporter"],children:f.jsx(gC,{})})}),f.jsx(an,{path:"/admin/dashboard",element:f.jsx(ds,{allowedRoles:["admin"],children:f.jsx(hC,{})})}),f.jsx(an,{path:"/technician/dashboard",element:f.jsx(ds,{allowedRoles:["technician"],children:f.jsx(fC,{})})}),f.jsx(an,{path:"/notifications",element:f.jsx(ds,{allowedRoles:["reporter","admin","technician"],children:f.jsx(_C,{})})})]})})]})]})}Qu.createRoot(document.getElementById("root")).render(f.jsx(Lg.StrictMode,{children:f.jsx(zT,{children:f.jsx(WT,{children:f.jsx(wC,{})})})}));
