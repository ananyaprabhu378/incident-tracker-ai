function m1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function g1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rg={exports:{}},dl={},Cg={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ho=Symbol.for("react.element"),y1=Symbol.for("react.portal"),v1=Symbol.for("react.fragment"),_1=Symbol.for("react.strict_mode"),w1=Symbol.for("react.profiler"),E1=Symbol.for("react.provider"),x1=Symbol.for("react.context"),T1=Symbol.for("react.forward_ref"),S1=Symbol.for("react.suspense"),I1=Symbol.for("react.memo"),A1=Symbol.for("react.lazy"),Qf=Symbol.iterator;function R1(t){return t===null||typeof t!="object"?null:(t=Qf&&t[Qf]||t["@@iterator"],typeof t=="function"?t:null)}var Pg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kg=Object.assign,bg={};function bi(t,e,n){this.props=t,this.context=e,this.refs=bg,this.updater=n||Pg}bi.prototype.isReactComponent={};bi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ng(){}Ng.prototype=bi.prototype;function ph(t,e,n){this.props=t,this.context=e,this.refs=bg,this.updater=n||Pg}var mh=ph.prototype=new Ng;mh.constructor=ph;kg(mh,bi.prototype);mh.isPureReactComponent=!0;var Kf=Array.isArray,Vg=Object.prototype.hasOwnProperty,gh={current:null},Dg={key:!0,ref:!0,__self:!0,__source:!0};function jg(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Vg.call(e,r)&&!Dg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ho,type:t,key:s,ref:o,props:i,_owner:gh.current}}function C1(t,e){return{$$typeof:ho,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ho}function P1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Yf=/\/+/g;function du(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P1(""+t.key):e.toString(36)}function la(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ho:case y1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+du(o,0):r,Kf(i)?(n="",t!=null&&(n=t.replace(Yf,"$&/")+"/"),la(i,e,n,"",function(h){return h})):i!=null&&(yh(i)&&(i=C1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Yf,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Kf(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+du(s,l);o+=la(s,e,n,u,i)}else if(u=R1(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+du(s,l++),o+=la(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mo(t,e,n){if(t==null)return t;var r=[],i=0;return la(t,r,"","",function(s){return e.call(n,s,i++)}),r}function k1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var lt={current:null},ua={transition:null},b1={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:ua,ReactCurrentOwner:gh};function Og(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Mo,forEach:function(t,e,n){Mo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mo(t,function(){e++}),e},toArray:function(t){return Mo(t,function(e){return e})||[]},only:function(t){if(!yh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=bi;Z.Fragment=v1;Z.Profiler=w1;Z.PureComponent=ph;Z.StrictMode=_1;Z.Suspense=S1;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b1;Z.act=Og;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=kg({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Vg.call(e,u)&&!Dg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:ho,type:t.type,key:i,ref:s,props:r,_owner:o}};Z.createContext=function(t){return t={$$typeof:x1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:E1,_context:t},t.Consumer=t};Z.createElement=jg;Z.createFactory=function(t){var e=jg.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:T1,render:t}};Z.isValidElement=yh;Z.lazy=function(t){return{$$typeof:A1,_payload:{_status:-1,_result:t},_init:k1}};Z.memo=function(t,e){return{$$typeof:I1,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=ua.transition;ua.transition={};try{t()}finally{ua.transition=e}};Z.unstable_act=Og;Z.useCallback=function(t,e){return lt.current.useCallback(t,e)};Z.useContext=function(t){return lt.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return lt.current.useDeferredValue(t)};Z.useEffect=function(t,e){return lt.current.useEffect(t,e)};Z.useId=function(){return lt.current.useId()};Z.useImperativeHandle=function(t,e,n){return lt.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return lt.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return lt.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return lt.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return lt.current.useReducer(t,e,n)};Z.useRef=function(t){return lt.current.useRef(t)};Z.useState=function(t){return lt.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return lt.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return lt.current.useTransition()};Z.version="18.3.1";Cg.exports=Z;var z=Cg.exports;const Lg=g1(z),N1=m1({__proto__:null,default:Lg},[z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V1=z,D1=Symbol.for("react.element"),j1=Symbol.for("react.fragment"),O1=Object.prototype.hasOwnProperty,L1=V1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,M1={key:!0,ref:!0,__self:!0,__source:!0};function Mg(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)O1.call(e,r)&&!M1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:D1,type:t,key:s,ref:o,props:i,_owner:L1.current}}dl.Fragment=j1;dl.jsx=Mg;dl.jsxs=Mg;Rg.exports=dl;var d=Rg.exports,Ku={},Fg={exports:{}},Tt={},zg={exports:{}},Ug={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,$){var K=F.length;F.push($);e:for(;0<K;){var ee=K-1>>>1,oe=F[ee];if(0<i(oe,$))F[ee]=$,F[K]=oe,K=ee;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var $=F[0],K=F.pop();if(K!==$){F[0]=K;e:for(var ee=0,oe=F.length,Ce=oe>>>1;ee<Ce;){var Me=2*(ee+1)-1,jt=F[Me],rt=Me+1,Ot=F[rt];if(0>i(jt,K))rt<oe&&0>i(Ot,jt)?(F[ee]=Ot,F[rt]=K,ee=rt):(F[ee]=jt,F[Me]=K,ee=Me);else if(rt<oe&&0>i(Ot,K))F[ee]=Ot,F[rt]=K,ee=rt;else break e}}return $}function i(F,$){var K=F.sortIndex-$.sortIndex;return K!==0?K:F.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,m=null,y=3,A=!1,b=!1,N=!1,P=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var $=n(h);$!==null;){if($.callback===null)r(h);else if($.startTime<=F)r(h),$.sortIndex=$.expirationTime,e(u,$);else break;$=n(h)}}function C(F){if(N=!1,w(F),!b)if(n(u)!==null)b=!0,It(O);else{var $=n(h);$!==null&&Dt(C,$.startTime-F)}}function O(F,$){b=!1,N&&(N=!1,T(g),g=-1),A=!0;var K=y;try{for(w($),m=n(u);m!==null&&(!(m.expirationTime>$)||F&&!R());){var ee=m.callback;if(typeof ee=="function"){m.callback=null,y=m.priorityLevel;var oe=ee(m.expirationTime<=$);$=t.unstable_now(),typeof oe=="function"?m.callback=oe:m===n(u)&&r(u),w($)}else r(u);m=n(u)}if(m!==null)var Ce=!0;else{var Me=n(h);Me!==null&&Dt(C,Me.startTime-$),Ce=!1}return Ce}finally{m=null,y=K,A=!1}}var j=!1,E=null,g=-1,x=5,I=-1;function R(){return!(t.unstable_now()-I<x)}function k(){if(E!==null){var F=t.unstable_now();I=F;var $=!0;try{$=E(!0,F)}finally{$?S():(j=!1,E=null)}}else j=!1}var S;if(typeof _=="function")S=function(){_(k)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Re=de.port2;de.port1.onmessage=k,S=function(){Re.postMessage(null)}}else S=function(){P(k,0)};function It(F){E=F,j||(j=!0,S())}function Dt(F,$){g=P(function(){F(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){b||A||(b=!0,It(O))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(F){switch(y){case 1:case 2:case 3:var $=3;break;default:$=y}var K=y;y=$;try{return F()}finally{y=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,$){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var K=y;y=F;try{return $()}finally{y=K}},t.unstable_scheduleCallback=function(F,$,K){var ee=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ee+K:ee):K=ee,F){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=K+oe,F={id:p++,callback:$,priorityLevel:F,startTime:K,expirationTime:oe,sortIndex:-1},K>ee?(F.sortIndex=K,e(h,F),n(u)===null&&F===n(h)&&(N?(T(g),g=-1):N=!0,Dt(C,K-ee))):(F.sortIndex=oe,e(u,F),b||A||(b=!0,It(O))),F},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(F){var $=y;return function(){var K=y;y=$;try{return F.apply(this,arguments)}finally{y=K}}}})(Ug);zg.exports=Ug;var F1=zg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z1=z,xt=F1;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bg=new Set,Os={};function Lr(t,e){vi(t,e),vi(t+"Capture",e)}function vi(t,e){for(Os[t]=e,t=0;t<e.length;t++)Bg.add(e[t])}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yu=Object.prototype.hasOwnProperty,U1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xf={},Jf={};function B1(t){return Yu.call(Jf,t)?!0:Yu.call(Xf,t)?!1:U1.test(t)?Jf[t]=!0:(Xf[t]=!0,!1)}function $1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function H1(t,e,n,r){if(e===null||typeof e>"u"||$1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ge[t]=new ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ge[e]=new ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ge[t]=new ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ge[t]=new ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ge[t]=new ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ge[t]=new ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ge[t]=new ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ge[t]=new ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ge[t]=new ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var vh=/[\-:]([a-z])/g;function _h(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vh,_h);Ge[e]=new ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vh,_h);Ge[e]=new ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vh,_h);Ge[e]=new ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ge[t]=new ut(t,1,!1,t.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ge[t]=new ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function wh(t,e,n,r){var i=Ge.hasOwnProperty(e)?Ge[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(H1(e,n,i,r)&&(n=null),r||i===null?B1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var wn=z1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fo=Symbol.for("react.element"),Xr=Symbol.for("react.portal"),Jr=Symbol.for("react.fragment"),Eh=Symbol.for("react.strict_mode"),Xu=Symbol.for("react.profiler"),$g=Symbol.for("react.provider"),Hg=Symbol.for("react.context"),xh=Symbol.for("react.forward_ref"),Ju=Symbol.for("react.suspense"),Zu=Symbol.for("react.suspense_list"),Th=Symbol.for("react.memo"),Pn=Symbol.for("react.lazy"),Wg=Symbol.for("react.offscreen"),Zf=Symbol.iterator;function ss(t){return t===null||typeof t!="object"?null:(t=Zf&&t[Zf]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,fu;function ps(t){if(fu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fu=e&&e[1]||""}return`
`+fu+t}var pu=!1;function mu(t,e){if(!t||pu)return"";pu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{pu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ps(t):""}function W1(t){switch(t.tag){case 5:return ps(t.type);case 16:return ps("Lazy");case 13:return ps("Suspense");case 19:return ps("SuspenseList");case 0:case 2:case 15:return t=mu(t.type,!1),t;case 11:return t=mu(t.type.render,!1),t;case 1:return t=mu(t.type,!0),t;default:return""}}function ec(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Jr:return"Fragment";case Xr:return"Portal";case Xu:return"Profiler";case Eh:return"StrictMode";case Ju:return"Suspense";case Zu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hg:return(t.displayName||"Context")+".Consumer";case $g:return(t._context.displayName||"Context")+".Provider";case xh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Th:return e=t.displayName||null,e!==null?e:ec(t.type)||"Memo";case Pn:e=t._payload,t=t._init;try{return ec(t(e))}catch{}}return null}function q1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ec(e);case 8:return e===Eh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function G1(t){var e=qg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zo(t){t._valueTracker||(t._valueTracker=G1(t))}function Gg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Aa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tc(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ep(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qg(t,e){e=e.checked,e!=null&&wh(t,"checked",e,!1)}function nc(t,e){Qg(t,e);var n=Yn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rc(t,e.type,n):e.hasOwnProperty("defaultValue")&&rc(t,e.type,Yn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function tp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rc(t,e,n){(e!=="number"||Aa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ms=Array.isArray;function ui(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ic(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function np(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(ms(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yn(n)}}function Kg(t,e){var n=Yn(e.value),r=Yn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function rp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Yg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Yg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uo,Xg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uo=Uo||document.createElement("div"),Uo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ls(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q1=["Webkit","ms","Moz","O"];Object.keys(xs).forEach(function(t){Q1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xs[e]=xs[t]})});function Jg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xs.hasOwnProperty(t)&&xs[t]?(""+e).trim():e+"px"}function Zg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Jg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var K1=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oc(t,e){if(e){if(K1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function ac(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lc=null;function Sh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uc=null,ci=null,hi=null;function ip(t){if(t=mo(t)){if(typeof uc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=yl(e),uc(t.stateNode,t.type,e))}}function ey(t){ci?hi?hi.push(t):hi=[t]:ci=t}function ty(){if(ci){var t=ci,e=hi;if(hi=ci=null,ip(t),e)for(t=0;t<e.length;t++)ip(e[t])}}function ny(t,e){return t(e)}function ry(){}var gu=!1;function iy(t,e,n){if(gu)return t(e,n);gu=!0;try{return ny(t,e,n)}finally{gu=!1,(ci!==null||hi!==null)&&(ry(),ty())}}function Ms(t,e){var n=t.stateNode;if(n===null)return null;var r=yl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var cc=!1;if(fn)try{var os={};Object.defineProperty(os,"passive",{get:function(){cc=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{cc=!1}function Y1(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Ts=!1,Ra=null,Ca=!1,hc=null,X1={onError:function(t){Ts=!0,Ra=t}};function J1(t,e,n,r,i,s,o,l,u){Ts=!1,Ra=null,Y1.apply(X1,arguments)}function Z1(t,e,n,r,i,s,o,l,u){if(J1.apply(this,arguments),Ts){if(Ts){var h=Ra;Ts=!1,Ra=null}else throw Error(U(198));Ca||(Ca=!0,hc=h)}}function Mr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sp(t){if(Mr(t)!==t)throw Error(U(188))}function ew(t){var e=t.alternate;if(!e){if(e=Mr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return sp(i),t;if(s===r)return sp(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function oy(t){return t=ew(t),t!==null?ay(t):null}function ay(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ay(t);if(e!==null)return e;t=t.sibling}return null}var ly=xt.unstable_scheduleCallback,op=xt.unstable_cancelCallback,tw=xt.unstable_shouldYield,nw=xt.unstable_requestPaint,Ie=xt.unstable_now,rw=xt.unstable_getCurrentPriorityLevel,Ih=xt.unstable_ImmediatePriority,uy=xt.unstable_UserBlockingPriority,Pa=xt.unstable_NormalPriority,iw=xt.unstable_LowPriority,cy=xt.unstable_IdlePriority,fl=null,Xt=null;function sw(t){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(fl,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:lw,ow=Math.log,aw=Math.LN2;function lw(t){return t>>>=0,t===0?32:31-(ow(t)/aw|0)|0}var Bo=64,$o=4194304;function gs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ka(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=gs(l):(s&=o,s!==0&&(r=gs(s)))}else o=n&~i,o!==0?r=gs(o):s!==0&&(r=gs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ut(e),i=1<<n,r|=t[n],e&=~i;return r}function uw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ut(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=uw(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function dc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hy(){var t=Bo;return Bo<<=1,!(Bo&4194240)&&(Bo=64),t}function yu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ut(e),t[e]=n}function hw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ut(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ah(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ut(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var le=0;function dy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fy,Rh,py,my,gy,fc=!1,Ho=[],Ln=null,Mn=null,Fn=null,Fs=new Map,zs=new Map,bn=[],dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ap(t,e){switch(t){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":Fs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zs.delete(e.pointerId)}}function as(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=mo(e),e!==null&&Rh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function fw(t,e,n,r,i){switch(e){case"focusin":return Ln=as(Ln,t,e,n,r,i),!0;case"dragenter":return Mn=as(Mn,t,e,n,r,i),!0;case"mouseover":return Fn=as(Fn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Fs.set(s,as(Fs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,zs.set(s,as(zs.get(s)||null,t,e,n,r,i)),!0}return!1}function yy(t){var e=Er(t.target);if(e!==null){var n=Mr(e);if(n!==null){if(e=n.tag,e===13){if(e=sy(n),e!==null){t.blockedOn=e,gy(t.priority,function(){py(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ca(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lc=r,n.target.dispatchEvent(r),lc=null}else return e=mo(n),e!==null&&Rh(e),t.blockedOn=n,!1;e.shift()}return!0}function lp(t,e,n){ca(t)&&n.delete(e)}function pw(){fc=!1,Ln!==null&&ca(Ln)&&(Ln=null),Mn!==null&&ca(Mn)&&(Mn=null),Fn!==null&&ca(Fn)&&(Fn=null),Fs.forEach(lp),zs.forEach(lp)}function ls(t,e){t.blockedOn===e&&(t.blockedOn=null,fc||(fc=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,pw)))}function Us(t){function e(i){return ls(i,t)}if(0<Ho.length){ls(Ho[0],t);for(var n=1;n<Ho.length;n++){var r=Ho[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ln!==null&&ls(Ln,t),Mn!==null&&ls(Mn,t),Fn!==null&&ls(Fn,t),Fs.forEach(e),zs.forEach(e),n=0;n<bn.length;n++)r=bn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<bn.length&&(n=bn[0],n.blockedOn===null);)yy(n),n.blockedOn===null&&bn.shift()}var di=wn.ReactCurrentBatchConfig,ba=!0;function mw(t,e,n,r){var i=le,s=di.transition;di.transition=null;try{le=1,Ch(t,e,n,r)}finally{le=i,di.transition=s}}function gw(t,e,n,r){var i=le,s=di.transition;di.transition=null;try{le=4,Ch(t,e,n,r)}finally{le=i,di.transition=s}}function Ch(t,e,n,r){if(ba){var i=pc(t,e,n,r);if(i===null)Ru(t,e,r,Na,n),ap(t,r);else if(fw(i,t,e,n,r))r.stopPropagation();else if(ap(t,r),e&4&&-1<dw.indexOf(t)){for(;i!==null;){var s=mo(i);if(s!==null&&fy(s),s=pc(t,e,n,r),s===null&&Ru(t,e,r,Na,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ru(t,e,r,null,n)}}var Na=null;function pc(t,e,n,r){if(Na=null,t=Sh(r),t=Er(t),t!==null)if(e=Mr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Na=t,null}function vy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rw()){case Ih:return 1;case uy:return 4;case Pa:case iw:return 16;case cy:return 536870912;default:return 16}default:return 16}}var Vn=null,Ph=null,ha=null;function _y(){if(ha)return ha;var t,e=Ph,n=e.length,r,i="value"in Vn?Vn.value:Vn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ha=i.slice(t,1<r?1-r:void 0)}function da(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wo(){return!0}function up(){return!1}function St(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Wo:up,this.isPropagationStopped=up,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),e}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kh=St(Ni),po=we({},Ni,{view:0,detail:0}),yw=St(po),vu,_u,us,pl=we({},po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==us&&(us&&t.type==="mousemove"?(vu=t.screenX-us.screenX,_u=t.screenY-us.screenY):_u=vu=0,us=t),vu)},movementY:function(t){return"movementY"in t?t.movementY:_u}}),cp=St(pl),vw=we({},pl,{dataTransfer:0}),_w=St(vw),ww=we({},po,{relatedTarget:0}),wu=St(ww),Ew=we({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),xw=St(Ew),Tw=we({},Ni,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sw=St(Tw),Iw=we({},Ni,{data:0}),hp=St(Iw),Aw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Cw[t])?!!e[t]:!1}function bh(){return Pw}var kw=we({},po,{key:function(t){if(t.key){var e=Aw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=da(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Rw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bh,charCode:function(t){return t.type==="keypress"?da(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?da(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bw=St(kw),Nw=we({},pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dp=St(Nw),Vw=we({},po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bh}),Dw=St(Vw),jw=we({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ow=St(jw),Lw=we({},pl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mw=St(Lw),Fw=[9,13,27,32],Nh=fn&&"CompositionEvent"in window,Ss=null;fn&&"documentMode"in document&&(Ss=document.documentMode);var zw=fn&&"TextEvent"in window&&!Ss,wy=fn&&(!Nh||Ss&&8<Ss&&11>=Ss),fp=" ",pp=!1;function Ey(t,e){switch(t){case"keyup":return Fw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zr=!1;function Uw(t,e){switch(t){case"compositionend":return xy(e);case"keypress":return e.which!==32?null:(pp=!0,fp);case"textInput":return t=e.data,t===fp&&pp?null:t;default:return null}}function Bw(t,e){if(Zr)return t==="compositionend"||!Nh&&Ey(t,e)?(t=_y(),ha=Ph=Vn=null,Zr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wy&&e.locale!=="ko"?null:e.data;default:return null}}var $w={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$w[t.type]:e==="textarea"}function Ty(t,e,n,r){ey(r),e=Va(e,"onChange"),0<e.length&&(n=new kh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Is=null,Bs=null;function Hw(t){Dy(t,0)}function ml(t){var e=ni(t);if(Gg(e))return t}function Ww(t,e){if(t==="change")return e}var Sy=!1;if(fn){var Eu;if(fn){var xu="oninput"in document;if(!xu){var gp=document.createElement("div");gp.setAttribute("oninput","return;"),xu=typeof gp.oninput=="function"}Eu=xu}else Eu=!1;Sy=Eu&&(!document.documentMode||9<document.documentMode)}function yp(){Is&&(Is.detachEvent("onpropertychange",Iy),Bs=Is=null)}function Iy(t){if(t.propertyName==="value"&&ml(Bs)){var e=[];Ty(e,Bs,t,Sh(t)),iy(Hw,e)}}function qw(t,e,n){t==="focusin"?(yp(),Is=e,Bs=n,Is.attachEvent("onpropertychange",Iy)):t==="focusout"&&yp()}function Gw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ml(Bs)}function Qw(t,e){if(t==="click")return ml(e)}function Kw(t,e){if(t==="input"||t==="change")return ml(e)}function Yw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $t=typeof Object.is=="function"?Object.is:Yw;function $s(t,e){if($t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Yu.call(e,i)||!$t(t[i],e[i]))return!1}return!0}function vp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _p(t,e){var n=vp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vp(n)}}function Ay(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ay(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ry(){for(var t=window,e=Aa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Aa(t.document)}return e}function Vh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Xw(t){var e=Ry(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ay(n.ownerDocument.documentElement,n)){if(r!==null&&Vh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=_p(n,s);var o=_p(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jw=fn&&"documentMode"in document&&11>=document.documentMode,ei=null,mc=null,As=null,gc=!1;function wp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gc||ei==null||ei!==Aa(r)||(r=ei,"selectionStart"in r&&Vh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),As&&$s(As,r)||(As=r,r=Va(mc,"onSelect"),0<r.length&&(e=new kh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ei)))}function qo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ti={animationend:qo("Animation","AnimationEnd"),animationiteration:qo("Animation","AnimationIteration"),animationstart:qo("Animation","AnimationStart"),transitionend:qo("Transition","TransitionEnd")},Tu={},Cy={};fn&&(Cy=document.createElement("div").style,"AnimationEvent"in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),"TransitionEvent"in window||delete ti.transitionend.transition);function gl(t){if(Tu[t])return Tu[t];if(!ti[t])return t;var e=ti[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Cy)return Tu[t]=e[n];return t}var Py=gl("animationend"),ky=gl("animationiteration"),by=gl("animationstart"),Ny=gl("transitionend"),Vy=new Map,Ep="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(t,e){Vy.set(t,e),Lr(e,[t])}for(var Su=0;Su<Ep.length;Su++){var Iu=Ep[Su],Zw=Iu.toLowerCase(),eE=Iu[0].toUpperCase()+Iu.slice(1);ir(Zw,"on"+eE)}ir(Py,"onAnimationEnd");ir(ky,"onAnimationIteration");ir(by,"onAnimationStart");ir("dblclick","onDoubleClick");ir("focusin","onFocus");ir("focusout","onBlur");ir(Ny,"onTransitionEnd");vi("onMouseEnter",["mouseout","mouseover"]);vi("onMouseLeave",["mouseout","mouseover"]);vi("onPointerEnter",["pointerout","pointerover"]);vi("onPointerLeave",["pointerout","pointerover"]);Lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ys));function xp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Z1(r,e,void 0,t),t.currentTarget=null}function Dy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;xp(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;xp(i,l,h),s=u}}}if(Ca)throw t=hc,Ca=!1,hc=null,t}function pe(t,e){var n=e[Ec];n===void 0&&(n=e[Ec]=new Set);var r=t+"__bubble";n.has(r)||(jy(e,t,2,!1),n.add(r))}function Au(t,e,n){var r=0;e&&(r|=4),jy(n,t,r,e)}var Go="_reactListening"+Math.random().toString(36).slice(2);function Hs(t){if(!t[Go]){t[Go]=!0,Bg.forEach(function(n){n!=="selectionchange"&&(tE.has(n)||Au(n,!1,t),Au(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Go]||(e[Go]=!0,Au("selectionchange",!1,e))}}function jy(t,e,n,r){switch(vy(e)){case 1:var i=mw;break;case 4:i=gw;break;default:i=Ch}n=i.bind(null,e,n,t),i=void 0,!cc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ru(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Er(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}iy(function(){var h=s,p=Sh(n),m=[];e:{var y=Vy.get(t);if(y!==void 0){var A=kh,b=t;switch(t){case"keypress":if(da(n)===0)break e;case"keydown":case"keyup":A=bw;break;case"focusin":b="focus",A=wu;break;case"focusout":b="blur",A=wu;break;case"beforeblur":case"afterblur":A=wu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=cp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=_w;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=Dw;break;case Py:case ky:case by:A=xw;break;case Ny:A=Ow;break;case"scroll":A=yw;break;case"wheel":A=Mw;break;case"copy":case"cut":case"paste":A=Sw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=dp}var N=(e&4)!==0,P=!N&&t==="scroll",T=N?y!==null?y+"Capture":null:y;N=[];for(var _=h,w;_!==null;){w=_;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,T!==null&&(C=Ms(_,T),C!=null&&N.push(Ws(_,C,w)))),P)break;_=_.return}0<N.length&&(y=new A(y,b,null,n,p),m.push({event:y,listeners:N}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",y&&n!==lc&&(b=n.relatedTarget||n.fromElement)&&(Er(b)||b[pn]))break e;if((A||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,A?(b=n.relatedTarget||n.toElement,A=h,b=b?Er(b):null,b!==null&&(P=Mr(b),b!==P||b.tag!==5&&b.tag!==6)&&(b=null)):(A=null,b=h),A!==b)){if(N=cp,C="onMouseLeave",T="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(N=dp,C="onPointerLeave",T="onPointerEnter",_="pointer"),P=A==null?y:ni(A),w=b==null?y:ni(b),y=new N(C,_+"leave",A,n,p),y.target=P,y.relatedTarget=w,C=null,Er(p)===h&&(N=new N(T,_+"enter",b,n,p),N.target=w,N.relatedTarget=P,C=N),P=C,A&&b)t:{for(N=A,T=b,_=0,w=N;w;w=qr(w))_++;for(w=0,C=T;C;C=qr(C))w++;for(;0<_-w;)N=qr(N),_--;for(;0<w-_;)T=qr(T),w--;for(;_--;){if(N===T||T!==null&&N===T.alternate)break t;N=qr(N),T=qr(T)}N=null}else N=null;A!==null&&Tp(m,y,A,N,!1),b!==null&&P!==null&&Tp(m,P,b,N,!0)}}e:{if(y=h?ni(h):window,A=y.nodeName&&y.nodeName.toLowerCase(),A==="select"||A==="input"&&y.type==="file")var O=Ww;else if(mp(y))if(Sy)O=Kw;else{O=Gw;var j=qw}else(A=y.nodeName)&&A.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(O=Qw);if(O&&(O=O(t,h))){Ty(m,O,n,p);break e}j&&j(t,y,h),t==="focusout"&&(j=y._wrapperState)&&j.controlled&&y.type==="number"&&rc(y,"number",y.value)}switch(j=h?ni(h):window,t){case"focusin":(mp(j)||j.contentEditable==="true")&&(ei=j,mc=h,As=null);break;case"focusout":As=mc=ei=null;break;case"mousedown":gc=!0;break;case"contextmenu":case"mouseup":case"dragend":gc=!1,wp(m,n,p);break;case"selectionchange":if(Jw)break;case"keydown":case"keyup":wp(m,n,p)}var E;if(Nh)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Zr?Ey(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(wy&&n.locale!=="ko"&&(Zr||g!=="onCompositionStart"?g==="onCompositionEnd"&&Zr&&(E=_y()):(Vn=p,Ph="value"in Vn?Vn.value:Vn.textContent,Zr=!0)),j=Va(h,g),0<j.length&&(g=new hp(g,t,null,n,p),m.push({event:g,listeners:j}),E?g.data=E:(E=xy(n),E!==null&&(g.data=E)))),(E=zw?Uw(t,n):Bw(t,n))&&(h=Va(h,"onBeforeInput"),0<h.length&&(p=new hp("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=E))}Dy(m,e)})}function Ws(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Va(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ms(t,n),s!=null&&r.unshift(Ws(t,s,i)),s=Ms(t,e),s!=null&&r.push(Ws(t,s,i))),t=t.return}return r}function qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tp(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=Ms(n,s),u!=null&&o.unshift(Ws(n,u,l))):i||(u=Ms(n,s),u!=null&&o.push(Ws(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nE=/\r\n?/g,rE=/\u0000|\uFFFD/g;function Sp(t){return(typeof t=="string"?t:""+t).replace(nE,`
`).replace(rE,"")}function Qo(t,e,n){if(e=Sp(e),Sp(t)!==e&&n)throw Error(U(425))}function Da(){}var yc=null,vc=null;function _c(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wc=typeof setTimeout=="function"?setTimeout:void 0,iE=typeof clearTimeout=="function"?clearTimeout:void 0,Ip=typeof Promise=="function"?Promise:void 0,sE=typeof queueMicrotask=="function"?queueMicrotask:typeof Ip<"u"?function(t){return Ip.resolve(null).then(t).catch(oE)}:wc;function oE(t){setTimeout(function(){throw t})}function Cu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Us(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Us(e)}function zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ap(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vi=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Vi,qs="__reactProps$"+Vi,pn="__reactContainer$"+Vi,Ec="__reactEvents$"+Vi,aE="__reactListeners$"+Vi,lE="__reactHandles$"+Vi;function Er(t){var e=t[Yt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pn]||n[Yt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ap(t);t!==null;){if(n=t[Yt])return n;t=Ap(t)}return e}t=n,n=t.parentNode}return null}function mo(t){return t=t[Yt]||t[pn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function yl(t){return t[qs]||null}var xc=[],ri=-1;function sr(t){return{current:t}}function ge(t){0>ri||(t.current=xc[ri],xc[ri]=null,ri--)}function he(t,e){ri++,xc[ri]=t.current,t.current=e}var Xn={},nt=sr(Xn),pt=sr(!1),kr=Xn;function _i(t,e){var n=t.type.contextTypes;if(!n)return Xn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function mt(t){return t=t.childContextTypes,t!=null}function ja(){ge(pt),ge(nt)}function Rp(t,e,n){if(nt.current!==Xn)throw Error(U(168));he(nt,e),he(pt,n)}function Oy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,q1(t)||"Unknown",i));return we({},n,r)}function Oa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xn,kr=nt.current,he(nt,t),he(pt,pt.current),!0}function Cp(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Oy(t,e,kr),r.__reactInternalMemoizedMergedChildContext=t,ge(pt),ge(nt),he(nt,t)):ge(pt),he(pt,n)}var un=null,vl=!1,Pu=!1;function Ly(t){un===null?un=[t]:un.push(t)}function uE(t){vl=!0,Ly(t)}function or(){if(!Pu&&un!==null){Pu=!0;var t=0,e=le;try{var n=un;for(le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}un=null,vl=!1}catch(i){throw un!==null&&(un=un.slice(t+1)),ly(Ih,or),i}finally{le=e,Pu=!1}}return null}var ii=[],si=0,La=null,Ma=0,At=[],Rt=0,br=null,cn=1,hn="";function vr(t,e){ii[si++]=Ma,ii[si++]=La,La=t,Ma=e}function My(t,e,n){At[Rt++]=cn,At[Rt++]=hn,At[Rt++]=br,br=t;var r=cn;t=hn;var i=32-Ut(r)-1;r&=~(1<<i),n+=1;var s=32-Ut(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,cn=1<<32-Ut(e)+i|n<<i|r,hn=s+t}else cn=1<<s|n<<i|r,hn=t}function Dh(t){t.return!==null&&(vr(t,1),My(t,1,0))}function jh(t){for(;t===La;)La=ii[--si],ii[si]=null,Ma=ii[--si],ii[si]=null;for(;t===br;)br=At[--Rt],At[Rt]=null,hn=At[--Rt],At[Rt]=null,cn=At[--Rt],At[Rt]=null}var Et=null,_t=null,ye=!1,zt=null;function Fy(t,e){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Et=t,_t=zn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Et=t,_t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=br!==null?{id:cn,overflow:hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Et=t,_t=null,!0):!1;default:return!1}}function Tc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sc(t){if(ye){var e=_t;if(e){var n=e;if(!Pp(t,e)){if(Tc(t))throw Error(U(418));e=zn(n.nextSibling);var r=Et;e&&Pp(t,e)?Fy(r,n):(t.flags=t.flags&-4097|2,ye=!1,Et=t)}}else{if(Tc(t))throw Error(U(418));t.flags=t.flags&-4097|2,ye=!1,Et=t}}}function kp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Et=t}function Ko(t){if(t!==Et)return!1;if(!ye)return kp(t),ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_c(t.type,t.memoizedProps)),e&&(e=_t)){if(Tc(t))throw zy(),Error(U(418));for(;e;)Fy(t,e),e=zn(e.nextSibling)}if(kp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_t=zn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_t=null}}else _t=Et?zn(t.stateNode.nextSibling):null;return!0}function zy(){for(var t=_t;t;)t=zn(t.nextSibling)}function wi(){_t=Et=null,ye=!1}function Oh(t){zt===null?zt=[t]:zt.push(t)}var cE=wn.ReactCurrentBatchConfig;function cs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Yo(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bp(t){var e=t._init;return e(t._payload)}function Uy(t){function e(T,_){if(t){var w=T.deletions;w===null?(T.deletions=[_],T.flags|=16):w.push(_)}}function n(T,_){if(!t)return null;for(;_!==null;)e(T,_),_=_.sibling;return null}function r(T,_){for(T=new Map;_!==null;)_.key!==null?T.set(_.key,_):T.set(_.index,_),_=_.sibling;return T}function i(T,_){return T=Hn(T,_),T.index=0,T.sibling=null,T}function s(T,_,w){return T.index=w,t?(w=T.alternate,w!==null?(w=w.index,w<_?(T.flags|=2,_):w):(T.flags|=2,_)):(T.flags|=1048576,_)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,_,w,C){return _===null||_.tag!==6?(_=Ou(w,T.mode,C),_.return=T,_):(_=i(_,w),_.return=T,_)}function u(T,_,w,C){var O=w.type;return O===Jr?p(T,_,w.props.children,C,w.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Pn&&bp(O)===_.type)?(C=i(_,w.props),C.ref=cs(T,_,w),C.return=T,C):(C=_a(w.type,w.key,w.props,null,T.mode,C),C.ref=cs(T,_,w),C.return=T,C)}function h(T,_,w,C){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=Lu(w,T.mode,C),_.return=T,_):(_=i(_,w.children||[]),_.return=T,_)}function p(T,_,w,C,O){return _===null||_.tag!==7?(_=Ar(w,T.mode,C,O),_.return=T,_):(_=i(_,w),_.return=T,_)}function m(T,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Ou(""+_,T.mode,w),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Fo:return w=_a(_.type,_.key,_.props,null,T.mode,w),w.ref=cs(T,null,_),w.return=T,w;case Xr:return _=Lu(_,T.mode,w),_.return=T,_;case Pn:var C=_._init;return m(T,C(_._payload),w)}if(ms(_)||ss(_))return _=Ar(_,T.mode,w,null),_.return=T,_;Yo(T,_)}return null}function y(T,_,w,C){var O=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:l(T,_,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fo:return w.key===O?u(T,_,w,C):null;case Xr:return w.key===O?h(T,_,w,C):null;case Pn:return O=w._init,y(T,_,O(w._payload),C)}if(ms(w)||ss(w))return O!==null?null:p(T,_,w,C,null);Yo(T,w)}return null}function A(T,_,w,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return T=T.get(w)||null,l(_,T,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Fo:return T=T.get(C.key===null?w:C.key)||null,u(_,T,C,O);case Xr:return T=T.get(C.key===null?w:C.key)||null,h(_,T,C,O);case Pn:var j=C._init;return A(T,_,w,j(C._payload),O)}if(ms(C)||ss(C))return T=T.get(w)||null,p(_,T,C,O,null);Yo(_,C)}return null}function b(T,_,w,C){for(var O=null,j=null,E=_,g=_=0,x=null;E!==null&&g<w.length;g++){E.index>g?(x=E,E=null):x=E.sibling;var I=y(T,E,w[g],C);if(I===null){E===null&&(E=x);break}t&&E&&I.alternate===null&&e(T,E),_=s(I,_,g),j===null?O=I:j.sibling=I,j=I,E=x}if(g===w.length)return n(T,E),ye&&vr(T,g),O;if(E===null){for(;g<w.length;g++)E=m(T,w[g],C),E!==null&&(_=s(E,_,g),j===null?O=E:j.sibling=E,j=E);return ye&&vr(T,g),O}for(E=r(T,E);g<w.length;g++)x=A(E,T,g,w[g],C),x!==null&&(t&&x.alternate!==null&&E.delete(x.key===null?g:x.key),_=s(x,_,g),j===null?O=x:j.sibling=x,j=x);return t&&E.forEach(function(R){return e(T,R)}),ye&&vr(T,g),O}function N(T,_,w,C){var O=ss(w);if(typeof O!="function")throw Error(U(150));if(w=O.call(w),w==null)throw Error(U(151));for(var j=O=null,E=_,g=_=0,x=null,I=w.next();E!==null&&!I.done;g++,I=w.next()){E.index>g?(x=E,E=null):x=E.sibling;var R=y(T,E,I.value,C);if(R===null){E===null&&(E=x);break}t&&E&&R.alternate===null&&e(T,E),_=s(R,_,g),j===null?O=R:j.sibling=R,j=R,E=x}if(I.done)return n(T,E),ye&&vr(T,g),O;if(E===null){for(;!I.done;g++,I=w.next())I=m(T,I.value,C),I!==null&&(_=s(I,_,g),j===null?O=I:j.sibling=I,j=I);return ye&&vr(T,g),O}for(E=r(T,E);!I.done;g++,I=w.next())I=A(E,T,g,I.value,C),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?g:I.key),_=s(I,_,g),j===null?O=I:j.sibling=I,j=I);return t&&E.forEach(function(k){return e(T,k)}),ye&&vr(T,g),O}function P(T,_,w,C){if(typeof w=="object"&&w!==null&&w.type===Jr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Fo:e:{for(var O=w.key,j=_;j!==null;){if(j.key===O){if(O=w.type,O===Jr){if(j.tag===7){n(T,j.sibling),_=i(j,w.props.children),_.return=T,T=_;break e}}else if(j.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Pn&&bp(O)===j.type){n(T,j.sibling),_=i(j,w.props),_.ref=cs(T,j,w),_.return=T,T=_;break e}n(T,j);break}else e(T,j);j=j.sibling}w.type===Jr?(_=Ar(w.props.children,T.mode,C,w.key),_.return=T,T=_):(C=_a(w.type,w.key,w.props,null,T.mode,C),C.ref=cs(T,_,w),C.return=T,T=C)}return o(T);case Xr:e:{for(j=w.key;_!==null;){if(_.key===j)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(T,_.sibling),_=i(_,w.children||[]),_.return=T,T=_;break e}else{n(T,_);break}else e(T,_);_=_.sibling}_=Lu(w,T.mode,C),_.return=T,T=_}return o(T);case Pn:return j=w._init,P(T,_,j(w._payload),C)}if(ms(w))return b(T,_,w,C);if(ss(w))return N(T,_,w,C);Yo(T,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(T,_.sibling),_=i(_,w),_.return=T,T=_):(n(T,_),_=Ou(w,T.mode,C),_.return=T,T=_),o(T)):n(T,_)}return P}var Ei=Uy(!0),By=Uy(!1),Fa=sr(null),za=null,oi=null,Lh=null;function Mh(){Lh=oi=za=null}function Fh(t){var e=Fa.current;ge(Fa),t._currentValue=e}function Ic(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fi(t,e){za=t,Lh=oi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ft=!0),t.firstContext=null)}function Nt(t){var e=t._currentValue;if(Lh!==t)if(t={context:t,memoizedValue:e,next:null},oi===null){if(za===null)throw Error(U(308));oi=t,za.dependencies={lanes:0,firstContext:t}}else oi=oi.next=t;return e}var xr=null;function zh(t){xr===null?xr=[t]:xr.push(t)}function $y(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,zh(e)):(n.next=i.next,i.next=n),e.interleaved=n,mn(t,r)}function mn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kn=!1;function Uh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Un(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,mn(t,n)}return i=r.interleaved,i===null?(e.next=e,zh(r)):(e.next=i.next,i.next=e),r.interleaved=e,mn(t,n)}function fa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ah(t,n)}}function Np(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ua(t,e,n,r){var i=t.updateQueue;kn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,p=h=u=null,l=s;do{var y=l.lane,A=l.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,N=l;switch(y=e,A=n,N.tag){case 1:if(b=N.payload,typeof b=="function"){m=b.call(A,m,y);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=N.payload,y=typeof b=="function"?b.call(A,m,y):b,y==null)break e;m=we({},m,y);break e;case 2:kn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[l]:y.push(l))}else A={eventTime:A,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=A,u=m):p=p.next=A,o|=y;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(p===null&&(u=m),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Vr|=o,t.lanes=o,t.memoizedState=m}}function Vp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var go={},Jt=sr(go),Gs=sr(go),Qs=sr(go);function Tr(t){if(t===go)throw Error(U(174));return t}function Bh(t,e){switch(he(Qs,e),he(Gs,t),he(Jt,go),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sc(e,t)}ge(Jt),he(Jt,e)}function xi(){ge(Jt),ge(Gs),ge(Qs)}function Wy(t){Tr(Qs.current);var e=Tr(Jt.current),n=sc(e,t.type);e!==n&&(he(Gs,t),he(Jt,n))}function $h(t){Gs.current===t&&(ge(Jt),ge(Gs))}var ve=sr(0);function Ba(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ku=[];function Hh(){for(var t=0;t<ku.length;t++)ku[t]._workInProgressVersionPrimary=null;ku.length=0}var pa=wn.ReactCurrentDispatcher,bu=wn.ReactCurrentBatchConfig,Nr=0,_e=null,je=null,Ue=null,$a=!1,Rs=!1,Ks=0,hE=0;function Ye(){throw Error(U(321))}function Wh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$t(t[n],e[n]))return!1;return!0}function qh(t,e,n,r,i,s){if(Nr=s,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pa.current=t===null||t.memoizedState===null?mE:gE,t=n(r,i),Rs){s=0;do{if(Rs=!1,Ks=0,25<=s)throw Error(U(301));s+=1,Ue=je=null,e.updateQueue=null,pa.current=yE,t=n(r,i)}while(Rs)}if(pa.current=Ha,e=je!==null&&je.next!==null,Nr=0,Ue=je=_e=null,$a=!1,e)throw Error(U(300));return t}function Gh(){var t=Ks!==0;return Ks=0,t}function Qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?_e.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function Vt(){if(je===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var e=Ue===null?_e.memoizedState:Ue.next;if(e!==null)Ue=e,je=t;else{if(t===null)throw Error(U(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Ue===null?_e.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function Ys(t,e){return typeof e=="function"?e(t):e}function Nu(t){var e=Vt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=je,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var p=h.lane;if((Nr&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,_e.lanes|=p,Vr|=p}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,$t(r,e.memoizedState)||(ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,_e.lanes|=s,Vr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Vu(t){var e=Vt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);$t(s,e.memoizedState)||(ft=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function qy(){}function Gy(t,e){var n=_e,r=Vt(),i=e(),s=!$t(r.memoizedState,i);if(s&&(r.memoizedState=i,ft=!0),r=r.queue,Qh(Yy.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,Xs(9,Ky.bind(null,n,r,i,e),void 0,null),Be===null)throw Error(U(349));Nr&30||Qy(n,e,i)}return i}function Qy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ky(t,e,n,r){e.value=n,e.getSnapshot=r,Xy(e)&&Jy(t)}function Yy(t,e,n){return n(function(){Xy(e)&&Jy(t)})}function Xy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$t(t,n)}catch{return!0}}function Jy(t){var e=mn(t,1);e!==null&&Bt(e,t,1,-1)}function Dp(t){var e=Qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:t},e.queue=t,t=t.dispatch=pE.bind(null,_e,t),[e.memoizedState,t]}function Xs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Zy(){return Vt().memoizedState}function ma(t,e,n,r){var i=Qt();_e.flags|=t,i.memoizedState=Xs(1|e,n,void 0,r===void 0?null:r)}function _l(t,e,n,r){var i=Vt();r=r===void 0?null:r;var s=void 0;if(je!==null){var o=je.memoizedState;if(s=o.destroy,r!==null&&Wh(r,o.deps)){i.memoizedState=Xs(e,n,s,r);return}}_e.flags|=t,i.memoizedState=Xs(1|e,n,s,r)}function jp(t,e){return ma(8390656,8,t,e)}function Qh(t,e){return _l(2048,8,t,e)}function ev(t,e){return _l(4,2,t,e)}function tv(t,e){return _l(4,4,t,e)}function nv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rv(t,e,n){return n=n!=null?n.concat([t]):null,_l(4,4,nv.bind(null,e,t),n)}function Kh(){}function iv(t,e){var n=Vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sv(t,e){var n=Vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ov(t,e,n){return Nr&21?($t(n,e)||(n=hy(),_e.lanes|=n,Vr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ft=!0),t.memoizedState=n)}function dE(t,e){var n=le;le=n!==0&&4>n?n:4,t(!0);var r=bu.transition;bu.transition={};try{t(!1),e()}finally{le=n,bu.transition=r}}function av(){return Vt().memoizedState}function fE(t,e,n){var r=$n(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lv(t))uv(e,n);else if(n=$y(t,e,n,r),n!==null){var i=at();Bt(n,t,r,i),cv(n,e,r)}}function pE(t,e,n){var r=$n(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lv(t))uv(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,$t(l,o)){var u=e.interleaved;u===null?(i.next=i,zh(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=$y(t,e,i,r),n!==null&&(i=at(),Bt(n,t,r,i),cv(n,e,r))}}function lv(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function uv(t,e){Rs=$a=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ah(t,n)}}var Ha={readContext:Nt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},mE={readContext:Nt,useCallback:function(t,e){return Qt().memoizedState=[t,e===void 0?null:e],t},useContext:Nt,useEffect:jp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ma(4194308,4,nv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ma(4194308,4,t,e)},useInsertionEffect:function(t,e){return ma(4,2,t,e)},useMemo:function(t,e){var n=Qt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=fE.bind(null,_e,t),[r.memoizedState,t]},useRef:function(t){var e=Qt();return t={current:t},e.memoizedState=t},useState:Dp,useDebugValue:Kh,useDeferredValue:function(t){return Qt().memoizedState=t},useTransition:function(){var t=Dp(!1),e=t[0];return t=dE.bind(null,t[1]),Qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_e,i=Qt();if(ye){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Be===null)throw Error(U(349));Nr&30||Qy(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,jp(Yy.bind(null,r,s,t),[t]),r.flags|=2048,Xs(9,Ky.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Qt(),e=Be.identifierPrefix;if(ye){var n=hn,r=cn;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ks++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gE={readContext:Nt,useCallback:iv,useContext:Nt,useEffect:Qh,useImperativeHandle:rv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:sv,useReducer:Nu,useRef:Zy,useState:function(){return Nu(Ys)},useDebugValue:Kh,useDeferredValue:function(t){var e=Vt();return ov(e,je.memoizedState,t)},useTransition:function(){var t=Nu(Ys)[0],e=Vt().memoizedState;return[t,e]},useMutableSource:qy,useSyncExternalStore:Gy,useId:av,unstable_isNewReconciler:!1},yE={readContext:Nt,useCallback:iv,useContext:Nt,useEffect:Qh,useImperativeHandle:rv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:sv,useReducer:Vu,useRef:Zy,useState:function(){return Vu(Ys)},useDebugValue:Kh,useDeferredValue:function(t){var e=Vt();return je===null?e.memoizedState=t:ov(e,je.memoizedState,t)},useTransition:function(){var t=Vu(Ys)[0],e=Vt().memoizedState;return[t,e]},useMutableSource:qy,useSyncExternalStore:Gy,useId:av,unstable_isNewReconciler:!1};function Mt(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ac(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wl={isMounted:function(t){return(t=t._reactInternals)?Mr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=at(),i=$n(t),s=dn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Un(t,s,i),e!==null&&(Bt(e,t,i,r),fa(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=at(),i=$n(t),s=dn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Un(t,s,i),e!==null&&(Bt(e,t,i,r),fa(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=at(),r=$n(t),i=dn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Un(t,i,r),e!==null&&(Bt(e,t,r,n),fa(e,t,r))}};function Op(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!$s(n,r)||!$s(i,s):!0}function hv(t,e,n){var r=!1,i=Xn,s=e.contextType;return typeof s=="object"&&s!==null?s=Nt(s):(i=mt(e)?kr:nt.current,r=e.contextTypes,s=(r=r!=null)?_i(t,i):Xn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Lp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wl.enqueueReplaceState(e,e.state,null)}function Rc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Uh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Nt(s):(s=mt(e)?kr:nt.current,i.context=_i(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ac(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&wl.enqueueReplaceState(i,i.state,null),Ua(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ti(t,e){try{var n="",r=e;do n+=W1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Du(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vE=typeof WeakMap=="function"?WeakMap:Map;function dv(t,e,n){n=dn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qa||(qa=!0,Mc=r),Cc(t,e)},n}function fv(t,e,n){n=dn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Cc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Cc(t,e),typeof r!="function"&&(Bn===null?Bn=new Set([this]):Bn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Mp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new vE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=NE.bind(null,t,e,n),e.then(t,t))}function Fp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=dn(-1,1),e.tag=2,Un(n,e,1))),n.lanes|=1),t)}var _E=wn.ReactCurrentOwner,ft=!1;function ot(t,e,n,r){e.child=t===null?By(e,null,n,r):Ei(e,t.child,n,r)}function Up(t,e,n,r,i){n=n.render;var s=e.ref;return fi(e,i),r=qh(t,e,n,r,s,i),n=Gh(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gn(t,e,i)):(ye&&n&&Dh(e),e.flags|=1,ot(t,e,r,i),e.child)}function Bp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!rd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,pv(t,e,s,r,i)):(t=_a(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:$s,n(o,r)&&t.ref===e.ref)return gn(t,e,i)}return e.flags|=1,t=Hn(s,r),t.ref=e.ref,t.return=e,e.child=t}function pv(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if($s(s,r)&&t.ref===e.ref)if(ft=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ft=!0);else return e.lanes=t.lanes,gn(t,e,i)}return Pc(t,e,n,r,i)}function mv(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(li,vt),vt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,he(li,vt),vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,he(li,vt),vt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,he(li,vt),vt|=r;return ot(t,e,i,n),e.child}function gv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pc(t,e,n,r,i){var s=mt(n)?kr:nt.current;return s=_i(e,s),fi(e,i),n=qh(t,e,n,r,s,i),r=Gh(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gn(t,e,i)):(ye&&r&&Dh(e),e.flags|=1,ot(t,e,n,i),e.child)}function $p(t,e,n,r,i){if(mt(n)){var s=!0;Oa(e)}else s=!1;if(fi(e,i),e.stateNode===null)ga(t,e),hv(e,n,r),Rc(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Nt(h):(h=mt(n)?kr:nt.current,h=_i(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Lp(e,o,r,h),kn=!1;var y=e.memoizedState;o.state=y,Ua(e,r,o,i),u=e.memoizedState,l!==r||y!==u||pt.current||kn?(typeof p=="function"&&(Ac(e,n,p,r),u=e.memoizedState),(l=kn||Op(e,n,l,r,y,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Hy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Mt(e.type,l),o.props=h,m=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Nt(u):(u=mt(n)?kr:nt.current,u=_i(e,u));var A=n.getDerivedStateFromProps;(p=typeof A=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||y!==u)&&Lp(e,o,r,u),kn=!1,y=e.memoizedState,o.state=y,Ua(e,r,o,i);var b=e.memoizedState;l!==m||y!==b||pt.current||kn?(typeof A=="function"&&(Ac(e,n,A,r),b=e.memoizedState),(h=kn||Op(e,n,h,r,y,b,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return kc(t,e,n,r,s,i)}function kc(t,e,n,r,i,s){gv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Cp(e,n,!1),gn(t,e,s);r=e.stateNode,_E.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ei(e,t.child,null,s),e.child=Ei(e,null,l,s)):ot(t,e,l,s),e.memoizedState=r.state,i&&Cp(e,n,!0),e.child}function yv(t){var e=t.stateNode;e.pendingContext?Rp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rp(t,e.context,!1),Bh(t,e.containerInfo)}function Hp(t,e,n,r,i){return wi(),Oh(i),e.flags|=256,ot(t,e,n,r),e.child}var bc={dehydrated:null,treeContext:null,retryLane:0};function Nc(t){return{baseLanes:t,cachePool:null,transitions:null}}function vv(t,e,n){var r=e.pendingProps,i=ve.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),he(ve,i&1),t===null)return Sc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Tl(o,r,0,null),t=Ar(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Nc(n),e.memoizedState=bc,t):Yh(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return wE(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Hn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Hn(l,s):(s=Ar(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Nc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=bc,r}return s=t.child,t=s.sibling,r=Hn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yh(t,e){return e=Tl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xo(t,e,n,r){return r!==null&&Oh(r),Ei(e,t.child,null,n),t=Yh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wE(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Du(Error(U(422))),Xo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Tl({mode:"visible",children:r.children},i,0,null),s=Ar(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ei(e,t.child,null,o),e.child.memoizedState=Nc(o),e.memoizedState=bc,s);if(!(e.mode&1))return Xo(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(U(419)),r=Du(s,r,void 0),Xo(t,e,o,r)}if(l=(o&t.childLanes)!==0,ft||l){if(r=Be,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,mn(t,i),Bt(r,t,i,-1))}return nd(),r=Du(Error(U(421))),Xo(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=VE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,_t=zn(i.nextSibling),Et=e,ye=!0,zt=null,t!==null&&(At[Rt++]=cn,At[Rt++]=hn,At[Rt++]=br,cn=t.id,hn=t.overflow,br=e),e=Yh(e,r.children),e.flags|=4096,e)}function Wp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ic(t.return,e,n)}function ju(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function _v(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ot(t,e,r.children,n),r=ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wp(t,n,e);else if(t.tag===19)Wp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(he(ve,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ba(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ju(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ba(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ju(e,!0,n,null,s);break;case"together":ju(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ga(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Hn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function EE(t,e,n){switch(e.tag){case 3:yv(e),wi();break;case 5:Wy(e);break;case 1:mt(e.type)&&Oa(e);break;case 4:Bh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;he(Fa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(he(ve,ve.current&1),e.flags|=128,null):n&e.child.childLanes?vv(t,e,n):(he(ve,ve.current&1),t=gn(t,e,n),t!==null?t.sibling:null);he(ve,ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _v(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),he(ve,ve.current),r)break;return null;case 22:case 23:return e.lanes=0,mv(t,e,n)}return gn(t,e,n)}var wv,Vc,Ev,xv;wv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vc=function(){};Ev=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Tr(Jt.current);var s=null;switch(n){case"input":i=tc(t,i),r=tc(t,r),s=[];break;case"select":i=we({},i,{value:void 0}),r=we({},r,{value:void 0}),s=[];break;case"textarea":i=ic(t,i),r=ic(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Da)}oc(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Os.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Os.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&pe("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};xv=function(t,e,n,r){n!==r&&(e.flags|=4)};function hs(t,e){if(!ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function xE(t,e,n){var r=e.pendingProps;switch(jh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(e),null;case 1:return mt(e.type)&&ja(),Xe(e),null;case 3:return r=e.stateNode,xi(),ge(pt),ge(nt),Hh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ko(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zt!==null&&(Uc(zt),zt=null))),Vc(t,e),Xe(e),null;case 5:$h(e);var i=Tr(Qs.current);if(n=e.type,t!==null&&e.stateNode!=null)Ev(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Xe(e),null}if(t=Tr(Jt.current),Ko(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Yt]=e,r[qs]=s,t=(e.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(i=0;i<ys.length;i++)pe(ys[i],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":ep(r,s),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},pe("invalid",r);break;case"textarea":np(r,s),pe("invalid",r)}oc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Qo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Qo(r.textContent,l,t),i=["children",""+l]):Os.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":zo(r),tp(r,s,!0);break;case"textarea":zo(r),rp(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Da)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Yg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yt]=e,t[qs]=r,wv(t,e,!1,!1),e.stateNode=t;e:{switch(o=ac(n,r),n){case"dialog":pe("cancel",t),pe("close",t),i=r;break;case"iframe":case"object":case"embed":pe("load",t),i=r;break;case"video":case"audio":for(i=0;i<ys.length;i++)pe(ys[i],t);i=r;break;case"source":pe("error",t),i=r;break;case"img":case"image":case"link":pe("error",t),pe("load",t),i=r;break;case"details":pe("toggle",t),i=r;break;case"input":ep(t,r),i=tc(t,r),pe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=we({},r,{value:void 0}),pe("invalid",t);break;case"textarea":np(t,r),i=ic(t,r),pe("invalid",t);break;default:i=r}oc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Zg(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Xg(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ls(t,u):typeof u=="number"&&Ls(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Os.hasOwnProperty(s)?u!=null&&s==="onScroll"&&pe("scroll",t):u!=null&&wh(t,s,u,o))}switch(n){case"input":zo(t),tp(t,r,!1);break;case"textarea":zo(t),rp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ui(t,!!r.multiple,s,!1):r.defaultValue!=null&&ui(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Da)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xe(e),null;case 6:if(t&&e.stateNode!=null)xv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Tr(Qs.current),Tr(Jt.current),Ko(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yt]=e,(s=r.nodeValue!==n)&&(t=Et,t!==null))switch(t.tag){case 3:Qo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yt]=e,e.stateNode=r}return Xe(e),null;case 13:if(ge(ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ye&&_t!==null&&e.mode&1&&!(e.flags&128))zy(),wi(),e.flags|=98560,s=!1;else if(s=Ko(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Yt]=e}else wi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xe(e),s=!1}else zt!==null&&(Uc(zt),zt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ve.current&1?Oe===0&&(Oe=3):nd())),e.updateQueue!==null&&(e.flags|=4),Xe(e),null);case 4:return xi(),Vc(t,e),t===null&&Hs(e.stateNode.containerInfo),Xe(e),null;case 10:return Fh(e.type._context),Xe(e),null;case 17:return mt(e.type)&&ja(),Xe(e),null;case 19:if(ge(ve),s=e.memoizedState,s===null)return Xe(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)hs(s,!1);else{if(Oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ba(t),o!==null){for(e.flags|=128,hs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return he(ve,ve.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ie()>Si&&(e.flags|=128,r=!0,hs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ba(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ye)return Xe(e),null}else 2*Ie()-s.renderingStartTime>Si&&n!==1073741824&&(e.flags|=128,r=!0,hs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ie(),e.sibling=null,n=ve.current,he(ve,r?n&1|2:n&1),e):(Xe(e),null);case 22:case 23:return td(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vt&1073741824&&(Xe(e),e.subtreeFlags&6&&(e.flags|=8192)):Xe(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function TE(t,e){switch(jh(e),e.tag){case 1:return mt(e.type)&&ja(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xi(),ge(pt),ge(nt),Hh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $h(e),null;case 13:if(ge(ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));wi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ge(ve),null;case 4:return xi(),null;case 10:return Fh(e.type._context),null;case 22:case 23:return td(),null;case 24:return null;default:return null}}var Jo=!1,et=!1,SE=typeof WeakSet=="function"?WeakSet:Set,q=null;function ai(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(t,e,r)}else n.current=null}function Dc(t,e,n){try{n()}catch(r){Te(t,e,r)}}var qp=!1;function IE(t,e){if(yc=ba,t=Ry(),Vh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,p=0,m=t,y=null;t:for(;;){for(var A;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(A=m.firstChild)!==null;)y=m,m=A;for(;;){if(m===t)break t;if(y===n&&++h===i&&(l=o),y===s&&++p===r&&(u=o),(A=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=A}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(vc={focusedElem:t,selectionRange:n},ba=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var N=b.memoizedProps,P=b.memoizedState,T=e.stateNode,_=T.getSnapshotBeforeUpdate(e.elementType===e.type?N:Mt(e.type,N),P);T.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(C){Te(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return b=qp,qp=!1,b}function Cs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Dc(e,n,s)}i=i.next}while(i!==r)}}function El(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Tv(t){var e=t.alternate;e!==null&&(t.alternate=null,Tv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yt],delete e[qs],delete e[Ec],delete e[aE],delete e[lE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Sv(t){return t.tag===5||t.tag===3||t.tag===4}function Gp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Oc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Da));else if(r!==4&&(t=t.child,t!==null))for(Oc(t,e,n),t=t.sibling;t!==null;)Oc(t,e,n),t=t.sibling}function Lc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lc(t,e,n),t=t.sibling;t!==null;)Lc(t,e,n),t=t.sibling}var $e=null,Ft=!1;function Rn(t,e,n){for(n=n.child;n!==null;)Iv(t,e,n),n=n.sibling}function Iv(t,e,n){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(fl,n)}catch{}switch(n.tag){case 5:et||ai(n,e);case 6:var r=$e,i=Ft;$e=null,Rn(t,e,n),$e=r,Ft=i,$e!==null&&(Ft?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(Ft?(t=$e,n=n.stateNode,t.nodeType===8?Cu(t.parentNode,n):t.nodeType===1&&Cu(t,n),Us(t)):Cu($e,n.stateNode));break;case 4:r=$e,i=Ft,$e=n.stateNode.containerInfo,Ft=!0,Rn(t,e,n),$e=r,Ft=i;break;case 0:case 11:case 14:case 15:if(!et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Dc(n,e,o),i=i.next}while(i!==r)}Rn(t,e,n);break;case 1:if(!et&&(ai(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Te(n,e,l)}Rn(t,e,n);break;case 21:Rn(t,e,n);break;case 22:n.mode&1?(et=(r=et)||n.memoizedState!==null,Rn(t,e,n),et=r):Rn(t,e,n);break;default:Rn(t,e,n)}}function Qp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SE),e.forEach(function(r){var i=DE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:$e=l.stateNode,Ft=!1;break e;case 3:$e=l.stateNode.containerInfo,Ft=!0;break e;case 4:$e=l.stateNode.containerInfo,Ft=!0;break e}l=l.return}if($e===null)throw Error(U(160));Iv(s,o,i),$e=null,Ft=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Te(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Av(e,t),e=e.sibling}function Av(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lt(e,t),Gt(t),r&4){try{Cs(3,t,t.return),El(3,t)}catch(N){Te(t,t.return,N)}try{Cs(5,t,t.return)}catch(N){Te(t,t.return,N)}}break;case 1:Lt(e,t),Gt(t),r&512&&n!==null&&ai(n,n.return);break;case 5:if(Lt(e,t),Gt(t),r&512&&n!==null&&ai(n,n.return),t.flags&32){var i=t.stateNode;try{Ls(i,"")}catch(N){Te(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Qg(i,s),ac(l,o);var h=ac(l,s);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?Zg(i,m):p==="dangerouslySetInnerHTML"?Xg(i,m):p==="children"?Ls(i,m):wh(i,p,m,h)}switch(l){case"input":nc(i,s);break;case"textarea":Kg(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?ui(i,!!s.multiple,A,!1):y!==!!s.multiple&&(s.defaultValue!=null?ui(i,!!s.multiple,s.defaultValue,!0):ui(i,!!s.multiple,s.multiple?[]:"",!1))}i[qs]=s}catch(N){Te(t,t.return,N)}}break;case 6:if(Lt(e,t),Gt(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){Te(t,t.return,N)}}break;case 3:if(Lt(e,t),Gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Us(e.containerInfo)}catch(N){Te(t,t.return,N)}break;case 4:Lt(e,t),Gt(t);break;case 13:Lt(e,t),Gt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Zh=Ie())),r&4&&Qp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(et=(h=et)||p,Lt(e,t),et=h):Lt(e,t),Gt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(q=t,p=t.child;p!==null;){for(m=q=p;q!==null;){switch(y=q,A=y.child,y.tag){case 0:case 11:case 14:case 15:Cs(4,y,y.return);break;case 1:ai(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(N){Te(r,n,N)}}break;case 5:ai(y,y.return);break;case 22:if(y.memoizedState!==null){Yp(m);continue}}A!==null?(A.return=y,q=A):Yp(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Jg("display",o))}catch(N){Te(t,t.return,N)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(N){Te(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Lt(e,t),Gt(t),r&4&&Qp(t);break;case 21:break;default:Lt(e,t),Gt(t)}}function Gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Sv(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ls(i,""),r.flags&=-33);var s=Gp(t);Lc(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Gp(t);Oc(t,l,o);break;default:throw Error(U(161))}}catch(u){Te(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AE(t,e,n){q=t,Rv(t)}function Rv(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Jo;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||et;l=Jo;var h=et;if(Jo=o,(et=u)&&!h)for(q=i;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Xp(i):u!==null?(u.return=o,q=u):Xp(i);for(;s!==null;)q=s,Rv(s),s=s.sibling;q=i,Jo=l,et=h}Kp(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):Kp(t)}}function Kp(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:et||El(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!et)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Mt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Vp(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Us(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}et||e.flags&512&&jc(e)}catch(y){Te(e,e.return,y)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Yp(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Xp(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{El(4,e)}catch(u){Te(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Te(e,i,u)}}var s=e.return;try{jc(e)}catch(u){Te(e,s,u)}break;case 5:var o=e.return;try{jc(e)}catch(u){Te(e,o,u)}}}catch(u){Te(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var RE=Math.ceil,Wa=wn.ReactCurrentDispatcher,Xh=wn.ReactCurrentOwner,bt=wn.ReactCurrentBatchConfig,se=0,Be=null,ke=null,qe=0,vt=0,li=sr(0),Oe=0,Js=null,Vr=0,xl=0,Jh=0,Ps=null,ht=null,Zh=0,Si=1/0,ln=null,qa=!1,Mc=null,Bn=null,Zo=!1,Dn=null,Ga=0,ks=0,Fc=null,ya=-1,va=0;function at(){return se&6?Ie():ya!==-1?ya:ya=Ie()}function $n(t){return t.mode&1?se&2&&qe!==0?qe&-qe:cE.transition!==null?(va===0&&(va=hy()),va):(t=le,t!==0||(t=window.event,t=t===void 0?16:vy(t.type)),t):1}function Bt(t,e,n,r){if(50<ks)throw ks=0,Fc=null,Error(U(185));fo(t,n,r),(!(se&2)||t!==Be)&&(t===Be&&(!(se&2)&&(xl|=n),Oe===4&&Nn(t,qe)),gt(t,r),n===1&&se===0&&!(e.mode&1)&&(Si=Ie()+500,vl&&or()))}function gt(t,e){var n=t.callbackNode;cw(t,e);var r=ka(t,t===Be?qe:0);if(r===0)n!==null&&op(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&op(n),e===1)t.tag===0?uE(Jp.bind(null,t)):Ly(Jp.bind(null,t)),sE(function(){!(se&6)&&or()}),n=null;else{switch(dy(r)){case 1:n=Ih;break;case 4:n=uy;break;case 16:n=Pa;break;case 536870912:n=cy;break;default:n=Pa}n=jv(n,Cv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Cv(t,e){if(ya=-1,va=0,se&6)throw Error(U(327));var n=t.callbackNode;if(pi()&&t.callbackNode!==n)return null;var r=ka(t,t===Be?qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qa(t,r);else{e=r;var i=se;se|=2;var s=kv();(Be!==t||qe!==e)&&(ln=null,Si=Ie()+500,Ir(t,e));do try{kE();break}catch(l){Pv(t,l)}while(!0);Mh(),Wa.current=s,se=i,ke!==null?e=0:(Be=null,qe=0,e=Oe)}if(e!==0){if(e===2&&(i=dc(t),i!==0&&(r=i,e=zc(t,i))),e===1)throw n=Js,Ir(t,0),Nn(t,r),gt(t,Ie()),n;if(e===6)Nn(t,r);else{if(i=t.current.alternate,!(r&30)&&!CE(i)&&(e=Qa(t,r),e===2&&(s=dc(t),s!==0&&(r=s,e=zc(t,s))),e===1))throw n=Js,Ir(t,0),Nn(t,r),gt(t,Ie()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:_r(t,ht,ln);break;case 3:if(Nn(t,r),(r&130023424)===r&&(e=Zh+500-Ie(),10<e)){if(ka(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){at(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=wc(_r.bind(null,t,ht,ln),e);break}_r(t,ht,ln);break;case 4:if(Nn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ut(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RE(r/1960))-r,10<r){t.timeoutHandle=wc(_r.bind(null,t,ht,ln),r);break}_r(t,ht,ln);break;case 5:_r(t,ht,ln);break;default:throw Error(U(329))}}}return gt(t,Ie()),t.callbackNode===n?Cv.bind(null,t):null}function zc(t,e){var n=Ps;return t.current.memoizedState.isDehydrated&&(Ir(t,e).flags|=256),t=Qa(t,e),t!==2&&(e=ht,ht=n,e!==null&&Uc(e)),t}function Uc(t){ht===null?ht=t:ht.push.apply(ht,t)}function CE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!$t(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nn(t,e){for(e&=~Jh,e&=~xl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ut(e),r=1<<n;t[n]=-1,e&=~r}}function Jp(t){if(se&6)throw Error(U(327));pi();var e=ka(t,0);if(!(e&1))return gt(t,Ie()),null;var n=Qa(t,e);if(t.tag!==0&&n===2){var r=dc(t);r!==0&&(e=r,n=zc(t,r))}if(n===1)throw n=Js,Ir(t,0),Nn(t,e),gt(t,Ie()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_r(t,ht,ln),gt(t,Ie()),null}function ed(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(Si=Ie()+500,vl&&or())}}function Dr(t){Dn!==null&&Dn.tag===0&&!(se&6)&&pi();var e=se;se|=1;var n=bt.transition,r=le;try{if(bt.transition=null,le=1,t)return t()}finally{le=r,bt.transition=n,se=e,!(se&6)&&or()}}function td(){vt=li.current,ge(li)}function Ir(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iE(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(jh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ja();break;case 3:xi(),ge(pt),ge(nt),Hh();break;case 5:$h(r);break;case 4:xi();break;case 13:ge(ve);break;case 19:ge(ve);break;case 10:Fh(r.type._context);break;case 22:case 23:td()}n=n.return}if(Be=t,ke=t=Hn(t.current,null),qe=vt=e,Oe=0,Js=null,Jh=xl=Vr=0,ht=Ps=null,xr!==null){for(e=0;e<xr.length;e++)if(n=xr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}xr=null}return t}function Pv(t,e){do{var n=ke;try{if(Mh(),pa.current=Ha,$a){for(var r=_e.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$a=!1}if(Nr=0,Ue=je=_e=null,Rs=!1,Ks=0,Xh.current=null,n===null||n.return===null){Oe=1,Js=e,ke=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=qe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var A=Fp(o);if(A!==null){A.flags&=-257,zp(A,o,l,s,e),A.mode&1&&Mp(s,h,e),e=A,u=h;var b=e.updateQueue;if(b===null){var N=new Set;N.add(u),e.updateQueue=N}else b.add(u);break e}else{if(!(e&1)){Mp(s,h,e),nd();break e}u=Error(U(426))}}else if(ye&&l.mode&1){var P=Fp(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),zp(P,o,l,s,e),Oh(Ti(u,l));break e}}s=u=Ti(u,l),Oe!==4&&(Oe=2),Ps===null?Ps=[s]:Ps.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=dv(s,u,e);Np(s,T);break e;case 1:l=u;var _=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Bn===null||!Bn.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=fv(s,l,e);Np(s,C);break e}}s=s.return}while(s!==null)}Nv(n)}catch(O){e=O,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function kv(){var t=Wa.current;return Wa.current=Ha,t===null?Ha:t}function nd(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Be===null||!(Vr&268435455)&&!(xl&268435455)||Nn(Be,qe)}function Qa(t,e){var n=se;se|=2;var r=kv();(Be!==t||qe!==e)&&(ln=null,Ir(t,e));do try{PE();break}catch(i){Pv(t,i)}while(!0);if(Mh(),se=n,Wa.current=r,ke!==null)throw Error(U(261));return Be=null,qe=0,Oe}function PE(){for(;ke!==null;)bv(ke)}function kE(){for(;ke!==null&&!tw();)bv(ke)}function bv(t){var e=Dv(t.alternate,t,vt);t.memoizedProps=t.pendingProps,e===null?Nv(t):ke=e,Xh.current=null}function Nv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TE(n,e),n!==null){n.flags&=32767,ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oe=6,ke=null;return}}else if(n=xE(n,e,vt),n!==null){ke=n;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);Oe===0&&(Oe=5)}function _r(t,e,n){var r=le,i=bt.transition;try{bt.transition=null,le=1,bE(t,e,n,r)}finally{bt.transition=i,le=r}return null}function bE(t,e,n,r){do pi();while(Dn!==null);if(se&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(hw(t,s),t===Be&&(ke=Be=null,qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zo||(Zo=!0,jv(Pa,function(){return pi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=bt.transition,bt.transition=null;var o=le;le=1;var l=se;se|=4,Xh.current=null,IE(t,n),Av(n,t),Xw(vc),ba=!!yc,vc=yc=null,t.current=n,AE(n),nw(),se=l,le=o,bt.transition=s}else t.current=n;if(Zo&&(Zo=!1,Dn=t,Ga=i),s=t.pendingLanes,s===0&&(Bn=null),sw(n.stateNode),gt(t,Ie()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qa)throw qa=!1,t=Mc,Mc=null,t;return Ga&1&&t.tag!==0&&pi(),s=t.pendingLanes,s&1?t===Fc?ks++:(ks=0,Fc=t):ks=0,or(),null}function pi(){if(Dn!==null){var t=dy(Ga),e=bt.transition,n=le;try{if(bt.transition=null,le=16>t?16:t,Dn===null)var r=!1;else{if(t=Dn,Dn=null,Ga=0,se&6)throw Error(U(331));var i=se;for(se|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(q=h;q!==null;){var p=q;switch(p.tag){case 0:case 11:case 15:Cs(8,p,s)}var m=p.child;if(m!==null)m.return=p,q=m;else for(;q!==null;){p=q;var y=p.sibling,A=p.return;if(Tv(p),p===h){q=null;break}if(y!==null){y.return=A,q=y;break}q=A}}}var b=s.alternate;if(b!==null){var N=b.child;if(N!==null){b.child=null;do{var P=N.sibling;N.sibling=null,N=P}while(N!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cs(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,q=T;break e}q=s.return}}var _=t.current;for(q=_;q!==null;){o=q;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,q=w;else e:for(o=_;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:El(9,l)}}catch(O){Te(l,l.return,O)}if(l===o){q=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,q=C;break e}q=l.return}}if(se=i,or(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(fl,t)}catch{}r=!0}return r}finally{le=n,bt.transition=e}}return!1}function Zp(t,e,n){e=Ti(n,e),e=dv(t,e,1),t=Un(t,e,1),e=at(),t!==null&&(fo(t,1,e),gt(t,e))}function Te(t,e,n){if(t.tag===3)Zp(t,t,n);else for(;e!==null;){if(e.tag===3){Zp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bn===null||!Bn.has(r))){t=Ti(n,t),t=fv(e,t,1),e=Un(e,t,1),t=at(),e!==null&&(fo(e,1,t),gt(e,t));break}}e=e.return}}function NE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=at(),t.pingedLanes|=t.suspendedLanes&n,Be===t&&(qe&n)===n&&(Oe===4||Oe===3&&(qe&130023424)===qe&&500>Ie()-Zh?Ir(t,0):Jh|=n),gt(t,e)}function Vv(t,e){e===0&&(t.mode&1?(e=$o,$o<<=1,!($o&130023424)&&($o=4194304)):e=1);var n=at();t=mn(t,e),t!==null&&(fo(t,e,n),gt(t,n))}function VE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Vv(t,n)}function DE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),Vv(t,n)}var Dv;Dv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pt.current)ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ft=!1,EE(t,e,n);ft=!!(t.flags&131072)}else ft=!1,ye&&e.flags&1048576&&My(e,Ma,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ga(t,e),t=e.pendingProps;var i=_i(e,nt.current);fi(e,n),i=qh(null,e,r,t,i,n);var s=Gh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mt(r)?(s=!0,Oa(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uh(e),i.updater=wl,e.stateNode=i,i._reactInternals=e,Rc(e,r,t,n),e=kc(null,e,r,!0,s,n)):(e.tag=0,ye&&s&&Dh(e),ot(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ga(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=OE(r),t=Mt(r,t),i){case 0:e=Pc(null,e,r,t,n);break e;case 1:e=$p(null,e,r,t,n);break e;case 11:e=Up(null,e,r,t,n);break e;case 14:e=Bp(null,e,r,Mt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mt(r,i),Pc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mt(r,i),$p(t,e,r,i,n);case 3:e:{if(yv(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Hy(t,e),Ua(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ti(Error(U(423)),e),e=Hp(t,e,r,n,i);break e}else if(r!==i){i=Ti(Error(U(424)),e),e=Hp(t,e,r,n,i);break e}else for(_t=zn(e.stateNode.containerInfo.firstChild),Et=e,ye=!0,zt=null,n=By(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wi(),r===i){e=gn(t,e,n);break e}ot(t,e,r,n)}e=e.child}return e;case 5:return Wy(e),t===null&&Sc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,_c(r,i)?o=null:s!==null&&_c(r,s)&&(e.flags|=32),gv(t,e),ot(t,e,o,n),e.child;case 6:return t===null&&Sc(e),null;case 13:return vv(t,e,n);case 4:return Bh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ei(e,null,r,n):ot(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mt(r,i),Up(t,e,r,i,n);case 7:return ot(t,e,e.pendingProps,n),e.child;case 8:return ot(t,e,e.pendingProps.children,n),e.child;case 12:return ot(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,he(Fa,r._currentValue),r._currentValue=o,s!==null)if($t(s.value,o)){if(s.children===i.children&&!pt.current){e=gn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=dn(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Ic(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ic(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ot(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,fi(e,n),i=Nt(i),r=r(i),e.flags|=1,ot(t,e,r,n),e.child;case 14:return r=e.type,i=Mt(r,e.pendingProps),i=Mt(r.type,i),Bp(t,e,r,i,n);case 15:return pv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mt(r,i),ga(t,e),e.tag=1,mt(r)?(t=!0,Oa(e)):t=!1,fi(e,n),hv(e,r,i),Rc(e,r,i,n),kc(null,e,r,!0,t,n);case 19:return _v(t,e,n);case 22:return mv(t,e,n)}throw Error(U(156,e.tag))};function jv(t,e){return ly(t,e)}function jE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,n,r){return new jE(t,e,n,r)}function rd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OE(t){if(typeof t=="function")return rd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xh)return 11;if(t===Th)return 14}return 2}function Hn(t,e){var n=t.alternate;return n===null?(n=Pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _a(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")rd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Jr:return Ar(n.children,i,s,e);case Eh:o=8,i|=8;break;case Xu:return t=Pt(12,n,e,i|2),t.elementType=Xu,t.lanes=s,t;case Ju:return t=Pt(13,n,e,i),t.elementType=Ju,t.lanes=s,t;case Zu:return t=Pt(19,n,e,i),t.elementType=Zu,t.lanes=s,t;case Wg:return Tl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $g:o=10;break e;case Hg:o=9;break e;case xh:o=11;break e;case Th:o=14;break e;case Pn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Pt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ar(t,e,n,r){return t=Pt(7,t,r,e),t.lanes=n,t}function Tl(t,e,n,r){return t=Pt(22,t,r,e),t.elementType=Wg,t.lanes=n,t.stateNode={isHidden:!1},t}function Ou(t,e,n){return t=Pt(6,t,null,e),t.lanes=n,t}function Lu(t,e,n){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yu(0),this.expirationTimes=yu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function id(t,e,n,r,i,s,o,l,u){return t=new LE(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uh(s),t}function ME(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ov(t){if(!t)return Xn;t=t._reactInternals;e:{if(Mr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(mt(n))return Oy(t,n,e)}return e}function Lv(t,e,n,r,i,s,o,l,u){return t=id(n,r,!0,t,i,s,o,l,u),t.context=Ov(null),n=t.current,r=at(),i=$n(n),s=dn(r,i),s.callback=e??null,Un(n,s,i),t.current.lanes=i,fo(t,i,r),gt(t,r),t}function Sl(t,e,n,r){var i=e.current,s=at(),o=$n(i);return n=Ov(n),e.context===null?e.context=n:e.pendingContext=n,e=dn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Un(i,e,o),t!==null&&(Bt(t,i,o,s),fa(t,i,o)),o}function Ka(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function em(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sd(t,e){em(t,e),(t=t.alternate)&&em(t,e)}function FE(){return null}var Mv=typeof reportError=="function"?reportError:function(t){console.error(t)};function od(t){this._internalRoot=t}Il.prototype.render=od.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Sl(t,e,null,null)};Il.prototype.unmount=od.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dr(function(){Sl(null,t,null,null)}),e[pn]=null}};function Il(t){this._internalRoot=t}Il.prototype.unstable_scheduleHydration=function(t){if(t){var e=my();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bn.length&&e!==0&&e<bn[n].priority;n++);bn.splice(n,0,t),n===0&&yy(t)}};function ad(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Al(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function tm(){}function zE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Ka(o);s.call(h)}}var o=Lv(e,r,t,0,null,!1,!1,"",tm);return t._reactRootContainer=o,t[pn]=o.current,Hs(t.nodeType===8?t.parentNode:t),Dr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Ka(u);l.call(h)}}var u=id(t,0,!1,null,null,!1,!1,"",tm);return t._reactRootContainer=u,t[pn]=u.current,Hs(t.nodeType===8?t.parentNode:t),Dr(function(){Sl(e,u,n,r)}),u}function Rl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=Ka(o);l.call(u)}}Sl(e,o,t,i)}else o=zE(n,e,t,i,r);return Ka(o)}fy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gs(e.pendingLanes);n!==0&&(Ah(e,n|1),gt(e,Ie()),!(se&6)&&(Si=Ie()+500,or()))}break;case 13:Dr(function(){var r=mn(t,1);if(r!==null){var i=at();Bt(r,t,1,i)}}),sd(t,1)}};Rh=function(t){if(t.tag===13){var e=mn(t,134217728);if(e!==null){var n=at();Bt(e,t,134217728,n)}sd(t,134217728)}};py=function(t){if(t.tag===13){var e=$n(t),n=mn(t,e);if(n!==null){var r=at();Bt(n,t,e,r)}sd(t,e)}};my=function(){return le};gy=function(t,e){var n=le;try{return le=t,e()}finally{le=n}};uc=function(t,e,n){switch(e){case"input":if(nc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=yl(r);if(!i)throw Error(U(90));Gg(r),nc(r,i)}}}break;case"textarea":Kg(t,n);break;case"select":e=n.value,e!=null&&ui(t,!!n.multiple,e,!1)}};ny=ed;ry=Dr;var UE={usingClientEntryPoint:!1,Events:[mo,ni,yl,ey,ty,ed]},ds={findFiberByHostInstance:Er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BE={bundleType:ds.bundleType,version:ds.version,rendererPackageName:ds.rendererPackageName,rendererConfig:ds.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oy(t),t===null?null:t.stateNode},findFiberByHostInstance:ds.findFiberByHostInstance||FE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ea.isDisabled&&ea.supportsFiber)try{fl=ea.inject(BE),Xt=ea}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UE;Tt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ad(e))throw Error(U(200));return ME(t,e,null,n)};Tt.createRoot=function(t,e){if(!ad(t))throw Error(U(299));var n=!1,r="",i=Mv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=id(t,1,!1,null,null,n,!1,r,i),t[pn]=e.current,Hs(t.nodeType===8?t.parentNode:t),new od(e)};Tt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=oy(e),t=t===null?null:t.stateNode,t};Tt.flushSync=function(t){return Dr(t)};Tt.hydrate=function(t,e,n){if(!Al(e))throw Error(U(200));return Rl(null,t,e,!0,n)};Tt.hydrateRoot=function(t,e,n){if(!ad(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Mv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Lv(e,null,t,1,n??null,i,!1,s,o),t[pn]=e.current,Hs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Il(e)};Tt.render=function(t,e,n){if(!Al(e))throw Error(U(200));return Rl(null,t,e,!1,n)};Tt.unmountComponentAtNode=function(t){if(!Al(t))throw Error(U(40));return t._reactRootContainer?(Dr(function(){Rl(null,null,t,!1,function(){t._reactRootContainer=null,t[pn]=null})}),!0):!1};Tt.unstable_batchedUpdates=ed;Tt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Al(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Rl(t,e,n,!1,r)};Tt.version="18.3.1-next-f1338f8080-20240426";function Fv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fv)}catch(t){console.error(t)}}Fv(),Fg.exports=Tt;var $E=Fg.exports,nm=$E;Ku.createRoot=nm.createRoot,Ku.hydrateRoot=nm.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zs(){return Zs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zs.apply(this,arguments)}var jn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(jn||(jn={}));const rm="popstate";function HE(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Bc("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ya(i)}return qE(e,n,null,t)}function Ae(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ld(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WE(){return Math.random().toString(36).substr(2,8)}function im(t,e){return{usr:t.state,key:t.key,idx:e}}function Bc(t,e,n,r){return n===void 0&&(n=null),Zs({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Di(e):e,{state:n,key:e&&e.key||r||WE()})}function Ya(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Di(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function qE(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=jn.Pop,u=null,h=p();h==null&&(h=0,o.replaceState(Zs({},o.state,{idx:h}),""));function p(){return(o.state||{idx:null}).idx}function m(){l=jn.Pop;let P=p(),T=P==null?null:P-h;h=P,u&&u({action:l,location:N.location,delta:T})}function y(P,T){l=jn.Push;let _=Bc(N.location,P,T);h=p()+1;let w=im(_,h),C=N.createHref(_);try{o.pushState(w,"",C)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(C)}s&&u&&u({action:l,location:N.location,delta:1})}function A(P,T){l=jn.Replace;let _=Bc(N.location,P,T);h=p();let w=im(_,h),C=N.createHref(_);o.replaceState(w,"",C),s&&u&&u({action:l,location:N.location,delta:0})}function b(P){let T=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof P=="string"?P:Ya(P);return _=_.replace(/ $/,"%20"),Ae(T,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,T)}let N={get action(){return l},get location(){return t(i,o)},listen(P){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(rm,m),u=P,()=>{i.removeEventListener(rm,m),u=null}},createHref(P){return e(i,P)},createURL:b,encodeLocation(P){let T=b(P);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:y,replace:A,go(P){return o.go(P)}};return N}var sm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sm||(sm={}));function GE(t,e,n){return n===void 0&&(n="/"),QE(t,e,n)}function QE(t,e,n,r){let i=typeof e=="string"?Di(e):e,s=ud(i.pathname||"/",n);if(s==null)return null;let o=zv(t);KE(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=ax(s);l=ix(o[u],h)}return l}function zv(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Ae(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=Wn([r,u.relativePath]),p=n.concat(u);s.children&&s.children.length>0&&(Ae(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),zv(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:nx(h,s.index),routesMeta:p})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of Uv(s.path))i(s,o,u)}),e}function Uv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Uv(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function KE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rx(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YE=/^:[\w-]+$/,XE=3,JE=2,ZE=1,ex=10,tx=-2,om=t=>t==="*";function nx(t,e){let n=t.split("/"),r=n.length;return n.some(om)&&(r+=tx),e&&(r+=JE),n.filter(i=>!om(i)).reduce((i,s)=>i+(YE.test(s)?XE:s===""?ZE:ex),r)}function rx(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function ix(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=sx({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),y=u.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Wn([s,m.pathname]),pathnameBase:dx(Wn([s,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(s=Wn([s,m.pathnameBase]))}return o}function sx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=ox(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,p,m)=>{let{paramName:y,isOptional:A}=p;if(y==="*"){let N=l[m]||"";o=s.slice(0,s.length-N.length).replace(/(.)\/+$/,"$1")}const b=l[m];return A&&!b?h[y]=void 0:h[y]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function ox(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ld(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function ax(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ld(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ud(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const lx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ux=t=>lx.test(t);function cx(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Di(t):t,s;if(n)if(ux(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),ld(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=am(n.substring(1),"/"):s=am(n,e)}else s=e;return{pathname:s,search:fx(r),hash:px(i)}}function am(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Mu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cd(t,e){let n=hx(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hd(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Di(t):(i=Zs({},t),Ae(!i.pathname||!i.pathname.includes("?"),Mu("?","pathname","search",i)),Ae(!i.pathname||!i.pathname.includes("#"),Mu("#","pathname","hash",i)),Ae(!i.search||!i.search.includes("#"),Mu("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}l=m>=0?e[m]:"/"}let u=cx(i,l),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}const Wn=t=>t.join("/").replace(/\/\/+/g,"/"),dx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,px=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Bv=["post","put","patch","delete"];new Set(Bv);const gx=["get",...Bv];new Set(gx);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eo(){return eo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eo.apply(this,arguments)}const dd=z.createContext(null),yx=z.createContext(null),ar=z.createContext(null),Cl=z.createContext(null),lr=z.createContext({outlet:null,matches:[],isDataRoute:!1}),$v=z.createContext(null);function vx(t,e){let{relative:n}=e===void 0?{}:e;ji()||Ae(!1);let{basename:r,navigator:i}=z.useContext(ar),{hash:s,pathname:o,search:l}=Wv(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Wn([r,o])),i.createHref({pathname:u,search:l,hash:s})}function ji(){return z.useContext(Cl)!=null}function yo(){return ji()||Ae(!1),z.useContext(Cl).location}function Hv(t){z.useContext(ar).static||z.useLayoutEffect(t)}function Pl(){let{isDataRoute:t}=z.useContext(lr);return t?bx():_x()}function _x(){ji()||Ae(!1);let t=z.useContext(dd),{basename:e,future:n,navigator:r}=z.useContext(ar),{matches:i}=z.useContext(lr),{pathname:s}=yo(),o=JSON.stringify(cd(i,n.v7_relativeSplatPath)),l=z.useRef(!1);return Hv(()=>{l.current=!0}),z.useCallback(function(h,p){if(p===void 0&&(p={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let m=hd(h,JSON.parse(o),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Wn([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,o,s,t])}function Wv(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=z.useContext(ar),{matches:i}=z.useContext(lr),{pathname:s}=yo(),o=JSON.stringify(cd(i,r.v7_relativeSplatPath));return z.useMemo(()=>hd(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function wx(t,e){return Ex(t,e)}function Ex(t,e,n,r){ji()||Ae(!1);let{navigator:i}=z.useContext(ar),{matches:s}=z.useContext(lr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=yo(),p;if(e){var m;let P=typeof e=="string"?Di(e):e;u==="/"||(m=P.pathname)!=null&&m.startsWith(u)||Ae(!1),p=P}else p=h;let y=p.pathname||"/",A=y;if(u!=="/"){let P=u.replace(/^\//,"").split("/");A="/"+y.replace(/^\//,"").split("/").slice(P.length).join("/")}let b=GE(t,{pathname:A}),N=Ax(b&&b.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:Wn([u,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:Wn([u,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,n,r);return e&&N?z.createElement(Cl.Provider,{value:{location:eo({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:jn.Pop}},N):N}function xx(){let t=kx(),e=mx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),n?z.createElement("pre",{style:i},n):null,null)}const Tx=z.createElement(xx,null);class Sx extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?z.createElement(lr.Provider,{value:this.props.routeContext},z.createElement($v.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ix(t){let{routeContext:e,match:n,children:r}=t,i=z.useContext(dd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),z.createElement(lr.Provider,{value:e},r)}function Ax(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Ae(!1),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:y,errors:A}=n,b=m.route.loader&&y[m.route.id]===void 0&&(!A||A[m.route.id]===void 0);if(m.route.lazy||b){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,m,y)=>{let A,b=!1,N=null,P=null;n&&(A=l&&m.route.id?l[m.route.id]:void 0,N=m.route.errorElement||Tx,u&&(h<0&&y===0?(Nx("route-fallback"),b=!0,P=null):h===y&&(b=!0,P=m.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,y+1)),_=()=>{let w;return A?w=N:b?w=P:m.route.Component?w=z.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=p,z.createElement(Ix,{match:m,routeContext:{outlet:p,matches:T,isDataRoute:n!=null},children:w})};return n&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?z.createElement(Sx,{location:n.location,revalidation:n.revalidation,component:N,error:A,children:_(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):_()},null)}var qv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(qv||{}),Gv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Gv||{});function Rx(t){let e=z.useContext(dd);return e||Ae(!1),e}function Cx(t){let e=z.useContext(yx);return e||Ae(!1),e}function Px(t){let e=z.useContext(lr);return e||Ae(!1),e}function Qv(t){let e=Px(),n=e.matches[e.matches.length-1];return n.route.id||Ae(!1),n.route.id}function kx(){var t;let e=z.useContext($v),n=Cx(),r=Qv();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function bx(){let{router:t}=Rx(qv.UseNavigateStable),e=Qv(Gv.UseNavigateStable),n=z.useRef(!1);return Hv(()=>{n.current=!0}),z.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,eo({fromRouteId:e},s)))},[t,e])}const lm={};function Nx(t,e,n){lm[t]||(lm[t]=!0)}function Vx(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function um(t){let{to:e,replace:n,state:r,relative:i}=t;ji()||Ae(!1);let{future:s,static:o}=z.useContext(ar),{matches:l}=z.useContext(lr),{pathname:u}=yo(),h=Pl(),p=hd(e,cd(l,s.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(p);return z.useEffect(()=>h(JSON.parse(m),{replace:n,state:r,relative:i}),[h,m,i,n,r]),null}function an(t){Ae(!1)}function Dx(t){let{basename:e="/",children:n=null,location:r,navigationType:i=jn.Pop,navigator:s,static:o=!1,future:l}=t;ji()&&Ae(!1);let u=e.replace(/^\/*/,"/"),h=z.useMemo(()=>({basename:u,navigator:s,static:o,future:eo({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Di(r));let{pathname:p="/",search:m="",hash:y="",state:A=null,key:b="default"}=r,N=z.useMemo(()=>{let P=ud(p,u);return P==null?null:{location:{pathname:P,search:m,hash:y,state:A,key:b},navigationType:i}},[u,p,m,y,A,b,i]);return N==null?null:z.createElement(ar.Provider,{value:h},z.createElement(Cl.Provider,{children:n,value:N}))}function jx(t){let{children:e,location:n}=t;return wx($c(e),n)}new Promise(()=>{});function $c(t,e){e===void 0&&(e=[]);let n=[];return z.Children.forEach(t,(r,i)=>{if(!z.isValidElement(r))return;let s=[...e,i];if(r.type===z.Fragment){n.push.apply(n,$c(r.props.children,s));return}r.type!==an&&Ae(!1),!r.props.index||!r.props.children||Ae(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=$c(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hc(){return Hc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hc.apply(this,arguments)}function Ox(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Lx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Mx(t,e){return t.button===0&&(!e||e==="_self")&&!Lx(t)}const Fx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zx="6";try{window.__reactRouterVersion=zx}catch{}const Ux="startTransition",cm=N1[Ux];function Bx(t){let{basename:e,children:n,future:r,window:i}=t,s=z.useRef();s.current==null&&(s.current=HE({window:i,v5Compat:!0}));let o=s.current,[l,u]=z.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},p=z.useCallback(m=>{h&&cm?cm(()=>u(m)):u(m)},[u,h]);return z.useLayoutEffect(()=>o.listen(p),[o,p]),z.useEffect(()=>Vx(r),[r]),z.createElement(Dx,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const $x=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Hx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kt=z.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:h,preventScrollReset:p,viewTransition:m}=e,y=Ox(e,Fx),{basename:A}=z.useContext(ar),b,N=!1;if(typeof h=="string"&&Hx.test(h)&&(b=h,$x))try{let w=new URL(window.location.href),C=h.startsWith("//")?new URL(w.protocol+h):new URL(h),O=ud(C.pathname,A);C.origin===w.origin&&O!=null?h=O+C.search+C.hash:N=!0}catch{}let P=vx(h,{relative:i}),T=Wx(h,{replace:o,state:l,target:u,preventScrollReset:p,relative:i,viewTransition:m});function _(w){r&&r(w),w.defaultPrevented||T(w)}return z.createElement("a",Hc({},y,{href:b||P,onClick:N||s?r:_,ref:n,target:u}))});var hm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hm||(hm={}));var dm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dm||(dm={}));function Wx(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=Pl(),h=yo(),p=Wv(t,{relative:o});return z.useCallback(m=>{if(Mx(m,n)){m.preventDefault();let y=r!==void 0?r:Ya(h)===Ya(p);u(t,{replace:y,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[h,u,p,r,i,n,t,s,o,l])}function qx(){return d.jsxs("div",{className:"landing-root",children:[d.jsx("style",{children:`
        .landing-root {
          position: relative;
          min-height: calc(100vh - 64px);
          /* space for header */
          margin-top: 12px;
          overflow: hidden;
          color: #e5e7eb;
          font-family: -apple-system, BlinkMacSystemFont, system-ui, "Segoe UI",
            Roboto, Helvetica, Arial, sans-serif;
        }

        /* animated background */
        .landing-bg {
          position: absolute;
          inset: 0;
          z-index: -1;
          background:
            radial-gradient(circle at 0% 0%, #22c55e18, transparent 55%),
            radial-gradient(circle at 100% 0%, #0ea5e918, transparent 55%),
            radial-gradient(circle at 0% 100%, #f9731618, transparent 55%),
            radial-gradient(circle at 100% 100%, #6366f118, transparent 55%),
            #020617;
          overflow: hidden;
        }

        .landing-bg::before {
          content: "";
          position: absolute;
          width: 170%;
          height: 170%;
          left: -35%;
          top: -35%;
          background-image:
            radial-gradient(circle, #22c55e66 1px, transparent 1px),
            radial-gradient(circle, #0ea5e966 1px, transparent 1px),
            radial-gradient(circle, #f9731666 1px, transparent 1px);
          background-size: 80px 80px, 120px 120px, 150px 150px;
          background-position: 0 0, 40px 40px, 20px 60px;
          opacity: 0.5;
          animation: landingDots 30s linear infinite;
        }

        @keyframes landingDots {
          0% {
            transform: translate3d(-8%, -8%, 0) scale(1);
          }
          50% {
            transform: translate3d(8%, 5%, 0) scale(1.05);
          }
          100% {
            transform: translate3d(-8%, -8%, 0) scale(1);
          }
        }

        .landing-inner {
          max-width: 1120px;
          margin: 0 auto;
          padding: 12px 16px 32px;
        }

        .landing-grid {
          display: grid;
          grid-template-columns: minmax(0, 3fr) minmax(0, 2.2fr);
          gap: 22px;
          align-items: stretch;
        }

        @media (max-width: 900px) {
          .landing-grid {
            grid-template-columns: minmax(0, 1fr);
          }
        }

        .landing-glass {
          border-radius: 24px;
          padding: 22px 24px;
          background:
            radial-gradient(circle at top left, #22c55e33, transparent 55%),
            radial-gradient(circle at bottom right, #06b6d433, transparent 55%),
            rgba(15,23,42,0.96);
          border: 1px solid rgba(148,163,184,0.4);
          box-shadow:
            0 30px 80px rgba(15,23,42,0.95),
            0 0 0 1px rgba(15,23,42,0.9);
          backdrop-filter: blur(18px);
        }

        .landing-pill {
          display: inline-flex;
          align-items: center;
          gap: 8px;
          padding: 4px 10px;
          border-radius: 999px;
          font-size: 0.75rem;
          background: rgba(15,23,42,1);
          border: 1px solid rgba(34,197,94,0.6);
          color: #bbf7d0;
        }

        .landing-pill-dot {
          width: 7px;
          height: 7px;
          border-radius: 999px;
          background: #22c55e;
          box-shadow: 0 0 12px #22c55e;
        }

        .landing-title {
          font-size: 2.3rem;
          line-height: 1.1;
          font-weight: 700;
          margin: 10px 0 8px;
          background: linear-gradient(to right, #22c55e, #06b6d4);
          -webkit-background-clip: text;
          color: transparent;
        }

        @media (max-width: 640px) {
          .landing-title {
            font-size: 2rem;
          }
        }

        .landing-sub {
          font-size: 0.95rem;
          color: #cbd5f5;
          max-width: 540px;
        }

        .landing-chip-row {
          display: flex;
          flex-wrap: wrap;
          gap: 8px;
          margin-top: 10px;
          font-size: 0.78rem;
        }

        .landing-chip {
          padding: 4px 10px;
          border-radius: 999px;
          border: 1px solid rgba(148,163,184,0.7);
          background: rgba(15,23,42,0.95);
          color: #e5e7eb;
        }

        .landing-cta-row {
          display: flex;
          flex-wrap: wrap;
          gap: 12px;
          margin-top: 18px;
        }

        .landing-btn-primary {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          padding: 10px 24px;
          border-radius: 999px;
          border: none;
          font-size: 0.95rem;
          font-weight: 600;
          text-decoration: none;
          background: linear-gradient(135deg, #22c55e, #4ade80);
          color: #022c22;
          box-shadow: 0 14px 40px rgba(34,197,94,0.6);
          cursor: pointer;
        }

        .landing-btn-secondary {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          padding: 9px 22px;
          border-radius: 999px;
          border: 1px solid rgba(148,163,184,0.7);
          font-size: 0.9rem;
          font-weight: 500;
          text-decoration: none;
          color: #e5e7eb;
          background: rgba(15,23,42,0.95);
          cursor: pointer;
        }

        .landing-small-caption {
          margin-top: 8px;
          font-size: 0.78rem;
          color: #9ca3af;
        }

        .landing-stat-card {
          border-radius: 20px;
          padding: 16px 18px;
          background:
            radial-gradient(circle at top, #4ade8033, transparent 60%),
            rgba(15,23,42,0.98);
          border: 1px solid rgba(148,163,184,0.45);
          box-shadow: 0 20px 55px rgba(15,23,42,0.95);
          display: grid;
          gap: 10px;
          font-size: 0.83rem;
        }

        .landing-stat-header {
          display: flex;
          justify-content: space-between;
          gap: 10px;
          align-items: center;
        }

        .landing-stat-badge {
          display: inline-flex;
          align-items: center;
          gap: 6px;
          padding: 4px 9px;
          border-radius: 999px;
          font-size: 0.7rem;
          background: rgba(15,23,42,0.95);
          border: 1px solid rgba(148,163,184,0.7);
        }

        .landing-stat-dot {
          width: 7px;
          height: 7px;
          border-radius: 999px;
          background: #22c55e;
          box-shadow: 0 0 10px #22c55e;
        }

        .landing-stat-row {
          display: flex;
          justify-content: space-between;
        }

        .landing-stat-label {
          color: #9ca3af;
        }

        .landing-section {
          margin-top: 32px;
        }

        .landing-section-title {
          font-size: 1.05rem;
          font-weight: 600;
          margin-bottom: 8px;
          color: #e5e7eb;
        }

        .landing-section-sub {
          font-size: 0.86rem;
          color: #cbd5f5;
          max-width: 820px;
        }

        .landing-cols-3 {
          display: grid;
          grid-template-columns: repeat(3, minmax(0,1fr));
          gap: 16px;
          margin-top: 12px;
        }

        @media (max-width: 900px) {
          .landing-cols-3 {
            grid-template-columns: repeat(2, minmax(0,1fr));
          }
        }

        @media (max-width: 640px) {
          .landing-cols-3 {
            grid-template-columns: minmax(0,1fr);
          }
        }

        .landing-mini-card {
          background: rgba(15,23,42,0.97);
          border-radius: 16px;
          border: 1px solid rgba(55,65,81,0.95);
          padding: 12px 14px;
          font-size: 0.84rem;
          color: #d1d5db;
        }

        .landing-mini-card h4 {
          margin: 0 0 4px;
          font-size: 0.87rem;
          font-weight: 600;
          color: #e5e7eb;
        }

        .landing-mini-badge {
          display: inline-flex;
          align-items: center;
          padding: 2px 8px;
          border-radius: 999px;
          font-size: 0.7rem;
          background: rgba(15,23,42,0.9);
          border: 1px solid rgba(148,163,184,0.9);
          margin-bottom: 4px;
        }

        .landing-mini-badge span {
          width: 6px;
          height: 6px;
          border-radius: 999px;
          background: #22c55e;
          margin-right: 4px;
        }
      `}),d.jsx("div",{className:"landing-bg"}),d.jsxs("div",{className:"landing-inner",children:[d.jsxs("section",{className:"landing-grid",children:[d.jsxs("div",{className:"landing-glass",children:[d.jsxs("div",{className:"landing-pill",children:[d.jsx("span",{className:"landing-pill-dot"}),"Smart maintenance for hostels & campus utilities"]}),d.jsxs("h1",{className:"landing-title",children:["Track incidents in seconds.",d.jsx("br",{}),"Predict the next failure before it hits."]}),d.jsx("p",{className:"landing-sub",children:"Single place for students, admins and technicians to report issues, monitor campus health, and prevent repeated breakdowns. Our prediction engine learns from frequency, priority and ageing incidents to highlight the next high-risk spots."}),d.jsxs("div",{className:"landing-chip-row",children:[d.jsx("div",{className:"landing-chip",children:" Reporter  hostel students"}),d.jsx("div",{className:"landing-chip",children:" Admin  campus ops team"}),d.jsx("div",{className:"landing-chip",children:" Technician  maintenance crew"})]}),d.jsxs("div",{className:"landing-cta-row",children:[d.jsx(kt,{to:"/register",className:"landing-btn-primary",children:"Get started  Register"}),d.jsx(kt,{to:"/login",className:"landing-btn-secondary",children:"Login as Reporter / Admin / Technician"})]}),d.jsxs("div",{className:"landing-small-caption",children:["Risk is computed per ",d.jsx("strong",{children:"hostel  problem category"})," ","using: recent incident frequency, % of high-priority tickets, current open count, age of oldest open ticket and last-24-hour activity, passed through a logistic (sigmoid) function."]})]}),d.jsxs("div",{className:"landing-stat-card",children:[d.jsxs("div",{className:"landing-stat-header",children:[d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:"0.86rem",fontWeight:600,color:"#f9fafb"},children:"Todays campus snapshot"}),d.jsx("div",{style:{fontSize:"0.8rem",color:"#9ca3af",marginTop:2},children:"All numbers are driven from the local incident data in this prototype."})]}),d.jsxs("div",{className:"landing-stat-badge",children:[d.jsx("span",{className:"landing-stat-dot"}),"AI prediction active"]})]}),d.jsxs("div",{className:"landing-stat-row",children:[d.jsx("span",{className:"landing-stat-label",children:"Incident logic"}),d.jsx("span",{style:{fontWeight:600},children:"Unique hostel+room, duplicate prevention"})]}),d.jsxs("div",{className:"landing-stat-row",children:[d.jsx("span",{className:"landing-stat-label",children:"Prediction"}),d.jsx("span",{style:{fontWeight:600},children:"Risk per hostel  category (0100%)"})]}),d.jsxs("div",{className:"landing-stat-row",children:[d.jsx("span",{className:"landing-stat-label",children:"Scheduling"}),d.jsx("span",{style:{fontWeight:600},children:"No overlapping tasks per technician"})]}),d.jsxs("div",{className:"landing-stat-row",children:[d.jsx("span",{className:"landing-stat-label",children:"SLA & GPS"}),d.jsx("span",{style:{fontWeight:600},children:"30-minute SLA alerts + GPS link for technicians"})]}),d.jsxs("div",{style:{marginTop:4,fontSize:"0.78rem",color:"#9ca3af"},children:["Login as ",d.jsx("strong",{children:"Admin"})," to see: campus health score, hostel heatmap, incident trend over time, predicted risk list and SLA breach counts."]})]})]}),d.jsxs("section",{className:"landing-section",children:[d.jsx("h3",{className:"landing-section-title",children:"What this platform actually solves for the hackathon"}),d.jsx("p",{className:"landing-section-sub",children:"Instead of scattered WhatsApp complaints, we give a structured incident platform with prediction and technician scheduling that aligns with the problem statement: unique users, no spam, GPS, auto-priority and incident forecasting."}),d.jsxs("div",{className:"landing-cols-3",children:[d.jsxs("div",{className:"landing-mini-card",children:[d.jsx("h4",{children:"1. Smart complaint capture"}),d.jsxs("p",{children:["Students log issues with ",d.jsx("strong",{children:"hostel, room, category"}),", description and optional GPS. Repeated complaints from the same hostel & room for the same category are linked together instead of spamming admins."]})]}),d.jsxs("div",{className:"landing-mini-card",children:[d.jsx("h4",{children:"2. Intelligent priority & SLA"}),d.jsxs("p",{children:["Rules auto-mark unsafe electrical, water leakage and fire-risk issues as ",d.jsx("strong",{children:"High"}),". SLA logic flags incidents open for more than 30 minutes so they are surfaced on the admin dashboard."]})]}),d.jsxs("div",{className:"landing-mini-card",children:[d.jsx("h4",{children:"3. Prediction & hotspots"}),d.jsxs("p",{children:["For every hostel  problem category we compute a score from frequency trends, open vs resolved ratio and recent activity, then convert it to a probability of the"," ",d.jsx("em",{children:"next incident happening"}),"."]})]})]})]}),d.jsxs("section",{className:"landing-section",children:[d.jsx("h3",{className:"landing-section-title",children:"How each role uses it"}),d.jsxs("div",{className:"landing-cols-3",children:[d.jsxs("div",{className:"landing-mini-card",children:[d.jsxs("div",{className:"landing-mini-badge",children:[d.jsx("span",{})," Reporter"]}),d.jsx("h4",{children:"Student / Resident"}),d.jsxs("ul",{style:{margin:"6px 0 0 14px",padding:0,fontSize:"0.8rem"},children:[d.jsx("li",{children:"Login as Reporter"}),d.jsx("li",{children:"File incident with hostel, room, category & GPS"}),d.jsx("li",{children:"See status updates and history of own complaints"}),d.jsx("li",{children:"Prevents duplicate spam for the same issue"})]})]}),d.jsxs("div",{className:"landing-mini-card",children:[d.jsxs("div",{className:"landing-mini-badge",children:[d.jsx("span",{})," Admin"]}),d.jsx("h4",{children:"Admin / Warden"}),d.jsxs("ul",{style:{margin:"6px 0 0 14px",padding:0,fontSize:"0.8rem"},children:[d.jsx("li",{children:"Sees live incident list with filters"}),d.jsx("li",{children:"Views hostel risk heatmap & campus health score"}),d.jsx("li",{children:"Assigns tasks to technicians while avoiding overload"}),d.jsx("li",{children:"Gets alerts for SLA breaches and repeat hotspots"})]})]}),d.jsxs("div",{className:"landing-mini-card",children:[d.jsxs("div",{className:"landing-mini-badge",children:[d.jsx("span",{})," Technician"]}),d.jsx("h4",{children:"Maintenance team"}),d.jsxs("ul",{style:{margin:"6px 0 0 14px",padding:0,fontSize:"0.8rem"},children:[d.jsx("li",{children:"Can only hold one active task at a time"}),d.jsx("li",{children:"Gets full context: hostel, room, GPS, age & priority"}),d.jsx("li",{children:"Updates status: New  In Progress  Resolved"}),d.jsx("li",{children:"Helps admin see load per technician clearly"})]})]})]})]})]})]})}const Kv=z.createContext(null);function Gx({children:t}){const[e,n]=z.useState(null);z.useEffect(()=>{const o=localStorage.getItem("incidentUser");if(o)try{n(JSON.parse(o))}catch{localStorage.removeItem("incidentUser")}},[]);const r=o=>{n(o),localStorage.setItem("incidentUser",JSON.stringify(o))},i=()=>{n(null),localStorage.removeItem("incidentUser")},s=o=>{r(o)};return d.jsx(Kv.Provider,{value:{user:e,login:r,logout:i,register:s},children:t})}function ur(){return z.useContext(Kv)}const Qx="users_v1";function Kx(){try{const t=localStorage.getItem(Qx);return t?JSON.parse(t):[]}catch{return[]}}function Yx(){const{login:t}=ur(),e=Pl(),[n,r]=z.useState({email:"",password:"",role:"reporter"}),[i,s]=z.useState(""),o=u=>{r(h=>({...h,[u.target.name]:u.target.value}))},l=u=>{if(u.preventDefault(),s(""),!n.email||!n.password){s("Please fill in email and password.");return}const p=Kx().find(A=>A.email.toLowerCase()===n.email.toLowerCase()&&A.password===n.password&&A.role===n.role);if(!p){s("No account found for this email / password / role.");return}const{password:m,...y}=p;t(y),p.role==="reporter"?e("/reporter/dashboard"):p.role==="admin"?e("/admin/dashboard"):e("/technician/dashboard")};return d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.4fr) minmax(0, 1fr)",gap:32,alignItems:"center"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{padding:"22px 24px",borderRadius:24,background:"radial-gradient(circle at top left,#22c55e,#2563eb 45%,#0f172a 90%)",color:"white",boxShadow:"0 25px 55px rgba(15,23,42,0.55)",minHeight:220,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[d.jsxs("div",{children:[d.jsx("p",{style:{fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:1,opacity:.85},children:"Smart campus  Incident intelligence"}),d.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:700,marginTop:8,marginBottom:6},children:"Track, predict and resolve campus issues in real-time."}),d.jsx("p",{style:{fontSize:"0.95rem",opacity:.92},children:"Our system combines incident logs with intelligent risk scoring to highlight hotspots before they turn into failures."})]}),d.jsxs("div",{style:{marginTop:18,paddingTop:12,borderTop:"1px solid rgba(248,250,252,0.18)",display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:10,fontSize:"0.78rem"},children:[d.jsxs("div",{children:[d.jsx("p",{style:{opacity:.7},children:"Roles"}),d.jsx("p",{style:{fontWeight:600},children:"Reporter  Admin  Tech"})]}),d.jsxs("div",{children:[d.jsx("p",{style:{opacity:.7},children:"Smartness"}),d.jsx("p",{style:{fontWeight:600},children:"Auto-priority & risk score"})]}),d.jsxs("div",{children:[d.jsx("p",{style:{opacity:.7},children:"Insights"}),d.jsx("p",{style:{fontWeight:600},children:"Hotspots  SLA alerts"})]})]})]}),d.jsx("p",{style:{marginTop:14,fontSize:"0.85rem",color:"#6b7280"},children:"Try logging in with different roles to see how the experience changes for reporters, admins and technicians."})]}),d.jsxs("div",{style:{maxWidth:420,marginLeft:"auto",padding:24,background:"white",borderRadius:16,boxShadow:"0 14px 38px rgba(15,23,42,0.14)"},children:[d.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:600,marginBottom:4},children:"Sign in"}),d.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280",marginBottom:16},children:"Choose your role and explore the live dashboards."}),i&&d.jsx("div",{style:{marginBottom:12,padding:"8px 10px",borderRadius:8,background:"#fee2e2",color:"#b91c1c",fontSize:"0.85rem"},children:i}),d.jsxs("form",{onSubmit:l,style:{display:"grid",gap:12,marginTop:4},children:[d.jsxs("div",{children:[d.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Email"}),d.jsx("input",{type:"email",name:"email",value:n.email,onChange:o,placeholder:"you@campus.edu",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Password"}),d.jsx("input",{type:"password",name:"password",value:n.password,onChange:o,placeholder:"",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Login as"}),d.jsxs("select",{name:"role",value:n.role,onChange:o,style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"},children:[d.jsx("option",{value:"reporter",children:"Reporter"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"technician",children:"Technician"})]})]}),d.jsx("button",{type:"submit",style:{marginTop:8,padding:"10px 14px",borderRadius:999,border:"none",fontWeight:600,fontSize:"0.95rem",background:"linear-gradient(135deg, #2563eb, #4f46e5)",color:"white",cursor:"pointer"},children:"Continue"})]}),d.jsxs("p",{style:{marginTop:12,fontSize:"0.8rem",color:"#9ca3af"},children:["New here?"," ",d.jsx(kt,{to:"/register",style:{color:"#2563eb",textDecoration:"none"},children:"Create an account"})]})]})]})}const Yv="users_v1";function Xx(){try{const t=localStorage.getItem(Yv);return t?JSON.parse(t):[]}catch{return[]}}function Jx(t){localStorage.setItem(Yv,JSON.stringify(t))}function Zx(){const{register:t}=ur(),e=Pl(),[n,r]=z.useState({name:"",email:"",password:"",role:"reporter",location:"",skills:""}),[i,s]=z.useState(""),o=u=>{r(h=>({...h,[u.target.name]:u.target.value}))},l=u=>{if(u.preventDefault(),s(""),!n.name||!n.email||!n.password){s("Please fill name, email and password.");return}if(n.role==="reporter"&&!n.location){s("Please enter your hostel/block location.");return}const h=Xx();if(h.find(N=>N.email.toLowerCase()===n.email.toLowerCase())){s("An account with this email already exists.");return}const m={name:n.name,email:n.email,password:n.password,role:n.role,location:n.role==="reporter"?n.location:"",skills:n.role==="technician"?n.skills.split(",").map(N=>N.trim()).filter(Boolean):[]},y=[...h,m];Jx(y);const{password:A,...b}=m;t(b),n.role==="reporter"?e("/reporter/dashboard"):n.role==="admin"?e("/admin/dashboard"):e("/technician/dashboard")};return d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.2fr) minmax(0, 1fr)",gap:32,alignItems:"center"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{padding:"22px 24px",borderRadius:24,background:"white",boxShadow:"0 18px 40px rgba(15,23,42,0.12)",border:"1px solid #e5e7eb"},children:[d.jsx("p",{style:{fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:1,color:"#6b7280"},children:"Create your workspace identity"}),d.jsx("h2",{style:{fontSize:"1.7rem",fontWeight:700,marginTop:8,marginBottom:10,color:"#0f172a"},children:"Different roles, one connected incident pipeline."}),d.jsx("p",{style:{fontSize:"0.95rem",color:"#4b5563"},children:"Reporters raise issues in hostels and labs, admins see patterns and SLAs, and technicians get a focused queue of tasks. Your role defines what you see in the system."}),d.jsxs("div",{style:{marginTop:18,display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:12,fontSize:"0.8rem"},children:[d.jsxs("div",{style:{padding:"8px 10px",borderRadius:12,background:"#eff6ff"},children:[d.jsx("p",{style:{fontWeight:600,color:"#1d4ed8"},children:"Reporter"}),d.jsx("p",{style:{color:"#4b5563"},children:"Students/staff log incidents with context like hostel, block and category."})]}),d.jsxs("div",{style:{padding:"8px 10px",borderRadius:12,background:"#ecfdf5"},children:[d.jsx("p",{style:{fontWeight:600,color:"#15803d"},children:"Admin"}),d.jsx("p",{style:{color:"#4b5563"},children:"Sees analytics, risk prediction per location & category, and SLA risks."})]}),d.jsxs("div",{style:{padding:"8px 10px",borderRadius:12,background:"#fefce8"},children:[d.jsx("p",{style:{fontWeight:600,color:"#92400e"},children:"Technician"}),d.jsx("p",{style:{color:"#4b5563"},children:"Gets a prioritized queue and updates status to keep everyone in sync."})]})]})]}),d.jsx("p",{style:{marginTop:14,fontSize:"0.85rem",color:"#6b7280"},children:"You can register once for each role to demo all three journeys during evaluation."})]}),d.jsxs("div",{style:{maxWidth:440,marginLeft:"auto",padding:24,background:"white",borderRadius:16,boxShadow:"0 14px 38px rgba(15,23,42,0.14)"},children:[d.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:600,marginBottom:4},children:"Create an account"}),d.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280",marginBottom:16},children:"Pick how youll use the system: as a reporter, admin or technician."}),i&&d.jsx("div",{style:{marginBottom:12,padding:"8px 10px",borderRadius:8,background:"#fee2e2",color:"#b91c1c",fontSize:"0.85rem"},children:i}),d.jsxs("form",{onSubmit:l,style:{display:"grid",gap:12,marginTop:4},children:[d.jsxs("div",{children:[d.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Name"}),d.jsx("input",{name:"name",value:n.name,onChange:o,placeholder:"Your full name",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Email"}),d.jsx("input",{type:"email",name:"email",value:n.email,onChange:o,placeholder:"you@campus.edu",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Password"}),d.jsx("input",{type:"password",name:"password",value:n.password,onChange:o,placeholder:"Set a password",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Role"}),d.jsxs("select",{name:"role",value:n.role,onChange:o,style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"},children:[d.jsx("option",{value:"reporter",children:"Reporter"}),d.jsx("option",{value:"admin",children:"Admin"}),d.jsx("option",{value:"technician",children:"Technician"})]})]}),n.role==="reporter"&&d.jsxs("div",{children:[d.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Location (Hostel / Block)"}),d.jsx("input",{name:"location",value:n.location,onChange:o,placeholder:"e.g., Hostel A, Block 3",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"}})]}),n.role==="technician"&&d.jsxs("div",{children:[d.jsx("label",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Skills (comma separated)"}),d.jsx("input",{name:"skills",value:n.skills,onChange:o,placeholder:"Electricity, Water, Internet",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",marginTop:4,fontSize:"0.9rem"}})]}),d.jsx("button",{type:"submit",style:{marginTop:8,padding:"10px 14px",borderRadius:999,border:"none",fontWeight:600,fontSize:"0.95rem",background:"linear-gradient(135deg, #22c55e, #16a34a)",color:"white",cursor:"pointer"},children:"Create account"})]}),d.jsxs("p",{style:{marginTop:12,fontSize:"0.8rem",color:"#9ca3af"},children:["Already registered?"," ",d.jsx(kt,{to:"/login",style:{color:"#2563eb",textDecoration:"none"},children:"Back to login"})]})]})]})}const eT=()=>{};var fm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Jv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=s>>2,m=(s&3)<<4|l>>4;let y=(l&15)<<2|h>>6,A=h&63;u||(A=64,o||(y=64)),r.push(n[p],n[m],n[y],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Xv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||m==null)throw new nT;const y=s<<2|l>>4;if(r.push(y),h!==64){const A=l<<4&240|h>>2;if(r.push(A),m!==64){const b=h<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rT=function(t){const e=Xv(t);return Jv.encodeByteArray(e,!0)},Xa=function(t){return rT(t).replace(/\./g,"")},iT=function(t){try{return Jv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=()=>sT().__FIREBASE_DEFAULTS__,aT=()=>{if(typeof process>"u"||typeof fm>"u")return;const t=fm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iT(t[1]);return e&&JSON.parse(e)},fd=()=>{try{return eT()||oT()||aT()||lT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uT=t=>{var e,n;return(n=(e=fd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},cT=t=>{const e=uT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Zv=()=>{var t;return(t=fd())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Xa(JSON.stringify(n)),Xa(JSON.stringify(o)),""].join(".")}const bs={};function pT(){const t={prod:[],emulator:[]};for(const e of Object.keys(bs))bs[e]?t.emulator.push(e):t.prod.push(e);return t}function mT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let pm=!1;function gT(t,e){if(typeof window>"u"||typeof document>"u"||!pd(window.location.host)||bs[t]===e||bs[t]||pm)return;bs[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",s=pT().prod.length>0;function o(){const y=document.getElementById(r);y&&y.remove()}function l(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,A){y.setAttribute("width","24"),y.setAttribute("id",A),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function h(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{pm=!0,o()},y}function p(y,A){y.setAttribute("id",A),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){const y=mT(r),A=n("text"),b=document.getElementById(A)||document.createElement("span"),N=n("learnmore"),P=document.getElementById(N)||document.createElement("a"),T=n("preprendIcon"),_=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const w=y.element;l(w),p(P,N);const C=h();u(_,T),w.append(_,b,P,C),document.body.appendChild(w)}s?(b.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vT(){var e;const t=(e=fd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _T(){return!vT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wT(){try{return typeof indexedDB=="object"}catch{return!1}}function ET(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="FirebaseError";class Oi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xT,Object.setPrototypeOf(this,Oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,e0.prototype.create)}}class e0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?TT(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Oi(i,l,r)}}function TT(t,e){return t.replace(ST,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ST=/\{\$([^}]+)}/g;function Ja(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(mm(s)&&mm(o)){if(!Ja(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){return t&&t._delegate?t._delegate:t}class to{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RT(e))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wr){return this.instances.has(e)}getOptions(e=wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wr){return this.component?this.component.multipleInstances?e:wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AT(t){return t===wr?void 0:t}function RT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const PT={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},kT=ie.INFO,bT={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},NT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=bT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class t0{constructor(e){this.name=e,this._logLevel=kT,this._logHandler=NT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const VT=(t,e)=>e.some(n=>t instanceof n);let gm,ym;function DT(){return gm||(gm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jT(){return ym||(ym=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n0=new WeakMap,Wc=new WeakMap,r0=new WeakMap,Fu=new WeakMap,md=new WeakMap;function OT(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(qn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&n0.set(n,t)}).catch(()=>{}),md.set(e,t),e}function LT(t){if(Wc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Wc.set(t,e)}let qc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||r0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MT(t){qc=t(qc)}function FT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zu(this),e,...n);return r0.set(r,e.sort?e.sort():[e]),qn(r)}:jT().includes(t)?function(...e){return t.apply(zu(this),e),qn(n0.get(this))}:function(...e){return qn(t.apply(zu(this),e))}}function zT(t){return typeof t=="function"?FT(t):(t instanceof IDBTransaction&&LT(t),VT(t,DT())?new Proxy(t,qc):t)}function qn(t){if(t instanceof IDBRequest)return OT(t);if(Fu.has(t))return Fu.get(t);const e=zT(t);return e!==t&&(Fu.set(t,e),md.set(e,t)),e}const zu=t=>md.get(t);function UT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=qn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(qn(o.result),u.oldVersion,u.newVersion,qn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const BT=["get","getKey","getAll","getAllKeys","count"],$T=["put","add","delete","clear"],Uu=new Map;function vm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Uu.get(e))return Uu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=$T.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||BT.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Uu.set(e,s),s}MT(t=>({...t,get:(e,n,r)=>vm(e,n)||t.get(e,n,r),has:(e,n)=>!!vm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gc="@firebase/app",_m="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn=new t0("@firebase/app"),qT="@firebase/app-compat",GT="@firebase/analytics-compat",QT="@firebase/analytics",KT="@firebase/app-check-compat",YT="@firebase/app-check",XT="@firebase/auth",JT="@firebase/auth-compat",ZT="@firebase/database",eS="@firebase/data-connect",tS="@firebase/database-compat",nS="@firebase/functions",rS="@firebase/functions-compat",iS="@firebase/installations",sS="@firebase/installations-compat",oS="@firebase/messaging",aS="@firebase/messaging-compat",lS="@firebase/performance",uS="@firebase/performance-compat",cS="@firebase/remote-config",hS="@firebase/remote-config-compat",dS="@firebase/storage",fS="@firebase/storage-compat",pS="@firebase/firestore",mS="@firebase/ai",gS="@firebase/firestore-compat",yS="firebase",vS="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc="[DEFAULT]",_S={[Gc]:"fire-core",[qT]:"fire-core-compat",[QT]:"fire-analytics",[GT]:"fire-analytics-compat",[YT]:"fire-app-check",[KT]:"fire-app-check-compat",[XT]:"fire-auth",[JT]:"fire-auth-compat",[ZT]:"fire-rtdb",[eS]:"fire-data-connect",[tS]:"fire-rtdb-compat",[nS]:"fire-fn",[rS]:"fire-fn-compat",[iS]:"fire-iid",[sS]:"fire-iid-compat",[oS]:"fire-fcm",[aS]:"fire-fcm-compat",[lS]:"fire-perf",[uS]:"fire-perf-compat",[cS]:"fire-rc",[hS]:"fire-rc-compat",[dS]:"fire-gcs",[fS]:"fire-gcs-compat",[pS]:"fire-fst",[gS]:"fire-fst-compat",[mS]:"fire-vertex","fire-js":"fire-js",[yS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new Map,wS=new Map,Kc=new Map;function wm(t,e){try{t.container.addComponent(e)}catch(n){yn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function el(t){const e=t.name;if(Kc.has(e))return yn.debug(`There were multiple attempts to register component ${e}.`),!1;Kc.set(e,t);for(const n of Za.values())wm(n,t);for(const n of wS.values())wm(n,t);return!0}function ES(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xS(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gn=new e0("app","Firebase",TS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new to("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=vS;function i0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Qc,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Gn.create("bad-app-name",{appName:String(i)});if(n||(n=Zv()),!n)throw Gn.create("no-options");const s=Za.get(i);if(s){if(Ja(n,s.options)&&Ja(r,s.config))return s;throw Gn.create("duplicate-app",{appName:i})}const o=new CT(i);for(const u of Kc.values())o.addComponent(u);const l=new SS(n,r,o);return Za.set(i,l),l}function AS(t=Qc){const e=Za.get(t);if(!e&&t===Qc&&Zv())return i0();if(!e)throw Gn.create("no-app",{appName:t});return e}function mi(t,e,n){let r=_S[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yn.warn(o.join(" "));return}el(new to(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="firebase-heartbeat-database",CS=1,no="firebase-heartbeat-store";let Bu=null;function s0(){return Bu||(Bu=UT(RS,CS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(no)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gn.create("idb-open",{originalErrorMessage:t.message})})),Bu}async function PS(t){try{const n=(await s0()).transaction(no),r=await n.objectStore(no).get(o0(t));return await n.done,r}catch(e){if(e instanceof Oi)yn.warn(e.message);else{const n=Gn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yn.warn(n.message)}}}async function Em(t,e){try{const r=(await s0()).transaction(no,"readwrite");await r.objectStore(no).put(e,o0(t)),await r.done}catch(n){if(n instanceof Oi)yn.warn(n.message);else{const r=Gn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yn.warn(r.message)}}}function o0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=1024,bS=30;class NS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=xm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>bS){const o=jS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){yn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xm(),{heartbeatsToSend:r,unsentEntries:i}=VS(this._heartbeatsCache.heartbeats),s=Xa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return yn.warn(n),""}}}function xm(){return new Date().toISOString().substring(0,10)}function VS(t,e=kS){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Tm(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Tm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wT()?ET().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await PS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Em(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Em(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Tm(t){return Xa(JSON.stringify({version:2,heartbeats:t})).length}function jS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t){el(new to("platform-logger",e=>new HT(e),"PRIVATE")),el(new to("heartbeat",e=>new NS(e),"PRIVATE")),mi(Gc,_m,t),mi(Gc,_m,"esm2020"),mi("fire-js","")}OS("");var Sm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qn,a0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,g){function x(){}x.prototype=g.prototype,E.F=g.prototype,E.prototype=new x,E.prototype.constructor=E,E.D=function(I,R,k){for(var S=Array(arguments.length-2),de=2;de<arguments.length;de++)S[de-2]=arguments[de];return g.prototype[R].apply(I,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,g,x){x||(x=0);const I=Array(16);if(typeof g=="string")for(var R=0;R<16;++R)I[R]=g.charCodeAt(x++)|g.charCodeAt(x++)<<8|g.charCodeAt(x++)<<16|g.charCodeAt(x++)<<24;else for(R=0;R<16;++R)I[R]=g[x++]|g[x++]<<8|g[x++]<<16|g[x++]<<24;g=E.g[0],x=E.g[1],R=E.g[2];let k=E.g[3],S;S=g+(k^x&(R^k))+I[0]+3614090360&4294967295,g=x+(S<<7&4294967295|S>>>25),S=k+(R^g&(x^R))+I[1]+3905402710&4294967295,k=g+(S<<12&4294967295|S>>>20),S=R+(x^k&(g^x))+I[2]+606105819&4294967295,R=k+(S<<17&4294967295|S>>>15),S=x+(g^R&(k^g))+I[3]+3250441966&4294967295,x=R+(S<<22&4294967295|S>>>10),S=g+(k^x&(R^k))+I[4]+4118548399&4294967295,g=x+(S<<7&4294967295|S>>>25),S=k+(R^g&(x^R))+I[5]+1200080426&4294967295,k=g+(S<<12&4294967295|S>>>20),S=R+(x^k&(g^x))+I[6]+2821735955&4294967295,R=k+(S<<17&4294967295|S>>>15),S=x+(g^R&(k^g))+I[7]+4249261313&4294967295,x=R+(S<<22&4294967295|S>>>10),S=g+(k^x&(R^k))+I[8]+1770035416&4294967295,g=x+(S<<7&4294967295|S>>>25),S=k+(R^g&(x^R))+I[9]+2336552879&4294967295,k=g+(S<<12&4294967295|S>>>20),S=R+(x^k&(g^x))+I[10]+4294925233&4294967295,R=k+(S<<17&4294967295|S>>>15),S=x+(g^R&(k^g))+I[11]+2304563134&4294967295,x=R+(S<<22&4294967295|S>>>10),S=g+(k^x&(R^k))+I[12]+1804603682&4294967295,g=x+(S<<7&4294967295|S>>>25),S=k+(R^g&(x^R))+I[13]+4254626195&4294967295,k=g+(S<<12&4294967295|S>>>20),S=R+(x^k&(g^x))+I[14]+2792965006&4294967295,R=k+(S<<17&4294967295|S>>>15),S=x+(g^R&(k^g))+I[15]+1236535329&4294967295,x=R+(S<<22&4294967295|S>>>10),S=g+(R^k&(x^R))+I[1]+4129170786&4294967295,g=x+(S<<5&4294967295|S>>>27),S=k+(x^R&(g^x))+I[6]+3225465664&4294967295,k=g+(S<<9&4294967295|S>>>23),S=R+(g^x&(k^g))+I[11]+643717713&4294967295,R=k+(S<<14&4294967295|S>>>18),S=x+(k^g&(R^k))+I[0]+3921069994&4294967295,x=R+(S<<20&4294967295|S>>>12),S=g+(R^k&(x^R))+I[5]+3593408605&4294967295,g=x+(S<<5&4294967295|S>>>27),S=k+(x^R&(g^x))+I[10]+38016083&4294967295,k=g+(S<<9&4294967295|S>>>23),S=R+(g^x&(k^g))+I[15]+3634488961&4294967295,R=k+(S<<14&4294967295|S>>>18),S=x+(k^g&(R^k))+I[4]+3889429448&4294967295,x=R+(S<<20&4294967295|S>>>12),S=g+(R^k&(x^R))+I[9]+568446438&4294967295,g=x+(S<<5&4294967295|S>>>27),S=k+(x^R&(g^x))+I[14]+3275163606&4294967295,k=g+(S<<9&4294967295|S>>>23),S=R+(g^x&(k^g))+I[3]+4107603335&4294967295,R=k+(S<<14&4294967295|S>>>18),S=x+(k^g&(R^k))+I[8]+1163531501&4294967295,x=R+(S<<20&4294967295|S>>>12),S=g+(R^k&(x^R))+I[13]+2850285829&4294967295,g=x+(S<<5&4294967295|S>>>27),S=k+(x^R&(g^x))+I[2]+4243563512&4294967295,k=g+(S<<9&4294967295|S>>>23),S=R+(g^x&(k^g))+I[7]+1735328473&4294967295,R=k+(S<<14&4294967295|S>>>18),S=x+(k^g&(R^k))+I[12]+2368359562&4294967295,x=R+(S<<20&4294967295|S>>>12),S=g+(x^R^k)+I[5]+4294588738&4294967295,g=x+(S<<4&4294967295|S>>>28),S=k+(g^x^R)+I[8]+2272392833&4294967295,k=g+(S<<11&4294967295|S>>>21),S=R+(k^g^x)+I[11]+1839030562&4294967295,R=k+(S<<16&4294967295|S>>>16),S=x+(R^k^g)+I[14]+4259657740&4294967295,x=R+(S<<23&4294967295|S>>>9),S=g+(x^R^k)+I[1]+2763975236&4294967295,g=x+(S<<4&4294967295|S>>>28),S=k+(g^x^R)+I[4]+1272893353&4294967295,k=g+(S<<11&4294967295|S>>>21),S=R+(k^g^x)+I[7]+4139469664&4294967295,R=k+(S<<16&4294967295|S>>>16),S=x+(R^k^g)+I[10]+3200236656&4294967295,x=R+(S<<23&4294967295|S>>>9),S=g+(x^R^k)+I[13]+681279174&4294967295,g=x+(S<<4&4294967295|S>>>28),S=k+(g^x^R)+I[0]+3936430074&4294967295,k=g+(S<<11&4294967295|S>>>21),S=R+(k^g^x)+I[3]+3572445317&4294967295,R=k+(S<<16&4294967295|S>>>16),S=x+(R^k^g)+I[6]+76029189&4294967295,x=R+(S<<23&4294967295|S>>>9),S=g+(x^R^k)+I[9]+3654602809&4294967295,g=x+(S<<4&4294967295|S>>>28),S=k+(g^x^R)+I[12]+3873151461&4294967295,k=g+(S<<11&4294967295|S>>>21),S=R+(k^g^x)+I[15]+530742520&4294967295,R=k+(S<<16&4294967295|S>>>16),S=x+(R^k^g)+I[2]+3299628645&4294967295,x=R+(S<<23&4294967295|S>>>9),S=g+(R^(x|~k))+I[0]+4096336452&4294967295,g=x+(S<<6&4294967295|S>>>26),S=k+(x^(g|~R))+I[7]+1126891415&4294967295,k=g+(S<<10&4294967295|S>>>22),S=R+(g^(k|~x))+I[14]+2878612391&4294967295,R=k+(S<<15&4294967295|S>>>17),S=x+(k^(R|~g))+I[5]+4237533241&4294967295,x=R+(S<<21&4294967295|S>>>11),S=g+(R^(x|~k))+I[12]+1700485571&4294967295,g=x+(S<<6&4294967295|S>>>26),S=k+(x^(g|~R))+I[3]+2399980690&4294967295,k=g+(S<<10&4294967295|S>>>22),S=R+(g^(k|~x))+I[10]+4293915773&4294967295,R=k+(S<<15&4294967295|S>>>17),S=x+(k^(R|~g))+I[1]+2240044497&4294967295,x=R+(S<<21&4294967295|S>>>11),S=g+(R^(x|~k))+I[8]+1873313359&4294967295,g=x+(S<<6&4294967295|S>>>26),S=k+(x^(g|~R))+I[15]+4264355552&4294967295,k=g+(S<<10&4294967295|S>>>22),S=R+(g^(k|~x))+I[6]+2734768916&4294967295,R=k+(S<<15&4294967295|S>>>17),S=x+(k^(R|~g))+I[13]+1309151649&4294967295,x=R+(S<<21&4294967295|S>>>11),S=g+(R^(x|~k))+I[4]+4149444226&4294967295,g=x+(S<<6&4294967295|S>>>26),S=k+(x^(g|~R))+I[11]+3174756917&4294967295,k=g+(S<<10&4294967295|S>>>22),S=R+(g^(k|~x))+I[2]+718787259&4294967295,R=k+(S<<15&4294967295|S>>>17),S=x+(k^(R|~g))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+g&4294967295,E.g[1]=E.g[1]+(R+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+k&4294967295}r.prototype.v=function(E,g){g===void 0&&(g=E.length);const x=g-this.blockSize,I=this.C;let R=this.h,k=0;for(;k<g;){if(R==0)for(;k<=x;)i(this,E,k),k+=this.blockSize;if(typeof E=="string"){for(;k<g;)if(I[R++]=E.charCodeAt(k++),R==this.blockSize){i(this,I),R=0;break}}else for(;k<g;)if(I[R++]=E[k++],R==this.blockSize){i(this,I),R=0;break}}this.h=R,this.o+=g},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var g=1;g<E.length-8;++g)E[g]=0;g=this.o*8;for(var x=E.length-8;x<E.length;++x)E[x]=g&255,g/=256;for(this.v(E),E=Array(16),g=0,x=0;x<4;++x)for(let I=0;I<32;I+=8)E[g++]=this.g[x]>>>I&255;return E};function s(E,g){var x=l;return Object.prototype.hasOwnProperty.call(x,E)?x[E]:x[E]=g(E)}function o(E,g){this.h=g;const x=[];let I=!0;for(let R=E.length-1;R>=0;R--){const k=E[R]|0;I&&k==g||(x[R]=k,I=!1)}this.g=x}var l={};function u(E){return-128<=E&&E<128?s(E,function(g){return new o([g|0],g<0?-1:0)}):new o([E|0],E<0?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(E<0)return P(h(-E));const g=[];let x=1;for(let I=0;E>=x;I++)g[I]=E/x|0,x*=4294967296;return new o(g,0)}function p(E,g){if(E.length==0)throw Error("number format error: empty string");if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(E.charAt(0)=="-")return P(p(E.substring(1),g));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=h(Math.pow(g,8));let I=m;for(let k=0;k<E.length;k+=8){var R=Math.min(8,E.length-k);const S=parseInt(E.substring(k,k+R),g);R<8?(R=h(Math.pow(g,R)),I=I.j(R).add(h(S))):(I=I.j(x),I=I.add(h(S)))}return I}var m=u(0),y=u(1),A=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-P(this).m();let E=0,g=1;for(let x=0;x<this.g.length;x++){const I=this.i(x);E+=(I>=0?I:4294967296+I)*g,g*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(N(this))return"-"+P(this).toString(E);const g=h(Math.pow(E,6));var x=this;let I="";for(;;){const R=C(x,g).g;x=T(x,R.j(g));let k=((x.g.length>0?x.g[0]:x.h)>>>0).toString(E);if(x=R,b(x))return k+I;for(;k.length<6;)k="0"+k;I=k+I}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(let g=0;g<E.g.length;g++)if(E.g[g]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=T(this,E),N(E)?-1:b(E)?0:1};function P(E){const g=E.g.length,x=[];for(let I=0;I<g;I++)x[I]=~E.g[I];return new o(x,~E.h).add(y)}t.abs=function(){return N(this)?P(this):this},t.add=function(E){const g=Math.max(this.g.length,E.g.length),x=[];let I=0;for(let R=0;R<=g;R++){let k=I+(this.i(R)&65535)+(E.i(R)&65535),S=(k>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);I=S>>>16,k&=65535,S&=65535,x[R]=S<<16|k}return new o(x,x[x.length-1]&-2147483648?-1:0)};function T(E,g){return E.add(P(g))}t.j=function(E){if(b(this)||b(E))return m;if(N(this))return N(E)?P(this).j(P(E)):P(P(this).j(E));if(N(E))return P(this.j(P(E)));if(this.l(A)<0&&E.l(A)<0)return h(this.m()*E.m());const g=this.g.length+E.g.length,x=[];for(var I=0;I<2*g;I++)x[I]=0;for(I=0;I<this.g.length;I++)for(let R=0;R<E.g.length;R++){const k=this.i(I)>>>16,S=this.i(I)&65535,de=E.i(R)>>>16,Re=E.i(R)&65535;x[2*I+2*R]+=S*Re,_(x,2*I+2*R),x[2*I+2*R+1]+=k*Re,_(x,2*I+2*R+1),x[2*I+2*R+1]+=S*de,_(x,2*I+2*R+1),x[2*I+2*R+2]+=k*de,_(x,2*I+2*R+2)}for(E=0;E<g;E++)x[E]=x[2*E+1]<<16|x[2*E];for(E=g;E<2*g;E++)x[E]=0;return new o(x,0)};function _(E,g){for(;(E[g]&65535)!=E[g];)E[g+1]+=E[g]>>>16,E[g]&=65535,g++}function w(E,g){this.g=E,this.h=g}function C(E,g){if(b(g))throw Error("division by zero");if(b(E))return new w(m,m);if(N(E))return g=C(P(E),g),new w(P(g.g),P(g.h));if(N(g))return g=C(E,P(g)),new w(P(g.g),g.h);if(E.g.length>30){if(N(E)||N(g))throw Error("slowDivide_ only works with positive integers.");for(var x=y,I=g;I.l(E)<=0;)x=O(x),I=O(I);var R=j(x,1),k=j(I,1);for(I=j(I,2),x=j(x,2);!b(I);){var S=k.add(I);S.l(E)<=0&&(R=R.add(x),k=S),I=j(I,1),x=j(x,1)}return g=T(E,R.j(g)),new w(R,g)}for(R=m;E.l(g)>=0;){for(x=Math.max(1,Math.floor(E.m()/g.m())),I=Math.ceil(Math.log(x)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),k=h(x),S=k.j(g);N(S)||S.l(E)>0;)x-=I,k=h(x),S=k.j(g);b(k)&&(k=y),R=R.add(k),E=T(E,S)}return new w(R,E)}t.B=function(E){return C(this,E).h},t.and=function(E){const g=Math.max(this.g.length,E.g.length),x=[];for(let I=0;I<g;I++)x[I]=this.i(I)&E.i(I);return new o(x,this.h&E.h)},t.or=function(E){const g=Math.max(this.g.length,E.g.length),x=[];for(let I=0;I<g;I++)x[I]=this.i(I)|E.i(I);return new o(x,this.h|E.h)},t.xor=function(E){const g=Math.max(this.g.length,E.g.length),x=[];for(let I=0;I<g;I++)x[I]=this.i(I)^E.i(I);return new o(x,this.h^E.h)};function O(E){const g=E.g.length+1,x=[];for(let I=0;I<g;I++)x[I]=E.i(I)<<1|E.i(I-1)>>>31;return new o(x,E.h)}function j(E,g){const x=g>>5;g%=32;const I=E.g.length-x,R=[];for(let k=0;k<I;k++)R[k]=g>0?E.i(k+x)>>>g|E.i(k+x+1)<<32-g:E.i(k+x);return new o(R,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,a0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Qn=o}).apply(typeof Sm<"u"?Sm:typeof self<"u"?self:typeof window<"u"?window:{});var ta=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var l0,vs,u0,wa,Yc,c0,h0,d0;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ta=="object"&&ta];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var V=a[v];if(!(V in f))break e;f=f[V]}a=a[a.length-1],v=f[a],c=c(v),c!=v&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(c){var f=[],v;for(v in c)Object.prototype.hasOwnProperty.call(c,v)&&f.push([v,c[v]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function u(a,c,f){return a.call.apply(a.bind,arguments)}function h(a,c,f){return h=u,h.apply(null,arguments)}function p(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function m(a,c){function f(){}f.prototype=c.prototype,a.Z=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(v,V,D){for(var B=Array(arguments.length-2),J=2;J<arguments.length;J++)B[J-2]=arguments[J];return c.prototype[V].apply(v,B)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function A(a){const c=a.length;if(c>0){const f=Array(c);for(let v=0;v<c;v++)f[v]=a[v];return f}return[]}function b(a,c){for(let v=1;v<arguments.length;v++){const V=arguments[v];var f=typeof V;if(f=f!="object"?f:V?Array.isArray(V)?"array":f:"null",f=="array"||f=="object"&&typeof V.length=="number"){f=a.length||0;const D=V.length||0;a.length=f+D;for(let B=0;B<D;B++)a[f+B]=V[B]}else a.push(V)}}class N{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function P(a){o.setTimeout(()=>{throw a},0)}function T(){var a=E;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class _{constructor(){this.h=this.g=null}add(c,f){const v=w.get();v.set(c,f),this.h?this.h.next=v:this.g=v,this.h=v}}var w=new N(()=>new C,a=>a.reset());class C{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let O,j=!1,E=new _,g=()=>{const a=Promise.resolve(void 0);O=()=>{a.then(x)}};function x(){for(var a;a=T();){try{a.h.call(a.g)}catch(f){P(f)}var c=w;c.j(a),c.h<100&&(c.h++,a.next=c.g,c.g=a)}j=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,c),o.removeEventListener("test",f,c)}catch{}return a}();function S(a){return/^[\s\xa0]*$/.test(a)}function de(a,c){R.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,c)}m(de,R),de.prototype.init=function(a,c){const f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget,c||(f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement)),this.relatedTarget=c,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Re="closure_listenable_"+(Math.random()*1e6|0),It=0;function Dt(a,c,f,v,V){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!v,this.ha=V,this.key=++It,this.da=this.fa=!1}function F(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function $(a,c,f){for(const v in a)c.call(f,a[v],v,a)}function K(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function ee(a){const c={};for(const f in a)c[f]=a[f];return c}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(a,c){let f,v;for(let V=1;V<arguments.length;V++){v=arguments[V];for(f in v)a[f]=v[f];for(let D=0;D<oe.length;D++)f=oe[D],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function Me(a){this.src=a,this.g={},this.h=0}Me.prototype.add=function(a,c,f,v,V){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const B=rt(a,c,v,V);return B>-1?(c=a[B],f||(c.fa=!1)):(c=new Dt(c,this.src,D,!!v,V),c.fa=f,a.push(c)),c};function jt(a,c){const f=c.type;if(f in a.g){var v=a.g[f],V=Array.prototype.indexOf.call(v,c,void 0),D;(D=V>=0)&&Array.prototype.splice.call(v,V,1),D&&(F(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function rt(a,c,f,v){for(let V=0;V<a.length;++V){const D=a[V];if(!D.da&&D.listener==c&&D.capture==!!f&&D.ha==v)return V}return-1}var Ot="closure_lm_"+(Math.random()*1e6|0),Bi={};function So(a,c,f,v,V){if(Array.isArray(c)){for(let D=0;D<c.length;D++)So(a,c[D],f,v,V);return null}return f=Jd(f),a&&a[Re]?a.J(c,f,l(v)?!!v.capture:!1,V):Br(a,c,f,!1,v,V)}function Br(a,c,f,v,V,D){if(!c)throw Error("Invalid event type");const B=l(V)?!!V.capture:!!V;let J=Gl(a);if(J||(a[Ot]=J=new Me(a)),f=J.add(c,f,v,B,D),f.proxy)return f;if(v=Wl(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)k||(V=B),V===void 0&&(V=!1),a.addEventListener(c.toString(),v,V);else if(a.attachEvent)a.attachEvent(ql(c.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Wl(){function a(f){return c.call(a.src,a.listener,f)}const c=B_;return a}function Io(a,c,f,v,V){if(Array.isArray(c))for(var D=0;D<c.length;D++)Io(a,c[D],f,v,V);else v=l(v)?!!v.capture:!!v,f=Jd(f),a&&a[Re]?(a=a.i,D=String(c).toString(),D in a.g&&(c=a.g[D],f=rt(c,f,v,V),f>-1&&(F(c[f]),Array.prototype.splice.call(c,f,1),c.length==0&&(delete a.g[D],a.h--)))):a&&(a=Gl(a))&&(c=a.g[c.toString()],a=-1,c&&(a=rt(c,f,v,V)),(f=a>-1?c[a]:null)&&dr(f))}function dr(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[Re])jt(c.i,a);else{var f=a.type,v=a.proxy;c.removeEventListener?c.removeEventListener(f,v,a.capture):c.detachEvent?c.detachEvent(ql(f),v):c.addListener&&c.removeListener&&c.removeListener(v),(f=Gl(c))?(jt(f,a),f.h==0&&(f.src=null,c[Ot]=null)):F(a)}}}function ql(a){return a in Bi?Bi[a]:Bi[a]="on"+a}function B_(a,c){if(a.da)a=!0;else{c=new de(c,this);const f=a.listener,v=a.ha||a.src;a.fa&&dr(a),a=f.call(v,c)}return a}function Gl(a){return a=a[Ot],a instanceof Me?a:null}var Ql="__closure_events_fn_"+(Math.random()*1e9>>>0);function Jd(a){return typeof a=="function"?a:(a[Ql]||(a[Ql]=function(c){return a.handleEvent(c)}),a[Ql])}function Ke(){I.call(this),this.i=new Me(this),this.M=this,this.G=null}m(Ke,I),Ke.prototype[Re]=!0,Ke.prototype.removeEventListener=function(a,c,f,v){Io(this,a,c,f,v)};function it(a,c){var f,v=a.G;if(v)for(f=[];v;v=v.G)f.push(v);if(a=a.M,v=c.type||c,typeof c=="string")c=new R(c,a);else if(c instanceof R)c.target=c.target||a;else{var V=c;c=new R(v,a),Ce(c,V)}V=!0;let D,B;if(f)for(B=f.length-1;B>=0;B--)D=c.g=f[B],V=Ao(D,v,!0,c)&&V;if(D=c.g=a,V=Ao(D,v,!0,c)&&V,V=Ao(D,v,!1,c)&&V,f)for(B=0;B<f.length;B++)D=c.g=f[B],V=Ao(D,v,!1,c)&&V}Ke.prototype.N=function(){if(Ke.Z.N.call(this),this.i){var a=this.i;for(const c in a.g){const f=a.g[c];for(let v=0;v<f.length;v++)F(f[v]);delete a.g[c],a.h--}}this.G=null},Ke.prototype.J=function(a,c,f,v){return this.i.add(String(a),c,!1,f,v)},Ke.prototype.K=function(a,c,f,v){return this.i.add(String(a),c,!0,f,v)};function Ao(a,c,f,v){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();let V=!0;for(let D=0;D<c.length;++D){const B=c[D];if(B&&!B.da&&B.capture==f){const J=B.listener,De=B.ha||B.src;B.fa&&jt(a.i,B),V=J.call(De,v)!==!1&&V}}return V&&!v.defaultPrevented}function $_(a,c){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:o.setTimeout(a,c||0)}function Zd(a){a.g=$_(()=>{a.g=null,a.i&&(a.i=!1,Zd(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class H_ extends I{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Zd(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $i(a){I.call(this),this.h=a,this.g={}}m($i,I);var ef=[];function tf(a){$(a.g,function(c,f){this.g.hasOwnProperty(f)&&dr(c)},a),a.g={}}$i.prototype.N=function(){$i.Z.N.call(this),tf(this)},$i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kl=o.JSON.stringify,W_=o.JSON.parse,q_=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function nf(){}function rf(){}var Hi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yl(){R.call(this,"d")}m(Yl,R);function Xl(){R.call(this,"c")}m(Xl,R);var fr={},sf=null;function Ro(){return sf=sf||new Ke}fr.Ia="serverreachability";function of(a){R.call(this,fr.Ia,a)}m(of,R);function Wi(a){const c=Ro();it(c,new of(c))}fr.STAT_EVENT="statevent";function af(a,c){R.call(this,fr.STAT_EVENT,a),this.stat=c}m(af,R);function st(a){const c=Ro();it(c,new af(c,a))}fr.Ja="timingevent";function lf(a,c){R.call(this,fr.Ja,a),this.size=c}m(lf,R);function qi(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},c)}function Gi(){this.g=!0}Gi.prototype.ua=function(){this.g=!1};function G_(a,c,f,v,V,D){a.info(function(){if(a.g)if(D){var B="",J=D.split("&");for(let ue=0;ue<J.length;ue++){var De=J[ue].split("=");if(De.length>1){const Fe=De[0];De=De[1];const qt=Fe.split("_");B=qt.length>=2&&qt[1]=="type"?B+(Fe+"="+De+"&"):B+(Fe+"=redacted&")}}}else B=null;else B=D;return"XMLHTTP REQ ("+v+") [attempt "+V+"]: "+c+`
`+f+`
`+B})}function Q_(a,c,f,v,V,D,B){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+V+"]: "+c+`
`+f+`
`+D+" "+B})}function $r(a,c,f,v){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+Y_(a,f)+(v?" "+v:"")})}function K_(a,c){a.info(function(){return"TIMEOUT: "+c})}Gi.prototype.info=function(){};function Y_(a,c){if(!a.g)return c;if(!c)return null;try{const D=JSON.parse(c);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var f=D[a];if(!(f.length<2)){var v=f[1];if(Array.isArray(v)&&!(v.length<1)){var V=v[0];if(V!="noop"&&V!="stop"&&V!="close")for(let B=1;B<v.length;B++)v[B]=""}}}}return Kl(D)}catch{return c}}var Co={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},uf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},cf;function Jl(){}m(Jl,nf),Jl.prototype.g=function(){return new XMLHttpRequest},cf=new Jl;function Qi(a){return encodeURIComponent(String(a))}function X_(a){var c=1;a=a.split(":");const f=[];for(;c>0&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function En(a,c,f,v){this.j=a,this.i=c,this.l=f,this.S=v||1,this.V=new $i(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hf}function hf(){this.i=null,this.g="",this.h=!1}var df={},Zl={};function eu(a,c,f){a.M=1,a.A=ko(Wt(c)),a.u=f,a.R=!0,ff(a,null)}function ff(a,c){a.F=Date.now(),Po(a),a.B=Wt(a.A);var f=a.B,v=a.S;Array.isArray(v)||(v=[String(v)]),Af(f.i,"t",v),a.C=0,f=a.j.L,a.h=new hf,a.g=Hf(a.j,f?c:null,!a.u),a.P>0&&(a.O=new H_(h(a.Y,a,a.g),a.P)),c=a.V,f=a.g,v=a.ba;var V="readystatechange";Array.isArray(V)||(V&&(ef[0]=V.toString()),V=ef);for(let D=0;D<V.length;D++){const B=So(f,V[D],v||c.handleEvent,!1,c.h||c);if(!B)break;c.g[B.key]=B}c=a.J?ee(a.J):{},a.u?(a.v||(a.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,c)):(a.v="GET",a.g.ea(a.B,a.v,null,c)),Wi(),G_(a.i,a.v,a.B,a.l,a.S,a.u)}En.prototype.ba=function(a){a=a.target;const c=this.O;c&&Sn(a)==3?c.j():this.Y(a)},En.prototype.Y=function(a){try{if(a==this.g)e:{const J=Sn(this.g),De=this.g.ya(),ue=this.g.ca();if(!(J<3)&&(J!=3||this.g&&(this.h.h||this.g.la()||Vf(this.g)))){this.K||J!=4||De==7||(De==8||ue<=0?Wi(3):Wi(2)),tu(this);var c=this.g.ca();this.X=c;var f=J_(this);if(this.o=c==200,Q_(this.i,this.v,this.B,this.l,this.S,J,c),this.o){if(this.U&&!this.L){t:{if(this.g){var v,V=this.g;if((v=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(v)){var D=v;break t}}D=null}if(a=D)$r(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,nu(this,a);else{this.o=!1,this.m=3,st(12),pr(this),Ki(this);break e}}if(this.R){a=!0;let Fe;for(;!this.K&&this.C<f.length;)if(Fe=Z_(this,f),Fe==Zl){J==4&&(this.m=4,st(14),a=!1),$r(this.i,this.l,null,"[Incomplete Response]");break}else if(Fe==df){this.m=4,st(15),$r(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else $r(this.i,this.l,Fe,null),nu(this,Fe);if(pf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),J!=4||f.length!=0||this.h.h||(this.m=1,st(16),a=!1),this.o=this.o&&a,!a)$r(this.i,this.l,f,"[Invalid Chunked Response]"),pr(this),Ki(this);else if(f.length>0&&!this.W){this.W=!0;var B=this.j;B.g==this&&B.aa&&!B.P&&(B.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),cu(B),B.P=!0,st(11))}}else $r(this.i,this.l,f,null),nu(this,f);J==4&&pr(this),this.o&&!this.K&&(J==4?zf(this.j,this):(this.o=!1,Po(this)))}else f1(this.g),c==400&&f.indexOf("Unknown SID")>0?(this.m=3,st(12)):(this.m=0,st(13)),pr(this),Ki(this)}}}catch{}finally{}};function J_(a){if(!pf(a))return a.g.la();const c=Vf(a.g);if(c==="")return"";let f="";const v=c.length,V=Sn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return pr(a),Ki(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<v;D++)a.h.h=!0,f+=a.h.i.decode(c[D],{stream:!(V&&D==v-1)});return c.length=0,a.h.g+=f,a.C=0,a.h.g}function pf(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Z_(a,c){var f=a.C,v=c.indexOf(`
`,f);return v==-1?Zl:(f=Number(c.substring(f,v)),isNaN(f)?df:(v+=1,v+f>c.length?Zl:(c=c.slice(v,v+f),a.C=v+f,c)))}En.prototype.cancel=function(){this.K=!0,pr(this)};function Po(a){a.T=Date.now()+a.H,mf(a,a.H)}function mf(a,c){if(a.D!=null)throw Error("WatchDog timer not null");a.D=qi(h(a.aa,a),c)}function tu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}En.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(K_(this.i,this.B),this.M!=2&&(Wi(),st(17)),pr(this),this.m=2,Ki(this)):mf(this,this.T-a)};function Ki(a){a.j.I==0||a.K||zf(a.j,a)}function pr(a){tu(a);var c=a.O;c&&typeof c.dispose=="function"&&c.dispose(),a.O=null,tf(a.V),a.g&&(c=a.g,a.g=null,c.abort(),c.dispose())}function nu(a,c){try{var f=a.j;if(f.I!=0&&(f.g==a||ru(f.h,a))){if(!a.L&&ru(f.h,a)&&f.I==3){try{var v=f.Ba.g.parse(c)}catch{v=null}if(Array.isArray(v)&&v.length==3){var V=v;if(V[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)jo(f),Vo(f);else break e;uu(f),st(18)}}else f.xa=V[1],0<f.xa-f.K&&V[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=qi(h(f.Va,f),6e3));vf(f.h)<=1&&f.ta&&(f.ta=void 0)}else gr(f,11)}else if((a.L||f.g==a)&&jo(f),!S(c))for(V=f.Ba.g.parse(c),c=0;c<V.length;c++){let ue=V[c];const Fe=ue[0];if(!(Fe<=f.K))if(f.K=Fe,ue=ue[1],f.I==2)if(ue[0]=="c"){f.M=ue[1],f.ba=ue[2];const qt=ue[3];qt!=null&&(f.ka=qt,f.j.info("VER="+f.ka));const yr=ue[4];yr!=null&&(f.za=yr,f.j.info("SVER="+f.za));const In=ue[5];In!=null&&typeof In=="number"&&In>0&&(v=1.5*In,f.O=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const An=a.g;if(An){const Lo=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lo){var D=v.h;D.g||Lo.indexOf("spdy")==-1&&Lo.indexOf("quic")==-1&&Lo.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(iu(D,D.h),D.h=null))}if(v.G){const hu=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;hu&&(v.wa=hu,fe(v.J,v.G,hu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),v=f;var B=a;if(v.na=$f(v,v.L?v.ba:null,v.W),B.L){_f(v.h,B);var J=B,De=v.O;De&&(J.H=De),J.D&&(tu(J),Po(J)),v.g=B}else Mf(v);f.i.length>0&&Do(f)}else ue[0]!="stop"&&ue[0]!="close"||gr(f,7);else f.I==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?gr(f,7):lu(f):ue[0]!="noop"&&f.l&&f.l.qa(ue),f.A=0)}}Wi(4)}catch{}}var e1=class{constructor(a,c){this.g=a,this.map=c}};function gf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function vf(a){return a.h?1:a.g?a.g.size:0}function ru(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function iu(a,c){a.g?a.g.add(c):a.h=c}function _f(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}gf.prototype.cancel=function(){if(this.i=wf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function wf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.G);return c}return A(a.i)}var Ef=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function t1(a,c){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const v=a[f].indexOf("=");let V,D=null;v>=0?(V=a[f].substring(0,v),D=a[f].substring(v+1)):V=a[f],c(V,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function xn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;a instanceof xn?(this.l=a.l,Yi(this,a.j),this.o=a.o,this.g=a.g,Xi(this,a.u),this.h=a.h,su(this,Rf(a.i)),this.m=a.m):a&&(c=String(a).match(Ef))?(this.l=!1,Yi(this,c[1]||"",!0),this.o=Ji(c[2]||""),this.g=Ji(c[3]||"",!0),Xi(this,c[4]),this.h=Ji(c[5]||"",!0),su(this,c[6]||"",!0),this.m=Ji(c[7]||"")):(this.l=!1,this.i=new es(null,this.l))}xn.prototype.toString=function(){const a=[];var c=this.j;c&&a.push(Zi(c,xf,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Zi(c,xf,!0),"@"),a.push(Qi(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Zi(f,f.charAt(0)=="/"?i1:r1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Zi(f,o1)),a.join("")},xn.prototype.resolve=function(a){const c=Wt(this);let f=!!a.j;f?Yi(c,a.j):f=!!a.o,f?c.o=a.o:f=!!a.g,f?c.g=a.g:f=a.u!=null;var v=a.h;if(f)Xi(c,a.u);else if(f=!!a.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var V=c.h.lastIndexOf("/");V!=-1&&(v=c.h.slice(0,V+1)+v)}if(V=v,V==".."||V==".")v="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){v=V.lastIndexOf("/",0)==0,V=V.split("/");const D=[];for(let B=0;B<V.length;){const J=V[B++];J=="."?v&&B==V.length&&D.push(""):J==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),v&&B==V.length&&D.push("")):(D.push(J),v=!0)}v=D.join("/")}else v=V}return f?c.h=v:f=a.i.toString()!=="",f?su(c,Rf(a.i)):f=!!a.m,f&&(c.m=a.m),c};function Wt(a){return new xn(a)}function Yi(a,c,f){a.j=f?Ji(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Xi(a,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);a.u=c}else a.u=null}function su(a,c,f){c instanceof es?(a.i=c,a1(a.i,a.l)):(f||(c=Zi(c,s1)),a.i=new es(c,a.l))}function fe(a,c,f){a.i.set(c,f)}function ko(a){return fe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Ji(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Zi(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,n1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function n1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var xf=/[#\/\?@]/g,r1=/[#\?:]/g,i1=/[#\?]/g,s1=/[#\?@]/g,o1=/#/g;function es(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function mr(a){a.g||(a.g=new Map,a.h=0,a.i&&t1(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=es.prototype,t.add=function(a,c){mr(this),this.i=null,a=Hr(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function Tf(a,c){mr(a),c=Hr(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function Sf(a,c){return mr(a),c=Hr(a,c),a.g.has(c)}t.forEach=function(a,c){mr(this),this.g.forEach(function(f,v){f.forEach(function(V){a.call(c,V,v,this)},this)},this)};function If(a,c){mr(a);let f=[];if(typeof c=="string")Sf(a,c)&&(f=f.concat(a.g.get(Hr(a,c))));else for(a=Array.from(a.g.values()),c=0;c<a.length;c++)f=f.concat(a[c]);return f}t.set=function(a,c){return mr(this),this.i=null,a=Hr(this,a),Sf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=If(this,a),a.length>0?String(a[0]):c):c};function Af(a,c,f){Tf(a,c),f.length>0&&(a.i=null,a.g.set(Hr(a,c),A(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(let v=0;v<c.length;v++){var f=c[v];const V=Qi(f);f=If(this,f);for(let D=0;D<f.length;D++){let B=V;f[D]!==""&&(B+="="+Qi(f[D])),a.push(B)}}return this.i=a.join("&")};function Rf(a){const c=new es;return c.i=a.i,a.g&&(c.g=new Map(a.g),c.h=a.h),c}function Hr(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function a1(a,c){c&&!a.j&&(mr(a),a.i=null,a.g.forEach(function(f,v){const V=v.toLowerCase();v!=V&&(Tf(this,v),Af(this,V,f))},a)),a.j=c}function l1(a,c){const f=new Gi;if(o.Image){const v=new Image;v.onload=p(Tn,f,"TestLoadImage: loaded",!0,c,v),v.onerror=p(Tn,f,"TestLoadImage: error",!1,c,v),v.onabort=p(Tn,f,"TestLoadImage: abort",!1,c,v),v.ontimeout=p(Tn,f,"TestLoadImage: timeout",!1,c,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else c(!1)}function u1(a,c){const f=new Gi,v=new AbortController,V=setTimeout(()=>{v.abort(),Tn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:v.signal}).then(D=>{clearTimeout(V),D.ok?Tn(f,"TestPingServer: ok",!0,c):Tn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(V),Tn(f,"TestPingServer: error",!1,c)})}function Tn(a,c,f,v,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),v(f)}catch{}}function c1(){this.g=new q_}function ou(a){this.i=a.Sb||null,this.h=a.ab||!1}m(ou,nf),ou.prototype.g=function(){return new bo(this.i,this.h)};function bo(a,c){Ke.call(this),this.H=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(bo,Ke),t=bo.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=c,this.readyState=1,ns(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(c.body=a),(this.H||o).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ts(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ns(this)),this.g&&(this.readyState=3,ns(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Cf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Cf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?ts(this):ns(this),this.readyState==3&&Cf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,ts(this))},t.Na=function(a){this.g&&(this.response=a,ts(this))},t.ga=function(){this.g&&ts(this)};function ts(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ns(a)}t.setRequestHeader=function(a,c){this.A.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function ns(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Pf(a){let c="";return $(a,function(f,v){c+=v,c+=":",c+=f,c+=`\r
`}),c}function au(a,c,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Pf(f),typeof a=="string"?f!=null&&Qi(f):fe(a,c,f))}function xe(a){Ke.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(xe,Ke);var h1=/^https?$/i,d1=["POST","PUT"];t=xe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,c,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cf.g(),this.g.onreadystatechange=y(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(D){kf(this,D);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var V in v)f.set(V,v[V]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const D of v.keys())f.set(D,v.get(D));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),V=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(d1,c,void 0)>=0)||v||V||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,B]of f)this.g.setRequestHeader(D,B);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){kf(this,D)}};function kf(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.o=5,bf(a),No(a)}function bf(a){a.A||(a.A=!0,it(a,"complete"),it(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,it(this,"complete"),it(this,"abort"),No(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),No(this,!0)),xe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Nf(this):this.Xa())},t.Xa=function(){Nf(this)};function Nf(a){if(a.h&&typeof s<"u"){if(a.v&&Sn(a)==4)setTimeout(a.Ca.bind(a),0);else if(it(a,"readystatechange"),Sn(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var v;if(v=D===0){let B=String(a.D).match(Ef)[1]||null;!B&&o.self&&o.self.location&&(B=o.self.location.protocol.slice(0,-1)),v=!h1.test(B?B.toLowerCase():"")}f=v}if(f)it(a,"complete"),it(a,"success");else{a.o=6;try{var V=Sn(a)>2?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.ca()+"]",bf(a)}}finally{No(a)}}}}function No(a,c){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,c||it(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Sn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Sn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),W_(c)}};function Vf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function f1(a){const c={};a=(a.g&&Sn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(S(a[v]))continue;var f=X_(a[v]);const V=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=c[V]||[];c[V]=D,D.push(f)}K(c,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function rs(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function Df(a){this.za=0,this.i=[],this.j=new Gi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=rs("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=rs("baseRetryDelayMs",5e3,a),this.Za=rs("retryDelaySeedMs",1e4,a),this.Ta=rs("forwardChannelMaxRetries",2,a),this.va=rs("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new gf(a&&a.concurrentRequestLimit),this.Ba=new c1,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Df.prototype,t.ka=8,t.I=1,t.connect=function(a,c,f,v){st(0),this.W=a,this.H=c||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.J=$f(this,null,this.W),Do(this)};function lu(a){if(jf(a),a.I==3){var c=a.V++,f=Wt(a.J);if(fe(f,"SID",a.M),fe(f,"RID",c),fe(f,"TYPE","terminate"),is(a,f),c=new En(a,a.j,c),c.M=2,c.A=ko(Wt(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(c.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=c.A,f=!0),f||(c.g=Hf(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Po(c)}Bf(a)}function Vo(a){a.g&&(cu(a),a.g.cancel(),a.g=null)}function jf(a){Vo(a),a.v&&(o.clearTimeout(a.v),a.v=null),jo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Do(a){if(!yf(a.h)&&!a.m){a.m=!0;var c=a.Ea;O||g(),j||(O(),j=!0),E.add(c,a),a.D=0}}function p1(a,c){return vf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=c.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=qi(h(a.Ea,a,c),Uf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const V=new En(this,this.j,a);let D=this.o;if(this.U&&(D?(D=ee(D),Ce(D,this.U)):D=this.U),this.u!==null||this.R||(V.J=D,D=null),this.S)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(c+=v,c>4096){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=Lf(this,V,c),f=Wt(this.J),fe(f,"RID",a),fe(f,"CVER",22),this.G&&fe(f,"X-HTTP-Session-Id",this.G),is(this,f),D&&(this.R?c="headers="+Qi(Pf(D))+"&"+c:this.u&&au(f,this.u,D)),iu(this.h,V),this.Ra&&fe(f,"TYPE","init"),this.S?(fe(f,"$req",c),fe(f,"SID","null"),V.U=!0,eu(V,f,null)):eu(V,f,c),this.I=2}}else this.I==3&&(a?Of(this,a):this.i.length==0||yf(this.h)||Of(this))};function Of(a,c){var f;c?f=c.l:f=a.V++;const v=Wt(a.J);fe(v,"SID",a.M),fe(v,"RID",f),fe(v,"AID",a.K),is(a,v),a.u&&a.o&&au(v,a.u,a.o),f=new En(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),c&&(a.i=c.G.concat(a.i)),c=Lf(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),iu(a.h,f),eu(f,v,c)}function is(a,c){a.H&&$(a.H,function(f,v){fe(c,v,f)}),a.l&&$({},function(f,v){fe(c,v,f)})}function Lf(a,c,f){f=Math.min(a.i.length,f);const v=a.l?h(a.l.Ka,a.l,a):null;e:{var V=a.i;let J=-1;for(;;){const De=["count="+f];J==-1?f>0?(J=V[0].g,De.push("ofs="+J)):J=0:De.push("ofs="+J);let ue=!0;for(let Fe=0;Fe<f;Fe++){var D=V[Fe].g;const qt=V[Fe].map;if(D-=J,D<0)J=Math.max(0,V[Fe].g-100),ue=!1;else try{D="req"+D+"_"||"";try{var B=qt instanceof Map?qt:Object.entries(qt);for(const[yr,In]of B){let An=In;l(In)&&(An=Kl(In)),De.push(D+yr+"="+encodeURIComponent(An))}}catch(yr){throw De.push(D+"type="+encodeURIComponent("_badmap")),yr}}catch{v&&v(qt)}}if(ue){B=De.join("&");break e}}B=void 0}return a=a.i.splice(0,f),c.G=a,B}function Mf(a){if(!a.g&&!a.v){a.Y=1;var c=a.Da;O||g(),j||(O(),j=!0),E.add(c,a),a.A=0}}function uu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=qi(h(a.Da,a),Uf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Ff(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=qi(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,st(10),Vo(this),Ff(this))};function cu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Ff(a){a.g=new En(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var c=Wt(a.na);fe(c,"RID","rpc"),fe(c,"SID",a.M),fe(c,"AID",a.K),fe(c,"CI",a.F?"0":"1"),!a.F&&a.ia&&fe(c,"TO",a.ia),fe(c,"TYPE","xmlhttp"),is(a,c),a.u&&a.o&&au(c,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=ko(Wt(c)),f.u=null,f.R=!0,ff(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Vo(this),uu(this),st(19))};function jo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function zf(a,c){var f=null;if(a.g==c){jo(a),cu(a),a.g=null;var v=2}else if(ru(a.h,c))f=c.G,_f(a.h,c),v=1;else return;if(a.I!=0){if(c.o)if(v==1){f=c.u?c.u.length:0,c=Date.now()-c.F;var V=a.D;v=Ro(),it(v,new lf(v,f)),Do(a)}else Mf(a);else if(V=c.m,V==3||V==0&&c.X>0||!(v==1&&p1(a,c)||v==2&&uu(a)))switch(f&&f.length>0&&(c=a.h,c.i=c.i.concat(f)),V){case 1:gr(a,5);break;case 4:gr(a,10);break;case 3:gr(a,6);break;default:gr(a,2)}}}function Uf(a,c){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*c}function gr(a,c){if(a.j.info("Error code "+c),c==2){var f=h(a.bb,a),v=a.Ua;const V=!v;v=new xn(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Yi(v,"https"),ko(v),V?l1(v.toString(),f):u1(v.toString(),f)}else st(2);a.I=0,a.l&&a.l.pa(c),Bf(a),jf(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function Bf(a){if(a.I=0,a.ja=[],a.l){const c=wf(a.h);(c.length!=0||a.i.length!=0)&&(b(a.ja,c),b(a.ja,a.i),a.h.i.length=0,A(a.i),a.i.length=0),a.l.oa()}}function $f(a,c,f){var v=f instanceof xn?Wt(f):new xn(f);if(v.g!="")c&&(v.g=c+"."+v.g),Xi(v,v.u);else{var V=o.location;v=V.protocol,c=c?c+"."+V.hostname:V.hostname,V=+V.port;const D=new xn(null);v&&Yi(D,v),c&&(D.g=c),V&&Xi(D,V),f&&(D.h=f),v=D}return f=a.G,c=a.wa,f&&c&&fe(v,f,c),fe(v,"VER",a.ka),is(a,v),v}function Hf(a,c,f){if(c&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Aa&&!a.ma?new xe(new ou({ab:f})):new xe(a.ma),c.Fa(a.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wf(){}t=Wf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Oo(){}Oo.prototype.g=function(a,c){return new yt(a,c)};function yt(a,c){Ke.call(this),this.g=new Df(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(a?a["X-WebChannel-Client-Profile"]=c.sa:a={"X-WebChannel-Client-Profile":c.sa}),this.g.U=a,(a=c&&c.Qb)&&!S(a)&&(this.g.u=a),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!S(c)&&(this.g.G=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Wr(this)}m(yt,Ke),yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yt.prototype.close=function(){lu(this.g)},yt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=Kl(a),a=f);c.i.push(new e1(c.Ya++,a)),c.I==3&&Do(c)},yt.prototype.N=function(){this.g.l=null,delete this.j,lu(this.g),delete this.g,yt.Z.N.call(this)};function qf(a){Yl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}m(qf,Yl);function Gf(){Xl.call(this),this.status=1}m(Gf,Xl);function Wr(a){this.g=a}m(Wr,Wf),Wr.prototype.ra=function(){it(this.g,"a")},Wr.prototype.qa=function(a){it(this.g,new qf(a))},Wr.prototype.pa=function(a){it(this.g,new Gf)},Wr.prototype.oa=function(){it(this.g,"b")},Oo.prototype.createWebChannel=Oo.prototype.g,yt.prototype.send=yt.prototype.o,yt.prototype.open=yt.prototype.m,yt.prototype.close=yt.prototype.close,d0=function(){return new Oo},h0=function(){return Ro()},c0=fr,Yc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Co.NO_ERROR=0,Co.TIMEOUT=8,Co.HTTP_ERROR=6,wa=Co,uf.COMPLETE="complete",u0=uf,rf.EventType=Hi,Hi.OPEN="a",Hi.CLOSE="b",Hi.ERROR="c",Hi.MESSAGE="d",Ke.prototype.listen=Ke.prototype.J,vs=rf,xe.prototype.listenOnce=xe.prototype.K,xe.prototype.getLastError=xe.prototype.Ha,xe.prototype.getLastErrorCode=xe.prototype.ya,xe.prototype.getStatus=xe.prototype.ca,xe.prototype.getResponseJson=xe.prototype.La,xe.prototype.getResponseText=xe.prototype.la,xe.prototype.send=xe.prototype.ea,xe.prototype.setWithCredentials=xe.prototype.Fa,l0=xe}).apply(typeof ta<"u"?ta:typeof self<"u"?self:typeof window<"u"?window:{});const Im="@firebase/firestore",Am="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Li="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new t0("@firebase/firestore");function Gr(){return jr.logLevel}function W(t,...e){if(jr.logLevel<=ie.DEBUG){const n=e.map(gd);jr.debug(`Firestore (${Li}): ${t}`,...n)}}function vn(t,...e){if(jr.logLevel<=ie.ERROR){const n=e.map(gd);jr.error(`Firestore (${Li}): ${t}`,...n)}}function Ii(t,...e){if(jr.logLevel<=ie.WARN){const n=e.map(gd);jr.warn(`Firestore (${Li}): ${t}`,...n)}}function gd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,f0(t,r,n)}function f0(t,e,n){let r=`FIRESTORE (${Li}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vn(r),new Error(r)}function ae(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||f0(e,i,r)}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ze.UNAUTHENTICATED))}shutdown(){}}class MS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class FS{constructor(e){this.t=e,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ae(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string",31837,{l:r}),new p0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string",2055,{h:e}),new Ze(e)}}class zS{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class US{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new zS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xS(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ae(this.o===void 0,3512);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Rm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Rm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=$S(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function te(t,e){return t<e?-1:t>e?1:0}function Xc(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return $u(i)===$u(s)?te(i,s):$u(i)?1:-1}return te(t.length,e.length)}const HS=55296,WS=57343;function $u(t){const e=t.charCodeAt(0);return e>=HS&&e<=WS}function Ai(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="__name__";class Kt{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Kt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kt?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Kt.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return te(e.length,n.length)}static compareSegments(e,n){const r=Kt.isNumericId(e),i=Kt.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Kt.extractNumericId(e).compare(Kt.extractNumericId(n)):Xc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qn.fromString(e.substring(4,e.length-2))}}class ce extends Kt{construct(e,n,r){return new ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ce(n)}static emptyPath(){return new ce([])}}const qS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class We extends Kt{construct(e,n,r){return new We(e,n,r)}static isValidIdentifier(e){return qS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),We.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cm}static keyField(){return new We([Cm])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new H(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new H(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new We(n)}static emptyPath(){return new We([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(ce.fromString(e))}static fromName(e){return new G(ce.fromString(e).popFirst(5))}static empty(){return new G(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new ce(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t,e,n){if(!n)throw new H(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GS(t,e,n,r){if(e===!0&&r===!0)throw new H(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Pm(t){if(!G.isDocumentKey(t))throw new H(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function km(t){if(G.isDocumentKey(t))throw new H(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function g0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function kl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function Cr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kl(t);throw new H(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t,e){const n={typeString:t};return e&&(n.value=e),n}function vo(t,e){if(!g0(t))throw new H(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new H(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=-62135596800,Nm=1e6;class me{static now(){return me.fromMillis(Date.now())}static fromDate(e){return me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Nm);return new me(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<bm)throw new H(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nm}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vo(e,me._jsonSchema))return new me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}me._jsonSchemaVersion="firestore/timestamp/1.0",me._jsonSchema={type:Ne("string",me._jsonSchemaVersion),seconds:Ne("number"),nanoseconds:Ne("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{static fromTimestamp(e){return new Y(e)}static min(){return new Y(new me(0,0))}static max(){return new Y(new me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=-1;function QS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new me(n+1,0):new me(n,r));return new Jn(i,G.empty(),e)}function KS(t){return new Jn(t.readTime,t.key,ro)}class Jn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Jn(Y.min(),G.empty(),ro)}static max(){return new Jn(Y.max(),G.empty(),ro)}}function YS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mi(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==XS)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++l,l===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function ZS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=-1;function Nl(t){return t==null}function tl(t){return t===0&&1/t==-1/0}function eI(t){return typeof t=="number"&&Number.isInteger(t)&&!tl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="";function tI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Vm(e)),e=nI(t.get(n),e);return Vm(e)}function nI(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case y0:n+="";break;default:n+=s}}return n}function Vm(t){return t+y0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function v0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,n){this.comparator=e,this.root=n||He.EMPTY}insert(e,n){return new Ee(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,He.BLACK,null,null))}remove(e){return new Ee(this.comparator,this.root.remove(e,this.comparator).copy(null,null,He.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new na(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new na(this.root,e,this.comparator,!1)}getReverseIterator(){return new na(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new na(this.root,e,this.comparator,!0)}}class na{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class He{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??He.RED,this.left=i??He.EMPTY,this.right=s??He.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new He(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return He.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return He.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,He.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,He.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}He.EMPTY=null,He.RED=!0,He.BLACK=!1;He.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new He(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jm(this.data.getIterator())}getIteratorFrom(e){return new jm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Le)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Le(this.comparator);return n.data=e,n}}class jm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new wt([])}unionWith(e){let n=new Le(We.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ai(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new _0("Invalid base64 string: "+s):s}}(e);return new Qe(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Qe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const rI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zn(t){if(ae(!!t,39018),typeof t=="string"){let e=0;const n=rI.exec(t);if(ae(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function er(t){return typeof t=="string"?Qe.fromBase64String(t):Qe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="server_timestamp",E0="__type__",x0="__previous_value__",T0="__local_write_time__";function _d(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[E0])==null?void 0:r.stringValue)===w0}function Vl(t){const e=t.mapValue.fields[x0];return _d(e)?Vl(e):e}function io(t){const e=Zn(t.mapValue.fields[T0].timestampValue);return new me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,r,i,s,o,l,u,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p}}const nl="(default)";class so{constructor(e,n){this.projectId=e,this.database=n||nl}static empty(){return new so("","")}get isDefaultDatabase(){return this.database===nl}isEqual(e){return e instanceof so&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="__type__",sI="__max__",ra={mapValue:{}},I0="__vector__",rl="value";function tr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_d(t)?4:aI(t)?9007199254740991:oI(t)?10:11:Q(28295,{value:t})}function on(t,e){if(t===e)return!0;const n=tr(t);if(n!==tr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return io(t).isEqual(io(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Zn(i.timestampValue),l=Zn(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return er(i.bytesValue).isEqual(er(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Se(i.geoPointValue.latitude)===Se(s.geoPointValue.latitude)&&Se(i.geoPointValue.longitude)===Se(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Se(i.integerValue)===Se(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Se(i.doubleValue),l=Se(s.doubleValue);return o===l?tl(o)===tl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ai(t.arrayValue.values||[],e.arrayValue.values||[],on);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Dm(o)!==Dm(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!on(o[u],l[u])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function oo(t,e){return(t.values||[]).find(n=>on(n,e))!==void 0}function Ri(t,e){if(t===e)return 0;const n=tr(t),r=tr(e);if(n!==r)return te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return te(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Se(s.integerValue||s.doubleValue),u=Se(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Om(t.timestampValue,e.timestampValue);case 4:return Om(io(t),io(e));case 5:return Xc(t.stringValue,e.stringValue);case 6:return function(s,o){const l=er(s),u=er(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=te(l[h],u[h]);if(p!==0)return p}return te(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=te(Se(s.latitude),Se(o.latitude));return l!==0?l:te(Se(s.longitude),Se(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Lm(t.arrayValue,e.arrayValue);case 10:return function(s,o){var y,A,b,N;const l=s.fields||{},u=o.fields||{},h=(y=l[rl])==null?void 0:y.arrayValue,p=(A=u[rl])==null?void 0:A.arrayValue,m=te(((b=h==null?void 0:h.values)==null?void 0:b.length)||0,((N=p==null?void 0:p.values)==null?void 0:N.length)||0);return m!==0?m:Lm(h,p)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ra.mapValue&&o===ra.mapValue)return 0;if(s===ra.mapValue)return 1;if(o===ra.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const y=Xc(u[m],p[m]);if(y!==0)return y;const A=Ri(l[u[m]],h[p[m]]);if(A!==0)return A}return te(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{he:n})}}function Om(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return te(t,e);const n=Zn(t),r=Zn(e),i=te(n.seconds,r.seconds);return i!==0?i:te(n.nanos,r.nanos)}function Lm(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ri(n[i],r[i]);if(s)return s}return te(n.length,r.length)}function Ci(t){return Jc(t)}function Jc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return er(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Jc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Jc(n.fields[o])}`;return i+"}"}(t.mapValue):Q(61005,{value:t})}function Ea(t){switch(tr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vl(t);return e?16+Ea(e):16;case 5:return 2*t.stringValue.length;case 6:return er(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Ea(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return cr(r.fields,(s,o)=>{i+=s.length+Ea(o)}),i}(t.mapValue);default:throw Q(13486,{value:t})}}function Mm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Zc(t){return!!t&&"integerValue"in t}function wd(t){return!!t&&"arrayValue"in t}function Fm(t){return!!t&&"nullValue"in t}function zm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xa(t){return!!t&&"mapValue"in t}function oI(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[S0])==null?void 0:r.stringValue)===I0}function Ns(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return cr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ns(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ns(t.arrayValue.values[n]);return e}return{...t}}function aI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===sI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.value=e}static empty(){return new dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ns(n)}setAll(e){let n=We.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Ns(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());xa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return on(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];xa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){cr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new dt(Ns(this.value))}}function A0(t){const e=[];return cr(t.fields,(n,r)=>{const i=new We([n]);if(xa(r)){const s=A0(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new wt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new tt(e,0,Y.min(),Y.min(),Y.min(),dt.empty(),0)}static newFoundDocument(e,n,r,i){return new tt(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new tt(e,2,n,Y.min(),Y.min(),dt.empty(),0)}static newUnknownDocument(e,n){return new tt(e,3,n,Y.min(),Y.min(),dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.position=e,this.inclusive=n}}function Um(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Ri(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!on(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n="asc"){this.field=e,this.dir=n}}function lI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{}class be extends R0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cI(e,n,r):n==="array-contains"?new fI(e,r):n==="in"?new pI(e,r):n==="not-in"?new mI(e,r):n==="array-contains-any"?new gI(e,r):new be(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hI(e,r):new dI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ri(n,this.value)):n!==null&&tr(this.value)===tr(n)&&this.matchesComparison(Ri(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends R0{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ht(e,n)}matches(e){return C0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function C0(t){return t.op==="and"}function P0(t){return uI(t)&&C0(t)}function uI(t){for(const e of t.filters)if(e instanceof Ht)return!1;return!0}function eh(t){if(t instanceof be)return t.field.canonicalString()+t.op.toString()+Ci(t.value);if(P0(t))return t.filters.map(e=>eh(e)).join(",");{const e=t.filters.map(n=>eh(n)).join(",");return`${t.op}(${e})`}}function k0(t,e){return t instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.field.isEqual(i.field)&&on(r.value,i.value)}(t,e):t instanceof Ht?function(r,i){return i instanceof Ht&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&k0(o,i.filters[l]),!0):!1}(t,e):void Q(19439)}function b0(t){return t instanceof be?function(n){return`${n.field.canonicalString()} ${n.op} ${Ci(n.value)}`}(t):t instanceof Ht?function(n){return n.op.toString()+" {"+n.getFilters().map(b0).join(" ,")+"}"}(t):"Filter"}class cI extends be{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class hI extends be{constructor(e,n){super(e,"in",n),this.keys=N0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dI extends be{constructor(e,n){super(e,"not-in",n),this.keys=N0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function N0(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class fI extends be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wd(n)&&oo(n.arrayValue,this.value)}}class pI extends be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&oo(this.value.arrayValue,n)}}class mI extends be{constructor(e,n){super(e,"not-in",n)}matches(e){if(oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!oo(this.value.arrayValue,n)}}class gI extends be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>oo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function $m(t,e=null,n=[],r=[],i=null,s=null,o=null){return new yI(t,e,n,r,i,s,o)}function Ed(t){const e=X(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>eh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Nl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ci(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ci(r)).join(",")),e.Te=n}return e.Te}function xd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!k0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Bm(t.startAt,e.startAt)&&Bm(t.endAt,e.endAt)}function th(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vI(t,e,n,r,i,s,o,l){return new zi(t,e,n,r,i,s,o,l)}function Td(t){return new zi(t)}function Hm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function V0(t){return t.collectionGroup!==null}function Vs(t){const e=X(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Le(We.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ao(s,r))}),n.has(We.keyField().canonicalString())||e.Ie.push(new ao(We.keyField(),r))}return e.Ie}function Zt(t){const e=X(t);return e.Ee||(e.Ee=_I(e,Vs(t))),e.Ee}function _I(t,e){if(t.limitType==="F")return $m(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ao(i.field,s)});const n=t.endAt?new il(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new il(t.startAt.position,t.startAt.inclusive):null;return $m(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function nh(t,e){const n=t.filters.concat([e]);return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rh(t,e,n){return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dl(t,e){return xd(Zt(t),Zt(e))&&t.limitType===e.limitType}function D0(t){return`${Ed(Zt(t))}|lt:${t.limitType}`}function Qr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>b0(i)).join(", ")}]`),Nl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ci(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ci(i)).join(",")),`Target(${r})`}(Zt(t))}; limitType=${t.limitType})`}function jl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Vs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=Um(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Vs(r),i)||r.endAt&&!function(o,l,u){const h=Um(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Vs(r),i))}(t,e)}function wI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function j0(t){return(e,n)=>{let r=!1;for(const i of Vs(t)){const s=EI(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function EI(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Ri(u,h):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){cr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return v0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=new Ee(G.comparator);function _n(){return xI}const O0=new Ee(G.comparator);function _s(...t){let e=O0;for(const n of t)e=e.insert(n.key,n);return e}function L0(t){let e=O0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Sr(){return Ds()}function M0(){return Ds()}function Ds(){return new Fr(t=>t.toString(),(t,e)=>t.isEqual(e))}const TI=new Ee(G.comparator),SI=new Le(G.comparator);function ne(...t){let e=SI;for(const n of t)e=e.add(n);return e}const II=new Le(te);function AI(){return II}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tl(e)?"-0":e}}function F0(t){return{integerValue:""+t}}function RI(t,e){return eI(e)?F0(e):Sd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this._=void 0}}function CI(t,e,n){return t instanceof sl?function(i,s){const o={fields:{[E0]:{stringValue:w0},[T0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_d(s)&&(s=Vl(s)),s&&(o.fields[x0]=s),{mapValue:o}}(n,e):t instanceof lo?U0(t,e):t instanceof uo?B0(t,e):function(i,s){const o=z0(i,s),l=Wm(o)+Wm(i.Ae);return Zc(o)&&Zc(i.Ae)?F0(l):Sd(i.serializer,l)}(t,e)}function PI(t,e,n){return t instanceof lo?U0(t,e):t instanceof uo?B0(t,e):n}function z0(t,e){return t instanceof ol?function(r){return Zc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class sl extends Ol{}class lo extends Ol{constructor(e){super(),this.elements=e}}function U0(t,e){const n=$0(e);for(const r of t.elements)n.some(i=>on(i,r))||n.push(r);return{arrayValue:{values:n}}}class uo extends Ol{constructor(e){super(),this.elements=e}}function B0(t,e){let n=$0(e);for(const r of t.elements)n=n.filter(i=>!on(i,r));return{arrayValue:{values:n}}}class ol extends Ol{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Wm(t){return Se(t.integerValue||t.doubleValue)}function $0(t){return wd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function kI(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof lo&&i instanceof lo||r instanceof uo&&i instanceof uo?Ai(r.elements,i.elements,on):r instanceof ol&&i instanceof ol?on(r.Ae,i.Ae):r instanceof sl&&i instanceof sl}(t.transform,e.transform)}class bI{constructor(e,n){this.version=e,this.transformResults=n}}class en{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ta(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ll{}function H0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new q0(t.key,en.none()):new _o(t.key,t.data,en.none());{const n=t.data,r=dt.empty();let i=new Le(We.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hr(t.key,r,new wt(i.toArray()),en.none())}}function NI(t,e,n){t instanceof _o?function(i,s,o){const l=i.value.clone(),u=Gm(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof hr?function(i,s,o){if(!Ta(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Gm(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(W0(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function js(t,e,n,r){return t instanceof _o?function(s,o,l,u){if(!Ta(s.precondition,o))return l;const h=s.value.clone(),p=Qm(s.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof hr?function(s,o,l,u){if(!Ta(s.precondition,o))return l;const h=Qm(s.fieldTransforms,u,o),p=o.data;return p.setAll(W0(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return Ta(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function VI(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=z0(r.transform,i||null);s!=null&&(n===null&&(n=dt.empty()),n.set(r.field,s))}return n||null}function qm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ai(r,i,(s,o)=>kI(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _o extends Ll{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hr extends Ll{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function W0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Gm(t,e,n){const r=new Map;ae(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,PI(o,l,n[i]))}return r}function Qm(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,CI(s,o,e))}return r}class q0 extends Ll{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DI extends Ll{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&NI(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=js(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=js(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=M0();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=H0(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&Ai(this.mutations,e.mutations,(n,r)=>qm(n,r))&&Ai(this.baseMutations,e.baseMutations,(n,r)=>qm(n,r))}}class Id{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return TI}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Id(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe,re;function MI(t){switch(t){case L.OK:return Q(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function G0(t){if(t===void 0)return vn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Pe.OK:return L.OK;case Pe.CANCELLED:return L.CANCELLED;case Pe.UNKNOWN:return L.UNKNOWN;case Pe.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Pe.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Pe.INTERNAL:return L.INTERNAL;case Pe.UNAVAILABLE:return L.UNAVAILABLE;case Pe.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Pe.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Pe.NOT_FOUND:return L.NOT_FOUND;case Pe.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Pe.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Pe.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Pe.ABORTED:return L.ABORTED;case Pe.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Pe.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Pe.DATA_LOSS:return L.DATA_LOSS;default:return Q(39323,{code:t})}}(re=Pe||(Pe={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=new Qn([4294967295,4294967295],0);function Km(t){const e=FI().encode(t),n=new a0;return n.update(e),new Uint8Array(n.digest())}function Ym(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qn([n,r],0),new Qn([i,s],0)]}class Ad{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ws(`Invalid padding: ${n}`);if(r<0)throw new ws(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ws(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ws(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Qn.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Qn.fromNumber(r)));return i.compare(zI)===1&&(i=new Qn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Km(e),[r,i]=Ym(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Ad(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Km(e),[r,i]=Ym(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ws extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,wo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ml(Y.min(),i,new Ee(te),_n(),ne())}}class wo{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wo(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Q0{constructor(e,n){this.targetId=e,this.Ce=n}}class K0{constructor(e,n,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Xm{constructor(){this.ve=0,this.Fe=Jm(),this.Me=Qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ne(),n=ne(),r=ne();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:s})}}),new wo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Jm()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class UI{constructor(e){this.Ge=e,this.ze=new Map,this.je=_n(),this.Je=ia(),this.He=ia(),this.Ye=new Ee(te)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(th(s))if(r===0){const o=new G(s.path);this.et(n,o,tt.newNoDocument(o,Y.min()))}else ae(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=er(r).toUint8Array()}catch(u){if(u instanceof _0)return Ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Ad(o,i,s)}catch(u){return Ii(u instanceof ws?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&th(l.target)){const u=new G(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,tt.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=ne();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Ml(e,n,this.Ye,this.je,r);return this.je=_n(),this.Je=ia(),this.He=ia(),this.Ye=new Ee(te),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Xm,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Le(te),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Le(te),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Xm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ia(){return new Ee(G.comparator)}function Jm(){return new Ee(G.comparator)}const BI={asc:"ASCENDING",desc:"DESCENDING"},$I={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HI={and:"AND",or:"OR"};class WI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ih(t,e){return t.useProto3Json||Nl(e)?e:{value:e}}function al(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Y0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qI(t,e){return al(t,e.toTimestamp())}function tn(t){return ae(!!t,49232),Y.fromTimestamp(function(n){const r=Zn(n);return new me(r.seconds,r.nanos)}(t))}function Rd(t,e){return sh(t,e).canonicalString()}function sh(t,e){const n=function(i){return new ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function X0(t){const e=ce.fromString(t);return ae(n_(e),10190,{key:e.toString()}),e}function oh(t,e){return Rd(t.databaseId,e.path)}function Hu(t,e){const n=X0(e);if(n.get(1)!==t.databaseId.projectId)throw new H(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(Z0(n))}function J0(t,e){return Rd(t.databaseId,e)}function GI(t){const e=X0(t);return e.length===4?ce.emptyPath():Z0(e)}function ah(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Z0(t){return ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Zm(t,e,n){return{name:oh(t,e),fields:n.value.mapValue.fields}}function QI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Q(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(ae(p===void 0||typeof p=="string",58123),Qe.fromBase64String(p||"")):(ae(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Qe.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?L.UNKNOWN:G0(h.code);return new H(p,h.message||"")}(o);n=new K0(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hu(t,r.document.name),s=tn(r.document.updateTime),o=r.document.createTime?tn(r.document.createTime):Y.min(),l=new dt({mapValue:{fields:r.document.fields}}),u=tt.newFoundDocument(i,s,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Sa(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Hu(t,r.document),s=r.readTime?tn(r.readTime):Y.min(),o=tt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Sa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Hu(t,r.document),s=r.removedTargetIds||[];n=new Sa([],s,i,null)}else{if(!("filter"in e))return Q(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new LI(i,s),l=r.targetId;n=new Q0(l,o)}}return n}function KI(t,e){let n;if(e instanceof _o)n={update:Zm(t,e.key,e.value)};else if(e instanceof q0)n={delete:oh(t,e.key)};else if(e instanceof hr)n={update:Zm(t,e.key,e.data),updateMask:i2(e.fieldMask)};else{if(!(e instanceof DI))return Q(16599,{Vt:e.type});n={verify:oh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof sl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof lo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof uo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ol)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Q(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:qI(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q(27497)}(t,e.precondition)),n}function YI(t,e){return t&&t.length>0?(ae(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?tn(i.updateTime):tn(s);return o.isEqual(Y.min())&&(o=tn(s)),new bI(o,i.transformResults||[])}(n,e))):[]}function XI(t,e){return{documents:[J0(t,e.path)]}}function JI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=J0(t,i);const s=function(h){if(h.length!==0)return t_(Ht.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(p=>function(y){return{field:Kr(y.field),direction:t2(y.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=ih(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function ZI(t){let e=GI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ae(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const y=e_(m);return y instanceof Ht&&P0(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(y=>function(b){return new ao(Yr(b.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(m){let y;return y=typeof m=="object"?m.value:m,Nl(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(m){const y=!!m.before,A=m.values||[];return new il(A,y)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const y=!m.before,A=m.values||[];return new il(A,y)}(n.endAt)),vI(e,i,o,s,l,"F",u,h)}function e2(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function e_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Yr(n.unaryFilter.field);return be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Yr(n.unaryFilter.field);return be.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Yr(n.unaryFilter.field);return be.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Yr(n.unaryFilter.field);return be.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return be.create(Yr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ht.create(n.compositeFilter.filters.map(r=>e_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function t2(t){return BI[t]}function n2(t){return $I[t]}function r2(t){return HI[t]}function Kr(t){return{fieldPath:t.canonicalString()}}function Yr(t){return We.fromServerFormat(t.fieldPath)}function t_(t){return t instanceof be?function(n){if(n.op==="=="){if(zm(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NAN"}};if(Fm(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zm(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NOT_NAN"}};if(Fm(n.value))return{unaryFilter:{field:Kr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kr(n.field),op:n2(n.op),value:n.value}}}(t):t instanceof Ht?function(n){const r=n.getFilters().map(i=>t_(i));return r.length===1?r[0]:{compositeFilter:{op:r2(n.op),filters:r}}}(t):Q(54877,{filter:t})}function i2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function n_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n,r,i,s=Y.min(),o=Y.min(),l=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new On(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new On(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new On(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new On(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e){this.yt=e}}function o2(t){const e=ZI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.Cn=new l2}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Jn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Jn.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class l2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Le(ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Le(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},r_=41943040;class ct{static withCacheSize(e){return new ct(e,ct.DEFAULT_COLLECTION_PERCENTILE,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ct.DEFAULT_COLLECTION_PERCENTILE=10,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ct.DEFAULT=new ct(r_,ct.DEFAULT_COLLECTION_PERCENTILE,ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ct.DISABLED=new ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Pi(0)}static cr(){return new Pi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="LruGarbageCollector",u2=1048576;function ng([t,e],[n,r]){const i=te(t,n);return i===0?te(e,r):i}class c2{constructor(e){this.Ir=e,this.buffer=new Le(ng),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ng(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class h2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(tg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fi(n)?W(tg,"Ignoring IndexedDB error during garbage collection: ",n):await Mi(n)}await this.Vr(3e5)})}}class d2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(bl.ce);const r=new c2(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(eg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),Gr()<=ie.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function f2(t,e){return new d2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.changes=new Fr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&js(r.mutation,i,wt.empty(),me.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const i=Sr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=_s();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Sr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=_n();const o=Ds(),l=function(){return Ds()}();return n.forEach((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof hr)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),js(p.mutation,h,p.mutation.getFieldMask(),me.now())):o.set(h.key,wt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>l.set(h,new m2(p,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Ds();let i=new Ee((o,l)=>o-l),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||wt.empty();p=l.applyToLocalView(h,p),r.set(u,p);const m=(i.get(l.batchId)||ne()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,m=M0();p.forEach(y=>{if(!s.has(y)){const A=H0(n.get(y),r.get(y));A!==null&&m.set(y,A),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):V0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(Sr());let l=ro,u=s;return o.next(h=>M.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(p)?M.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{u=u.insert(p,y)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ne())).next(p=>({batchId:l,changes:L0(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=_s();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=_s();return this.indexManager.getCollectionParents(e,s).next(l=>M.forEach(l,u=>{const h=function(m,y){return new zi(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,tt.newInvalidDocument(p)))});let l=_s();return o.forEach((u,h)=>{const p=s.get(u);p!==void 0&&js(p.mutation,h,wt.empty(),me.now()),jl(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:tn(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:o2(i.bundledQuery),readTime:tn(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this.overlays=new Ee(G.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Sr();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=Sr(),s=n.length+1,o=new G(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ee((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=Sr(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Sr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return M.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new OI(n,r));let s=this.qr.get(n);s===void 0&&(s=ne(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(){this.Qr=new Le(ze.$r),this.Ur=new Le(ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ze(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ze(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new G(new ce([])),r=new ze(n,e),i=new ze(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new G(new ce([])),r=new ze(n,e),i=new ze(n,e+1);let s=ne();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ze(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ze{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return G.comparator(e.key,n.key)||te(e.Yr,n.Yr)}static Kr(e,n){return te(e.Yr,n.Yr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Le(ze.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jI(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new ze(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?vd:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ze(n,0),i=new ze(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(te);return n.forEach(i=>{const s=new ze(i,0),o=new ze(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new ze(new G(s),0);let l=new Le(te);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Yr)),!0)},o),M.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ae(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,i=>{const s=new ze(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new ze(n,0),i=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.ri=e,this.docs=function(){return new Ee(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(n))}getEntries(e,n){let r=_n();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=_n();const o=n.path,l=new G(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||YS(KS(p),r)<=0||(i.has(p.key)||jl(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new x2(this)}getSize(e){return M.resolve(this.size)}}class x2 extends p2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.persistence=e,this.si=new Fr(n=>Ed(n),xd),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.oi=0,this._i=new Cd,this.targetCount=0,this.ai=Pi.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Pi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,n){this.ui={},this.overlays={},this.ci=new bl(0),this.li=!1,this.li=!0,this.hi=new _2,this.referenceDelegate=e(this),this.Pi=new T2(this),this.indexManager=new a2,this.remoteDocumentCache=function(i){return new E2(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new s2(n),this.Ii=new y2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new v2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new w2(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new S2(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class S2 extends JS{constructor(e){super(),this.currentSequenceNumber=e}}class Pd{constructor(e){this.persistence=e,this.Ri=new Cd,this.Vi=null}static mi(e){return new Pd(e)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{const i=G.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ll{constructor(e,n){this.persistence=e,this.pi=new Fr(r=>tI(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=f2(this,n)}static mi(e,n){return new ll(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,Y.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ea(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ne(),i=ne();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new kd(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return _T()?8:ZS(yT())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new I2;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Gr()<=ie.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Qr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(Gr()<=ie.DEBUG&&W("QueryEngine","Query:",Qr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Gr()<=ie.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Qr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zt(n))):M.resolve())}ys(e,n){if(Hm(n))return M.resolve(null);let r=Zt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=rh(n,null,"F"),r=Zt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ne(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,o,u.readTime)?this.ys(e,rh(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,i){return Hm(n)||i.isEqual(Y.min())?M.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?M.resolve(null):(Gr()<=ie.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qr(n)),this.vs(e,o,n,QS(i,ro)).next(l=>l))})}Ds(e,n){let r=new Le(j0(e));return n.forEach((i,s)=>{jl(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Gr()<=ie.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Qr(n)),this.ps.getDocumentsMatchingQuery(e,n,Jn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="LocalStore",R2=3e8;class C2{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ee(te),this.xs=new Fr(s=>Ed(s),xd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new g2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function P2(t,e,n,r){return new C2(t,e,n,r)}async function s_(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ne();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:l}))})})}function k2(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const m=h.batch,y=m.keys();let A=M.resolve();return y.forEach(b=>{A=A.next(()=>p.getEntry(u,b)).next(N=>{const P=h.docVersions.get(b);ae(P!==null,48541),N.version.compareTo(P)<0&&(m.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),p.addEntry(N)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ne();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function o_(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function b2(t,e){const n=X(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((p,m)=>{const y=i.get(m);if(!y)return;l.push(n.Pi.removeMatchingKeys(s,p.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(s,p.addedDocuments,m)));let A=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?A=A.withResumeToken(Qe.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):p.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(p.resumeToken,r)),i=i.insert(m,A),function(N,P,T){return N.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=R2?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(y,A,p)&&l.push(n.Pi.updateTargetData(s,A))});let u=_n(),h=ne();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push(N2(s,o,e.documentUpdates).next(p=>{u=p.ks,h=p.qs})),!r.isEqual(Y.min())){const p=n.Pi.getLastRemoteSnapshotVersion(s).next(m=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(p)}return M.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ms=i,s))}function N2(t,e,n){let r=ne(),i=ne();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=_n();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W(bd,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:i}})}function V2(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=vd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function D2(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new On(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function lh(t,e,n){const r=X(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Fi(o))throw o;W(bd,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function rg(t,e,n){const r=X(t);let i=Y.min(),s=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const m=X(u),y=m.xs.get(p);return y!==void 0?M.resolve(m.Ms.get(y)):m.Pi.getTargetData(h,p)}(r,o,Zt(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:ne())).next(l=>(j2(r,wI(e),l),{documents:l,Qs:s})))}function j2(t,e,n){let r=t.Os.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class ig{constructor(){this.activeTargetIds=AI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class O2{constructor(){this.Mo=new ig,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ig,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="ConnectivityMonitor";class og{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(sg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){W(sg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa=null;function uh(){return sa===null?sa=function(){return 268435456+Math.round(2147483648*Math.random())}():sa++,"0x"+sa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu="RestConnection",M2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class F2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===nl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=uh(),l=this.zo(e,n.toUriEncodedString());W(Wu,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:h}=new URL(l),p=pd(h);return this.Jo(e,l,u,r,p).then(m=>(W(Wu,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Ii(Wu,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Li}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=M2[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je="WebChannelConnection";class U2 extends F2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=uh();return new Promise((l,u)=>{const h=new l0;h.setWithCredentials(!0),h.listenOnce(u0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case wa.NO_ERROR:const m=h.getResponseJson();W(Je,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case wa.TIMEOUT:W(Je,`RPC '${e}' ${o} timed out`),u(new H(L.DEADLINE_EXCEEDED,"Request time out"));break;case wa.HTTP_ERROR:const y=h.getStatus();if(W(Je,`RPC '${e}' ${o} failed with status:`,y,"response text:",h.getResponseText()),y>0){let A=h.getResponseJson();Array.isArray(A)&&(A=A[0]);const b=A==null?void 0:A.error;if(b&&b.status&&b.message){const N=function(T){const _=T.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(_)>=0?_:L.UNKNOWN}(b.status);u(new H(N,b.message))}else u(new H(L.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new H(L.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{W(Je,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);W(Je,`RPC '${e}' ${o} sending request:`,i),h.send(n,"POST",p,r,15)})}T_(e,n,r){const i=uh(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=d0(),l=h0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=s.join("");W(Je,`Creating RPC '${e}' stream ${i}: ${p}`,u);const m=o.createWebChannel(p,u);this.I_(m);let y=!1,A=!1;const b=new z2({Yo:P=>{A?W(Je,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(y||(W(Je,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),W(Je,`RPC '${e}' stream ${i} sending:`,P),m.send(P))},Zo:()=>m.close()}),N=(P,T,_)=>{P.listen(T,w=>{try{_(w)}catch(C){setTimeout(()=>{throw C},0)}})};return N(m,vs.EventType.OPEN,()=>{A||(W(Je,`RPC '${e}' stream ${i} transport opened.`),b.o_())}),N(m,vs.EventType.CLOSE,()=>{A||(A=!0,W(Je,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(m))}),N(m,vs.EventType.ERROR,P=>{A||(A=!0,Ii(Je,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),b.a_(new H(L.UNAVAILABLE,"The operation could not be completed")))}),N(m,vs.EventType.MESSAGE,P=>{var T;if(!A){const _=P.data[0];ae(!!_,16349);const w=_,C=(w==null?void 0:w.error)||((T=w[0])==null?void 0:T.error);if(C){W(Je,`RPC '${e}' stream ${i} received error:`,C);const O=C.status;let j=function(x){const I=Pe[x];if(I!==void 0)return G0(I)}(O),E=C.message;j===void 0&&(j=L.INTERNAL,E="Unknown error status: "+O+" with message "+C.message),A=!0,b.a_(new H(j,E)),m.close()}else W(Je,`RPC '${e}' stream ${i} received:`,_),b.u_(_)}}),N(l,c0.STAT_EVENT,P=>{P.stat===Yc.PROXY?W(Je,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Yc.NOPROXY&&W(Je,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function qu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t){return new WI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="PersistentStream";class l_{constructor(e,n,r,i,s,o,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new a_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(vn(n.toString()),vn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new H(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(ag,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(W(ag,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class B2 extends l_{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=QI(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?tn(o.readTime):Y.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ah(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=th(u)?{documents:XI(s,u)}:{query:JI(s,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Y0(s,o.resumeToken);const h=ih(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Y.min())>0){l.readTime=al(s,o.snapshotVersion.toTimestamp());const h=ih(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=e2(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ah(this.serializer),n.removeTarget=e,this.q_(n)}}class $2 extends l_{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=YI(e.writeResults,e.commitTime),r=tn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ah(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>KI(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{}class W2 extends H2{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new H(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,sh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(L.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,sh(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class q2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vn(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="RemoteStore";class G2{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{zr(this)&&(W(Or,"Restarting streams for network reachability change."),await async function(u){const h=X(u);h.Ea.add(4),await Eo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await zl(h)}(this))})}),this.Ra=new q2(r,i)}}async function zl(t){if(zr(t))for(const e of t.da)await e(!0)}async function Eo(t){for(const e of t.da)await e(!1)}function u_(t,e){const n=X(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),jd(n)?Dd(n):Ui(n).O_()&&Vd(n,e))}function Nd(t,e){const n=X(t),r=Ui(n);n.Ia.delete(e),r.O_()&&c_(n,e),n.Ia.size===0&&(r.O_()?r.L_():zr(n)&&n.Ra.set("Unknown"))}function Vd(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ui(t).Y_(e)}function c_(t,e){t.Va.Ue(e),Ui(t).Z_(e)}function Dd(t){t.Va=new UI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ui(t).start(),t.Ra.ua()}function jd(t){return zr(t)&&!Ui(t).x_()&&t.Ia.size>0}function zr(t){return X(t).Ea.size===0}function h_(t){t.Va=void 0}async function Q2(t){t.Ra.set("Online")}async function K2(t){t.Ia.forEach((e,n)=>{Vd(t,e)})}async function Y2(t,e){h_(t),jd(t)?(t.Ra.ha(e),Dd(t)):t.Ra.set("Unknown")}async function X2(t,e,n){if(t.Ra.set("Online"),e instanceof K0&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){W(Or,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ul(t,r)}else if(e instanceof Sa?t.Va.Ze(e):e instanceof Q0?t.Va.st(e):t.Va.tt(e),!n.isEqual(Y.min()))try{const r=await o_(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.Ia.get(h);p&&s.Ia.set(h,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const p=s.Ia.get(u);if(!p)return;s.Ia.set(u,p.withResumeToken(Qe.EMPTY_BYTE_STRING,p.snapshotVersion)),c_(s,u);const m=new On(p.target,u,h,p.sequenceNumber);Vd(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W(Or,"Failed to raise snapshot:",r),await ul(t,r)}}async function ul(t,e,n){if(!Fi(e))throw e;t.Ea.add(1),await Eo(t),t.Ra.set("Offline"),n||(n=()=>o_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(Or,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await zl(t)})}function d_(t,e){return e().catch(n=>ul(t,n,e))}async function Ul(t){const e=X(t),n=nr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vd;for(;J2(e);)try{const i=await V2(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Z2(e,i)}catch(i){await ul(e,i)}f_(e)&&p_(e)}function J2(t){return zr(t)&&t.Ta.length<10}function Z2(t,e){t.Ta.push(e);const n=nr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function f_(t){return zr(t)&&!nr(t).x_()&&t.Ta.length>0}function p_(t){nr(t).start()}async function eA(t){nr(t).ra()}async function tA(t){const e=nr(t);for(const n of t.Ta)e.ea(n.mutations)}async function nA(t,e,n){const r=t.Ta.shift(),i=Id.from(r,e,n);await d_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ul(t)}async function rA(t,e){e&&nr(t).X_&&await async function(r,i){if(function(o){return MI(o)&&o!==L.ABORTED}(i.code)){const s=r.Ta.shift();nr(r).B_(),await d_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ul(r)}}(t,e),f_(t)&&p_(t)}async function lg(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),W(Or,"RemoteStore received new credentials");const r=zr(n);n.Ea.add(3),await Eo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await zl(n)}async function iA(t,e){const n=X(t);e?(n.Ea.delete(2),await zl(n)):e||(n.Ea.add(2),await Eo(n),n.Ra.set("Unknown"))}function Ui(t){return t.ma||(t.ma=function(n,r,i){const s=X(n);return s.sa(),new B2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:Q2.bind(null,t),t_:K2.bind(null,t),r_:Y2.bind(null,t),H_:X2.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),jd(t)?Dd(t):t.Ra.set("Unknown")):(await t.ma.stop(),h_(t))})),t.ma}function nr(t){return t.fa||(t.fa=function(n,r,i){const s=X(n);return s.sa(),new $2(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:eA.bind(null,t),r_:rA.bind(null,t),ta:tA.bind(null,t),na:nA.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ul(t)):(await t.fa.stop(),t.Ta.length>0&&(W(Or,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Od(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ld(t,e){if(vn("AsyncQueue",`${e}: ${t}`),Fi(t))return new H(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{static emptySet(e){return new gi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=_s(),this.sortedSet=new Ee(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new gi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this.ga=new Ee(G.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Q(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ki{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ki(e,n,gi.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class oA{constructor(){this.queries=cg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=X(n),s=i.queries;i.queries=cg(),s.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new H(L.ABORTED,"Firestore shutting down"))}}function cg(){return new Fr(t=>D0(t),Dl)}async function aA(t,e){const n=X(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new sA,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Ld(o,`Initialization of query '${Qr(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Md(n)}async function lA(t,e){const n=X(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function uA(t,e){const n=X(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&Md(n)}function cA(t,e,n){const r=X(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Md(t){t.Ca.forEach(e=>{e.next()})}var ch,hg;(hg=ch||(ch={})).Ma="default",hg.Cache="cache";class hA{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ki(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ki.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ch.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this.key=e}}class g_{constructor(e){this.key=e}}class dA{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ne(),this.mutatedKeys=ne(),this.eu=j0(e),this.tu=new gi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new ug,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const y=i.get(p),A=jl(this.query,m)?m:null,b=!!y&&this.mutatedKeys.has(y.key),N=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let P=!1;y&&A?y.data.isEqual(A.data)?b!==N&&(r.track({type:3,doc:A}),P=!0):this.su(y,A)||(r.track({type:2,doc:A}),P=!0,(u&&this.eu(A,u)>0||h&&this.eu(A,h)<0)&&(l=!0)):!y&&A?(r.track({type:0,doc:A}),P=!0):y&&!A&&(r.track({type:1,doc:y}),P=!0,(u||h)&&(l=!0)),P&&(A?(o=o.add(A),s=N?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((p,m)=>function(A,b){const N=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Rt:P})}};return N(A)-N(b)}(p.type,m.type)||this.eu(p.doc,m.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new ki(this.query,e.tu,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ug,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ne(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new g_(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new m_(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ne();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ki.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Fd="SyncEngine";class fA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class pA{constructor(e){this.key=e,this.hu=!1}}class mA{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Fr(l=>D0(l),Dl),this.Iu=new Map,this.Eu=new Set,this.du=new Ee(G.comparator),this.Au=new Map,this.Ru=new Cd,this.Vu={},this.mu=new Map,this.fu=Pi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function gA(t,e,n=!0){const r=x_(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await y_(r,e,n,!0),i}async function yA(t,e){const n=x_(t);await y_(n,e,!0,!1)}async function y_(t,e,n,r){const i=await D2(t.localStore,Zt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await vA(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&u_(t.remoteStore,i),l}async function vA(t,e,n,r,i){t.pu=(m,y,A)=>async function(N,P,T,_){let w=P.view.ru(T);w.Cs&&(w=await rg(N.localStore,P.query,!1).then(({documents:E})=>P.view.ru(E,w)));const C=_&&_.targetChanges.get(P.targetId),O=_&&_.targetMismatches.get(P.targetId)!=null,j=P.view.applyChanges(w,N.isPrimaryClient,C,O);return fg(N,P.targetId,j.au),j.snapshot}(t,m,y,A);const s=await rg(t.localStore,e,!0),o=new dA(e,s.Qs),l=o.ru(s.documents),u=wo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);fg(t,n,h.au);const p=new fA(e,n,o);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function _A(t,e,n){const r=X(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Dl(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await lh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Nd(r.remoteStore,i.targetId),hh(r,i.targetId)}).catch(Mi)):(hh(r,i.targetId),await lh(r.localStore,i.targetId,!0))}async function wA(t,e){const n=X(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Nd(n.remoteStore,r.targetId))}async function EA(t,e,n){const r=CA(t);try{const i=await function(o,l){const u=X(o),h=me.now(),p=l.reduce((A,b)=>A.add(b.key),ne());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",A=>{let b=_n(),N=ne();return u.Ns.getEntries(A,p).next(P=>{b=P,b.forEach((T,_)=>{_.isValidDocument()||(N=N.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(A,b)).next(P=>{m=P;const T=[];for(const _ of l){const w=VI(_,m.get(_.key).overlayedDocument);w!=null&&T.push(new hr(_.key,w,A0(w.value.mapValue),en.exists(!0)))}return u.mutationQueue.addMutationBatch(A,h,T,l)}).next(P=>{y=P;const T=P.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(A,P.batchId,T)})}).then(()=>({batchId:y.batchId,changes:L0(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new Ee(te)),h=h.insert(l,u),o.Vu[o.currentUser.toKey()]=h}(r,i.batchId,n),await xo(r,i.changes),await Ul(r.remoteStore)}catch(i){const s=Ld(i,"Failed to persist write");n.reject(s)}}async function v_(t,e){const n=X(t);try{const r=await b2(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ae(o.hu,14607):i.removedDocuments.size>0&&(ae(o.hu,42227),o.hu=!1))}),await xo(n,r,e)}catch(r){await Mi(r)}}function dg(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=X(o);u.onlineState=l;let h=!1;u.queries.forEach((p,m)=>{for(const y of m.Sa)y.va(l)&&(h=!0)}),h&&Md(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xA(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ee(G.comparator);o=o.insert(s,tt.newNoDocument(s,Y.min()));const l=ne().add(s),u=new Ml(Y.min(),new Map,new Ee(te),o,l);await v_(r,u),r.du=r.du.remove(s),r.Au.delete(e),zd(r)}else await lh(r.localStore,e,!1).then(()=>hh(r,e,n)).catch(Mi)}async function TA(t,e){const n=X(t),r=e.batch.batchId;try{const i=await k2(n.localStore,e);w_(n,r,null),__(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xo(n,i)}catch(i){await Mi(i)}}async function SA(t,e,n){const r=X(t);try{const i=await function(o,l){const u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(ae(m!==null,37113),p=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);w_(r,e,n),__(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xo(r,i)}catch(i){await Mi(i)}}function __(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function w_(t,e,n){const r=X(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function hh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||E_(t,r)})}function E_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Nd(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),zd(t))}function fg(t,e,n){for(const r of n)r instanceof m_?(t.Ru.addReference(r.key,e),IA(t,r)):r instanceof g_?(W(Fd,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||E_(t,r.key)):Q(19791,{wu:r})}function IA(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(W(Fd,"New document in limbo: "+n),t.Eu.add(r),zd(t))}function zd(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(ce.fromString(e)),r=t.fu.next();t.Au.set(r,new pA(n)),t.du=t.du.insert(n,r),u_(t.remoteStore,new On(Zt(Td(n.path)),r,"TargetPurposeLimboResolution",bl.ce))}}async function xo(t,e,n){const r=X(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){i.push(h);const m=kd.As(u.targetId,h);s.push(m)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,h){const p=X(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>M.forEach(h,y=>M.forEach(y.Es,A=>p.persistence.referenceDelegate.addReference(m,y.targetId,A)).next(()=>M.forEach(y.ds,A=>p.persistence.referenceDelegate.removeReference(m,y.targetId,A)))))}catch(m){if(!Fi(m))throw m;W(bd,"Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const A=p.Ms.get(y),b=A.snapshotVersion,N=A.withLastLimboFreeSnapshotVersion(b);p.Ms=p.Ms.insert(y,N)}}}(r.localStore,s))}async function AA(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){W(Fd,"User change. New user:",e.toKey());const r=await s_(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new H(L.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xo(n,r.Ls)}}function RA(t,e){const n=X(t),r=n.Au.get(e);if(r&&r.hu)return ne().add(r.key);{let i=ne();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function x_(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=v_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xA.bind(null,e),e.Pu.H_=uA.bind(null,e.eventManager),e.Pu.yu=cA.bind(null,e.eventManager),e}function CA(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SA.bind(null,e),e}class cl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return P2(this.persistence,new A2,e.initialUser,this.serializer)}Cu(e){return new i_(Pd.mi,this.serializer)}Du(e){return new O2}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cl.provider={build:()=>new cl};class PA extends cl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ae(this.persistence.referenceDelegate instanceof ll,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new h2(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ct.withCacheSize(this.cacheSizeBytes):ct.DEFAULT;return new i_(r=>ll.mi(r,n),this.serializer)}}class dh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AA.bind(null,this.syncEngine),await iA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oA}()}createDatastore(e){const n=Fl(e.databaseInfo.databaseId),r=function(s){return new U2(s)}(e.databaseInfo);return function(s,o,l,u){return new W2(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new G2(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>dg(this.syncEngine,n,0),function(){return og.v()?new og:new L2}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,p){const m=new mA(i,s,o,l,u,h);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=X(i);W(Or,"RemoteStore shutting down."),s.Ea.add(5),await Eo(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}dh.provider={build:()=>new dh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="FirestoreClient";class bA{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ze.UNAUTHENTICATED,this.clientId=yd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W(rr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(rr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ld(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gu(t,e){t.asyncQueue.verifyOperationInProgress(),W(rr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await s_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function pg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await NA(t);W(rr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>lg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>lg(e.remoteStore,i)),t._onlineComponents=e}async function NA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(rr,"Using user provided OfflineComponentProvider");try{await Gu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ii("Error using user provided cache. Falling back to memory cache: "+n),await Gu(t,new cl)}}else W(rr,"Using default OfflineComponentProvider"),await Gu(t,new PA(void 0));return t._offlineComponents}async function T_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(rr,"Using user provided OnlineComponentProvider"),await pg(t,t._uninitializedComponentsProvider._online)):(W(rr,"Using default OnlineComponentProvider"),await pg(t,new dh))),t._onlineComponents}function VA(t){return T_(t).then(e=>e.syncEngine)}async function mg(t){const e=await T_(t),n=e.eventManager;return n.onListen=gA.bind(null,e.syncEngine),n.onUnlisten=_A.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wA.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="firestore.googleapis.com",yg=!0;class vg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=I_,this.ssl=yg}else this.host=e.host,this.ssl=e.ssl??yg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=r_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<u2)throw new H(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S_(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new H(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LS;switch(r.type){case"firstParty":return new US(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gg.get(n);r&&(W("ComponentProvider","Removing Datastore"),gg.delete(n),r.terminate())}(this),Promise.resolve()}}function DA(t,e,n,r={}){var h;t=Cr(t,Bl);const i=pd(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(dT(`https://${l}`),gT("Firestore",!0)),s.host!==I_&&s.host!==l&&Ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!Ja(u,o)&&(t._setSettings(u),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=Ze.MOCK_USER;else{p=fT(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new H(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ze(y)}t._authCredentials=new MS(new p0(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ur(this.firestore,e,this._query)}}class Ve{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ve(this.firestore,e,this._key)}toJSON(){return{type:Ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(vo(n,Ve._jsonSchema))return new Ve(e,r||null,new G(ce.fromString(n.referencePath)))}}Ve._jsonSchemaVersion="firestore/documentReference/1.0",Ve._jsonSchema={type:Ne("string",Ve._jsonSchemaVersion),referencePath:Ne("string")};class Kn extends Ur{constructor(e,n,r){super(e,n,Td(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ve(this.firestore,null,new G(e))}withConverter(e){return new Kn(this.firestore,e,this._path)}}function jA(t,e,...n){if(t=sn(t),m0("collection","path",e),t instanceof Bl){const r=ce.fromString(e,...n);return km(r),new Kn(t,null,r)}{if(!(t instanceof Ve||t instanceof Kn))throw new H(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return km(r),new Kn(t.firestore,null,r)}}function A_(t,e,...n){if(t=sn(t),arguments.length===1&&(e=yd.newId()),m0("doc","path",e),t instanceof Bl){const r=ce.fromString(e,...n);return Pm(r),new Ve(t,null,new G(r))}{if(!(t instanceof Ve||t instanceof Kn))throw new H(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ce.fromString(e,...n));return Pm(r),new Ve(t.firestore,t instanceof Kn?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="AsyncQueue";class wg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new a_(this,"async_queue_retry"),this._c=()=>{const r=qu();r&&W(_g,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=qu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=qu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fi(e))throw e;W(_g,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,vn("INTERNAL UNHANDLED ERROR: ",Eg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Od.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Q(47125,{Pc:Eg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Eg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class co extends Bl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new wg,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wg(e),this._firestoreClient=void 0,await e}}}function OA(t,e){const n=typeof t=="object"?t:AS(),r=typeof t=="string"?t:nl,i=ES(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=cT("firestore");s&&DA(i,...s)}return i}function R_(t){if(t._terminated)throw new H(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LA(t),t._firestoreClient}function LA(t){var r,i,s;const e=t._freezeSettings(),n=function(l,u,h,p){return new iI(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,S_(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new bA(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ct(Qe.fromBase64String(e))}catch(n){throw new H(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ct(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ct._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vo(e,Ct._jsonSchema))return Ct.fromBase64String(e.bytes)}}Ct._jsonSchemaVersion="firestore/bytes/1.0",Ct._jsonSchema={type:Ne("string",Ct._jsonSchemaVersion),bytes:Ne("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nn._jsonSchemaVersion}}static fromJSON(e){if(vo(e,nn._jsonSchema))return new nn(e.latitude,e.longitude)}}nn._jsonSchemaVersion="firestore/geoPoint/1.0",nn._jsonSchema={type:Ne("string",nn._jsonSchemaVersion),latitude:Ne("number"),longitude:Ne("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:rn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vo(e,rn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new rn(e.vectorValues);throw new H(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rn._jsonSchemaVersion="firestore/vectorValue/1.0",rn._jsonSchema={type:Ne("string",rn._jsonSchemaVersion),vectorValues:Ne("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=/^__.*__$/;class FA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new _o(e,this.data,n,this.fieldTransforms)}}class C_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function P_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ac:t})}}class Bd{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Bd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(P_(this.Ac)&&MA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class zA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fl(e)}Cc(e,n,r,i=!1){return new Bd({Ac:e,methodName:n,Dc:r,path:We.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $d(t){const e=t._freezeSettings(),n=Fl(t._databaseId);return new zA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function UA(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Hd("Data must be an object, but it was:",o,r);const l=k_(r,o);let u,h;if(s.merge)u=new wt(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const y=fh(e,m,n);if(!o.contains(y))throw new H(L.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);N_(p,y)||p.push(y)}u=new wt(p),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new FA(new dt(l),u,h)}class Hl extends Ud{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hl}}function BA(t,e,n,r){const i=t.Cc(1,e,n);Hd("Data must be an object, but it was:",i,r);const s=[],o=dt.empty();cr(r,(u,h)=>{const p=Wd(e,u,n);h=sn(h);const m=i.yc(p);if(h instanceof Hl)s.push(p);else{const y=To(h,m);y!=null&&(s.push(p),o.set(p,y))}});const l=new wt(s);return new C_(o,l,i.fieldTransforms)}function $A(t,e,n,r,i,s){const o=t.Cc(1,e,n),l=[fh(e,r,n)],u=[i];if(s.length%2!=0)throw new H(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)l.push(fh(e,s[y])),u.push(s[y+1]);const h=[],p=dt.empty();for(let y=l.length-1;y>=0;--y)if(!N_(h,l[y])){const A=l[y];let b=u[y];b=sn(b);const N=o.yc(A);if(b instanceof Hl)h.push(A);else{const P=To(b,N);P!=null&&(h.push(A),p.set(A,P))}}const m=new wt(h);return new C_(p,m,o.fieldTransforms)}function HA(t,e,n,r=!1){return To(n,t.Cc(r?4:3,e))}function To(t,e){if(b_(t=sn(t)))return Hd("Unsupported field value:",e,t),k_(t,e);if(t instanceof Ud)return function(r,i){if(!P_(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=To(l,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=me.fromDate(r);return{timestampValue:al(i.serializer,s)}}if(r instanceof me){const s=new me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:al(i.serializer,s)}}if(r instanceof nn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ct)return{bytesValue:Y0(i.serializer,r._byteString)};if(r instanceof Ve){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Rd(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof rn)return function(o,l){return{mapValue:{fields:{[S0]:{stringValue:I0},[rl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Sd(l.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${kl(r)}`)}(t,e)}function k_(t,e){const n={};return v0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cr(t,(r,i)=>{const s=To(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function b_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof me||t instanceof nn||t instanceof Ct||t instanceof Ve||t instanceof Ud||t instanceof rn)}function Hd(t,e,n){if(!b_(n)||!g0(n)){const r=kl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function fh(t,e,n){if((e=sn(e))instanceof $l)return e._internalPath;if(typeof e=="string")return Wd(t,e);throw hl("Field path arguments must be of type string or ",t,!1,void 0,n)}const WA=new RegExp("[~\\*/\\[\\]]");function Wd(t,e,n){if(e.search(WA)>=0)throw hl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $l(...e.split("."))._internalPath}catch{throw hl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hl(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new H(L.INVALID_ARGUMENT,l+t+u)}function N_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qA extends V_{data(){return super.data()}}function qd(t,e){return typeof e=="string"?Wd(t,e):e instanceof $l?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gd{}class D_ extends Gd{}function QA(t,e,...n){let r=[];e instanceof Gd&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Kd).length,l=s.filter(u=>u instanceof Qd).length;if(o>1||o>0&&l>0)throw new H(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Qd extends D_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qd(e,n,r)}_apply(e){const n=this._parse(e);return j_(e._query,n),new Ur(e.firestore,e.converter,nh(e._query,n))}_parse(e){const n=$d(e.firestore);return function(s,o,l,u,h,p,m){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new H(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Sg(m,p);const b=[];for(const N of m)b.push(Tg(u,s,N));y={arrayValue:{values:b}}}else y=Tg(u,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Sg(m,p),y=HA(l,o,m,p==="in"||p==="not-in");return be.create(h,p,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Kd extends Gd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Kd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ht.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)j_(o,u),o=nh(o,u)}(e._query,n),new Ur(e.firestore,e.converter,nh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yd extends D_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Yd(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new H(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ao(s,o)}(e._query,this._field,this._direction);return new Ur(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new zi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function KA(t,e="asc"){const n=e,r=qd("orderBy",t);return Yd._create(r,n)}function Tg(t,e,n){if(typeof(n=sn(n))=="string"){if(n==="")throw new H(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V0(e)&&n.indexOf("/")!==-1)throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ce.fromString(n));if(!G.isDocumentKey(r))throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mm(t,new G(r))}if(n instanceof Ve)return Mm(t,n._key);throw new H(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kl(n)}.`)}function Sg(t,e){if(!Array.isArray(t)||t.length===0)throw new H(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function j_(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YA{convertValue(e,n="none"){switch(tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return cr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[rl].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Se(o.doubleValue));return new rn(n)}convertGeoPoint(e){return new nn(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(io(e));default:return null}}convertTimestamp(e){const n=Zn(e);return new me(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ce.fromString(e);ae(n_(r),9688,{name:e});const i=new so(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||vn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Es{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pr extends V_{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ia(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Pr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Pr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pr._jsonSchema={type:Ne("string",Pr._jsonSchemaVersion),bundleSource:Ne("string","DocumentSnapshot"),bundleName:Ne("string"),bundle:Ne("string")};class Ia extends Pr{data(e={}){return super.data(e)}}class yi{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Es(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ia(this._firestore,this._userDataWriter,r.key,r,new Es(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Ia(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Es(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Ia(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Es(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:JA(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function JA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}yi._jsonSchemaVersion="firestore/querySnapshot/1.0",yi._jsonSchema={type:Ne("string",yi._jsonSchemaVersion),bundleSource:Ne("string","QuerySnapshot"),bundleName:Ne("string"),bundle:Ne("string")};class O_ extends YA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ct(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,n)}}function ZA(t,e,n,...r){t=Cr(t,Ve);const i=Cr(t.firestore,co),s=$d(i);let o;return o=typeof(e=sn(e))=="string"||e instanceof $l?$A(s,"updateDoc",t._key,e,n,r):BA(s,"updateDoc",t._key,e),L_(i,[o.toMutation(t._key,en.exists(!0))])}function eR(t,e){const n=Cr(t.firestore,co),r=A_(t),i=XA(t.converter,e);return L_(n,[UA($d(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,en.exists(!1))]).then(()=>r)}function tR(t,...e){var u,h,p;t=sn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||xg(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(xg(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(h=m.error)==null?void 0:h.bind(m),e[r+2]=(p=m.complete)==null?void 0:p.bind(m)}let s,o,l;if(t instanceof Ve)o=Cr(t.firestore,co),l=Td(t._key.path),s={next:m=>{e[r]&&e[r](nR(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Cr(t,Ur);o=Cr(m.firestore,co),l=m._query;const y=new O_(o);s={next:A=>{e[r]&&e[r](new yi(o,y,m,A))},error:e[r+1],complete:e[r+2]},GA(t._query)}return function(y,A,b,N){const P=new kA(N),T=new hA(A,P,b);return y.asyncQueue.enqueueAndForget(async()=>aA(await mg(y),T)),()=>{P.Nu(),y.asyncQueue.enqueueAndForget(async()=>lA(await mg(y),T))}}(R_(o),l,i,s)}function L_(t,e){return function(r,i){const s=new Rr;return r.asyncQueue.enqueueAndForget(async()=>EA(await VA(r),i,s)),s.promise}(R_(t),e)}function nR(t,e,n){const r=n.docs.get(e._key),i=new O_(t);return new Pr(t,i,e._key,r,new Es(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Li=i})(IS),el(new to("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new co(new FS(r.getProvider("auth-internal")),new BS(o,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new H(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new so(h.options.projectId,p)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),mi(Im,Am,e),mi(Im,Am,"esm2020")})();var rR="firebase",iR="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi(rR,iR,"app");const sR={apiKey:"AIzaSyCjmy6wejHkx_YAvfzuWxRO4fJpWZaFgGM",authDomain:"incident-tracker-d329a.firebaseapp.com",projectId:"incident-tracker-d329a",storageBucket:"incident-tracker-d329a.firebasestorage.app",messagingSenderId:"519247779380",appId:"1:519247779380:web:47a8b4b40f14b169b45c61"},oR=i0(sR),M_=OA(oR),F_=jA(M_,"incidents");function Xd(t){const e=QA(F_,KA("createdAt","desc"));return tR(e,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)})}async function aR(t){const e=new Date().toISOString(),n={...t,status:t.status||"New",createdAt:t.createdAt||e,updatedAt:e};await eR(F_,n)}async function oa(t,e){const n=A_(M_,"incidents",t);await ZA(n,{...e,updatedAt:new Date().toISOString()})}const z_="notifications_v1";function lR(){try{const t=localStorage.getItem(z_);return t?JSON.parse(t):[]}catch{return[]}}function uR(t){localStorage.setItem(z_,JSON.stringify(t))}function Qu(t){const e=lR();e.unshift(t),uR(e)}function cR(t,e){const n=(t+" "+e).toLowerCase();return n.includes("fire")||n.includes("shock")||n.includes("leak")||n.includes("burst")||n.includes("short circuit")||t.toLowerCase()==="electricity"?"High":n.includes("slow")||n.includes("minor")||n.includes("low")?"Low":"Medium"}function hR(t){return 1/(1+Math.exp(-t))}function dR(){const{user:t}=ur(),[e,n]=z.useState([]),[r,i]=z.useState({title:"",category:"Electricity",description:"",hostel:"",room:"",imageUrl:"",manualPriority:"Medium"}),[s,o]=z.useState(""),[l,u]=z.useState(""),[h,p]=z.useState({lat:null,lng:null,loading:!1,error:""});z.useEffect(()=>{const _=Xd(w=>{n(w)});return()=>_()},[]);const m=_=>{const{name:w,value:C}=_.target;i(O=>({...O,[w]:C}))},y=()=>{if(p(_=>({..._,loading:!0,error:""})),!navigator.geolocation){p({lat:null,lng:null,loading:!1,error:"Geolocation not supported in this browser."});return}navigator.geolocation.getCurrentPosition(_=>{p({lat:_.coords.latitude,lng:_.coords.longitude,loading:!1,error:""})},()=>{p({lat:null,lng:null,loading:!1,error:"Unable to fetch location (permission denied or error)."})})},A=async _=>{if(_.preventDefault(),o(""),u(""),!r.title||!r.description||!r.hostel||!r.room){o("Please fill title, description, hostel and room.");return}const w=(t==null?void 0:t.email)||"anonymous";if(e.filter(I=>I.reporterEmail===w&&I.status!=="Resolved").length>=5){o("You already have 5 active incidents. Please wait for some to be resolved before creating more.");return}if(e.find(I=>{const R=(I.category||"").toLowerCase()===r.category.toLowerCase(),k=(I.hostel||"").trim().toLowerCase()===r.hostel.trim().toLowerCase(),S=(I.room||"").trim().toLowerCase()===r.room.trim().toLowerCase(),de=I.status!=="Resolved";return R&&k&&S&&de})){o("There is already an open incident for this problem in this exact hostel & room. Others from this room should follow that ticket instead of creating a new one.");return}const j=r.category==="Other"?r.manualPriority||"Medium":cR(r.category,r.description),E=new Date().toISOString(),g=`${r.hostel} - Room ${r.room}`,x={id:Date.now(),title:r.title,category:r.category,description:r.description,hostel:r.hostel,room:r.room,location:g,imageUrl:r.imageUrl,priority:j,status:"New",reporterEmail:w,createdAt:E,latitude:h.lat,longitude:h.lng};try{await aR(x),Qu({id:Date.now()+1,targetRole:"reporter",targetEmail:w,title:"Incident recorded",message:`Your ${j} priority ${r.category} issue in ${g} has been logged.`,createdAt:E}),Qu({id:Date.now()+2,targetRole:"admin",targetEmail:null,title:"New campus incident",message:`${j} priority ${r.category} issue reported in ${g}.`,createdAt:E}),j==="High"&&Qu({id:Date.now()+3,targetRole:"technician",targetEmail:null,title:"High priority incident",message:`High priority ${r.category} issue in ${g} requires quick attention.`,createdAt:E}),u("Incident created successfully with priority: "+j),i(I=>({...I,title:"",description:"",imageUrl:""}))}catch(I){console.error("Failed to create incident",I),o("Could not create incident. Please try again.")}},b=[],N={};e.forEach(_=>{const w=_.hostel||_.location||"Unknown",C=`${_.category}__${w}`;N[C]=(N[C]||0)+1}),Object.entries(N).forEach(([_,w])=>{if(w>=3){const[C,O]=_.split("__");b.push(`High chance of more ${C} issues in ${O} (reported ${w} times).`)}});const P=e.filter(_=>_.reporterEmail===((t==null?void 0:t.email)||"anonymous")).slice(0,4),T=z.useMemo(()=>{if(!e.length)return{currentPair:null,topForHostel:[]};const _=Date.now(),w={};e.forEach(g=>{const x=(g.hostel||g.location||"Unknown").trim(),I=g.category||"Other",R=`${x.toLowerCase()}__${I}`,k=g.createdAt?new Date(g.createdAt).getTime():null;w[R]||(w[R]={hostel:x,category:I,total:0,high:0,recent24h:0,openCount:0,oldestOpenTs:null});const S=w[R];S.total+=1,g.priority==="High"&&(S.high+=1),k!==null&&_-k<=24*60*60*1e3&&(S.recent24h+=1),g.status!=="Resolved"&&(S.openCount+=1,k!==null&&(!S.oldestOpenTs||k<S.oldestOpenTs)&&(S.oldestOpenTs=k))});const C=Object.values(w).map(g=>{const{hostel:x,category:I,total:R,high:k,recent24h:S,openCount:de}=g,Re=g.oldestOpenTs!==null?(_-g.oldestOpenTs)/(1e3*60*60):0;let It=0;de>0&&Re>0&&(It=Math.min(Re,48)/48);const Dt=.35*R+.8*k+1.1*S+.9*de+1.1*It,F=hR(Dt/3.5),$=Math.round(F*100);return{hostel:x,category:I,total:R,high:k,recent24h:S,openCount:de,probability:$}});C.sort((g,x)=>x.probability-g.probability);const O=(r.hostel||"").trim().toLowerCase();let j=null,E=[];return O&&(E=C.filter(g=>g.hostel.toLowerCase()===O).slice(0,3),j=E.find(g=>g.category===r.category)||null),{currentPair:j,topForHostel:E}},[e,r.hostel,r.category]);return d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 3fr) minmax(0, 2fr)",gap:"24px"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{marginBottom:"18px",padding:"16px 18px",borderRadius:"16px",background:"linear-gradient(135deg, #1d4ed8, #6366f1)",color:"white",boxShadow:"0 18px 35px rgba(37,99,235,0.35)"},children:[d.jsx("p",{style:{fontSize:"0.85rem",opacity:.9},children:"Reporter  Smart Campus"}),d.jsxs("h2",{style:{fontSize:"1.4rem",fontWeight:600,marginTop:4},children:["Hi ",(t==null?void 0:t.name)||"Reporter",", log an issue in seconds."]}),d.jsx("p",{style:{fontSize:"0.9rem",marginTop:6,opacity:.95},children:"As you report, our model updates risk scores for each hostel and problem type to prevent repeated breakdowns."})]}),d.jsxs("div",{style:{padding:"18px 20px",borderRadius:"16px",background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10,alignItems:"center"},children:[d.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:600},children:"Create New Incident"}),d.jsx(kt,{to:"/reporter/incidents",style:{fontSize:"0.85rem",color:"#2563eb",textDecoration:"none"},children:"View my incidents "})]}),s&&d.jsx("div",{style:{marginBottom:10,padding:"8px 10px",borderRadius:8,background:"#fee2e2",color:"#b91c1c",fontSize:"0.85rem"},children:s}),l&&d.jsx("div",{style:{marginBottom:10,padding:"8px 10px",borderRadius:8,background:"#dcfce7",color:"#166534",fontSize:"0.85rem"},children:l}),d.jsxs("form",{onSubmit:A,style:{display:"grid",gap:"10px",marginTop:4},children:[d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",fontSize:"0.8rem",marginBottom:4,color:"#4b5563"},children:"Title"}),d.jsx("input",{name:"title",value:r.title,onChange:m,placeholder:"Short summary (e.g., Power outage in Hostel A - Room 101)",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",fontSize:"0.9rem"}})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:r.category==="Other"?"1.2fr 1.2fr 1.2fr 1.3fr":"1.2fr 1.2fr 1.2fr",gap:10},children:[d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",fontSize:"0.8rem",marginBottom:4,color:"#4b5563"},children:"Category"}),d.jsxs("select",{name:"category",value:r.category,onChange:m,style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",fontSize:"0.9rem"},children:[d.jsx("option",{children:"Electricity"}),d.jsx("option",{children:"Water"}),d.jsx("option",{children:"Internet"}),d.jsx("option",{children:"Hostel"}),d.jsx("option",{children:"Equipment"}),d.jsx("option",{children:"Other"})]})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",fontSize:"0.8rem",marginBottom:4,color:"#4b5563"},children:"Hostel / Block"}),d.jsx("input",{name:"hostel",value:r.hostel,onChange:m,placeholder:"e.g., Hostel A",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",fontSize:"0.9rem"}}),d.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:2},children:'Use the same name (e.g., "Hostel A") so all reports from that hostel are grouped correctly.'})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",fontSize:"0.8rem",marginBottom:4,color:"#4b5563"},children:"Room / Spot"}),d.jsx("input",{name:"room",value:r.room,onChange:m,placeholder:"e.g., 101, Ground floor lobby",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",fontSize:"0.9rem"}})]}),r.category==="Other"&&d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",fontSize:"0.8rem",marginBottom:4,color:"#4b5563"},children:'Priority (for "Other")'}),d.jsxs("select",{name:"manualPriority",value:r.manualPriority,onChange:m,style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",fontSize:"0.9rem"},children:[d.jsx("option",{value:"High",children:"High"}),d.jsx("option",{value:"Medium",children:"Medium"}),d.jsx("option",{value:"Low",children:"Low"})]})]})]}),d.jsxs("div",{style:{marginTop:2},children:[d.jsx("button",{type:"button",onClick:y,style:{fontSize:"0.75rem",padding:"4px 8px",borderRadius:999,border:"1px dashed #9ca3af",background:"#f9fafb",cursor:"pointer"},children:h.loading?"Capturing GPS...":"Use my GPS (beta)"}),h.lat&&h.lng&&d.jsxs("span",{style:{marginLeft:8,fontSize:"0.75rem",color:"#6b7280"},children:["Captured: ",h.lat.toFixed(4),", ",h.lng.toFixed(4)]}),h.error&&d.jsx("div",{style:{fontSize:"0.75rem",color:"#b91c1c",marginTop:2},children:h.error})]}),T.currentPair&&d.jsxs("div",{style:{marginTop:4,padding:"8px 10px",borderRadius:10,background:"#eff6ff",border:"1px dashed #bfdbfe",fontSize:"0.8rem",color:"#1d4ed8"},children:[d.jsxs("strong",{children:["AI prediction for ",T.currentPair.hostel," "," ",T.currentPair.category,":"]})," ","~",T.currentPair.probability,"% chance of another"," ",T.currentPair.category.toLowerCase()," issue soon, based on"," ",T.currentPair.total," past incidents (",T.currentPair.high," high priority,"," ",T.currentPair.recent24h," in last 24h,"," ",T.currentPair.openCount," currently open)."]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",fontSize:"0.8rem",marginBottom:4,color:"#4b5563"},children:"Description"}),d.jsx("textarea",{name:"description",value:r.description,onChange:m,rows:4,placeholder:"Describe the issue, how long it has been happening, any safety concerns, etc.",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",fontSize:"0.9rem",resize:"vertical"}})]}),d.jsxs("div",{children:[d.jsx("label",{style:{display:"block",fontSize:"0.8rem",marginBottom:4,color:"#4b5563"},children:"Image URL (optional)"}),d.jsx("input",{name:"imageUrl",value:r.imageUrl,onChange:m,placeholder:"Paste a hosted image link if available",style:{width:"100%",padding:"8px 10px",borderRadius:10,border:"1px solid #d1d5db",fontSize:"0.9rem"}})]}),d.jsx("button",{type:"submit",style:{marginTop:6,padding:"10px 14px",borderRadius:"999px",border:"none",fontWeight:600,fontSize:"0.95rem",background:"linear-gradient(135deg, #10b981, #22c55e)",color:"white",cursor:"pointer",justifySelf:"flex-start"},children:"Submit incident"})]}),b.length>0&&d.jsxs("div",{style:{marginTop:16,padding:"10px 14px",borderRadius:12,background:"#ecfdf5",border:"1px dashed #6ee7b7",fontSize:"0.85rem",color:"#065f46"},children:[d.jsx("strong",{children:"Prediction insights:"}),d.jsx("ul",{style:{marginTop:6,paddingLeft:"18px"},children:b.map((_,w)=>d.jsx("li",{children:_},w))})]}),T.topForHostel.length>0&&d.jsxs("div",{style:{marginTop:12,padding:"10px 14px",borderRadius:12,background:"#f9fafb",border:"1px solid #e5e7eb",fontSize:"0.8rem",color:"#4b5563"},children:[d.jsxs("strong",{children:["Hotspots in ",T.topForHostel[0].hostel," (by model):"]}),d.jsx("ul",{style:{marginTop:6,paddingLeft:18},children:T.topForHostel.slice(0,2).map(_=>d.jsxs("li",{children:[_.category,"  ",_.probability,"% risk  ",_.total," incidents (",_.high," high, ",_.recent24h," in last 24h)"]},_.category))})]})]})]}),d.jsx("div",{children:d.jsxs("div",{style:{padding:"16px 18px",borderRadius:"16px",background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)"},children:[d.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:600,marginBottom:10},children:"Recent incidents by you"}),P.length===0&&d.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"You haven't logged any incidents yet. Your last 4 incidents will appear here once you submit."}),d.jsx("div",{style:{display:"grid",gap:10},children:P.map(_=>d.jsxs("div",{style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",background:"#f9fafb"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[d.jsx("div",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827"},children:_.title}),d.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:999,background:_.priority==="High"?"#fee2e2":_.priority==="Medium"?"#fef3c7":"#dcfce7",color:_.priority==="High"?"#b91c1c":_.priority==="Medium"?"#92400e":"#166534"},children:[_.priority," priority"]})]}),d.jsxs("p",{style:{fontSize:"0.8rem",color:"#4b5563",marginBottom:4},children:[_.category,"  ",_.location||`${_.hostel} - Room ${_.room}`]}),d.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",maxHeight:40,overflow:"hidden",textOverflow:"ellipsis"},children:_.description}),d.jsxs("div",{style:{marginTop:6,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:999,background:"#e0f2fe",color:"#0369a1"},children:_.status}),d.jsx("span",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:_.createdAt?new Date(_.createdAt).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}):""})]})]},_.id))}),P.length>0&&d.jsx("div",{style:{marginTop:10},children:d.jsx(kt,{to:"/reporter/incidents",style:{fontSize:"0.85rem",color:"#2563eb",textDecoration:"none"},children:"See full incident history "})})]})})]})}function fR(t){return 1/(1+Math.exp(-t))}function pR(){const[t,e]=z.useState([]);z.useEffect(()=>{const P=Xd(T=>{e(T)});return()=>P()},[]);const n=z.useMemo(()=>{const P=t.length,T=t.filter(F=>F.status!=="Resolved").length,_=t.filter(F=>F.status==="Resolved").length,w=t.filter(F=>F.priority==="High").length,C=Date.now(),O=30*60*1e3,j=t.filter(F=>{if(!F.createdAt||F.status==="Resolved")return!1;const $=new Date(F.createdAt).getTime();return C-$>O}).length,E={},g={};t.forEach(F=>{const $=(F.hostel||F.location||"Unknown").trim(),K=F.category||"Other",ee=F.createdAt?new Date(F.createdAt).getTime():null;E[$]||(E[$]={total:0,high:0}),E[$].total+=1,F.priority==="High"&&(E[$].high+=1);const oe=`${$.toLowerCase()}__${K}`;g[oe]||(g[oe]={hostel:$,category:K,total:0,high:0,recent24h:0,last7d:0,openCount:0,oldestOpenTs:null});const Ce=g[oe];if(Ce.total+=1,F.priority==="High"&&(Ce.high+=1),ee!==null){const Me=C-ee;Me<=24*60*60*1e3&&(Ce.recent24h+=1),Me<=7*24*60*60*1e3&&(Ce.last7d+=1)}F.status!=="Resolved"&&(Ce.openCount+=1,ee!==null&&(!Ce.oldestOpenTs||ee<Ce.oldestOpenTs)&&(Ce.oldestOpenTs=ee))});const x=Object.entries(E).map(([F,$])=>({location:F,total:$.total,high:$.high})),I=x.reduce((F,$)=>$.total>F?$.total:F,0),R=Object.values(g).map(F=>{const{hostel:$,category:K,total:ee,high:oe,recent24h:Ce,last7d:Me,openCount:jt}=F,rt=F.oldestOpenTs!==null?(C-F.oldestOpenTs)/(1e3*60*60):0;let Ot=0;jt>0&&rt>0&&(Ot=Math.min(rt,48)/48);const Bi=.35*ee+.8*oe+1.1*Ce+.7*Me+.9*jt+1.3*Ot,So=fR(Bi/3.5),Br=Math.round(So*100),Wl=Ce||Math.max(ee/5,.5),Io=Math.max(0,Math.round(Br/100*Wl));let dr="Low";return Br>=75?dr="High":Br>=50&&(dr="Medium"),{hostel:$,category:K,total:ee,high:oe,recent24h:Ce,last7d:Me,openCount:jt,oldestAgeHours:Math.round(rt),probability:Br,expectedNext24h:Io,band:dr}});R.sort((F,$)=>$.probability-F.probability);const k=[];for(let F=6;F>=0;F--){const $=new Date(C-F*24*60*60*1e3),K=$.toISOString().slice(0,10),ee=t.filter(oe=>oe.createdAt&&oe.createdAt.slice(0,10)===K).length;k.push({label:$.toLocaleDateString(void 0,{weekday:"short"}),count:ee})}const S=k.reduce((F,$)=>$.count>F?$.count:F,0),de=P===0?0:(T+2*w+3*j)/(P||1);let Re=Math.round(100-22*de);Re<0&&(Re=0),Re>100&&(Re=100);let It="Healthy",Dt="#16a34a";return Re<40?(It="Critical",Dt="#b91c1c"):Re<70&&(It="Warning",Dt="#ea580c"),{total:P,open:T,resolved:_,highPriority:w,slaBreached:j,heatmap:x,maxTotal:I,riskPairs:R,last7Days:k,maxDayCount:S,healthScore:Re,healthLabel:It,healthColor:Dt}},[t]),{total:r,open:i,resolved:s,highPriority:o,slaBreached:l,heatmap:u,maxTotal:h,riskPairs:p,last7Days:m,maxDayCount:y,healthScore:A,healthLabel:b,healthColor:N}=n;return d.jsxs("div",{style:{display:"grid",gap:20},children:[d.jsxs("div",{children:[d.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:600,marginBottom:4},children:"Admin Control Centre"}),d.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Live overview of all incidents across hostels, AI-based risk prediction for each (hostel, category) pair, campus health, and SLA risks."})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.2fr) minmax(0, 2fr)",gap:16},children:[d.jsxs("div",{style:{padding:"16px 18px",borderRadius:16,background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)",display:"flex",flexDirection:"column",gap:10},children:[d.jsx("p",{style:{fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:1,color:"#6b7280"},children:"Campus health score"}),d.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center"},children:[d.jsx("div",{style:{width:80,height:80,borderRadius:"999px",background:"conic-gradient("+N+" "+A+"%, #e5e7eb 0)",display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsxs("div",{style:{width:58,height:58,borderRadius:"999px",background:"white",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[d.jsx("span",{style:{fontSize:"1.2rem",fontWeight:700,color:N},children:A}),d.jsx("span",{style:{fontSize:"0.7rem",color:"#6b7280"},children:"/100"})]})}),d.jsxs("div",{children:[d.jsxs("p",{style:{fontSize:"0.95rem",fontWeight:600,color:"#0f172a"},children:[b," campus state"]}),d.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:4},children:"This score combines open incidents, high-priority problems and SLA breaches. More long-lived, high-severity tickets reduce the score and highlight operational risk."})]})]})]}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(150px,1fr))",gap:12},children:[{label:"Total incidents",value:r,border:"#3b82f6",bg:"rgba(59,130,246,0.08)"},{label:"Open incidents",value:i,border:"#f97316",bg:"rgba(249,115,22,0.08)"},{label:"Resolved",value:s,border:"#22c55e",bg:"rgba(34,197,94,0.08)"},{label:"High priority",value:o,border:"#ef4444",bg:"rgba(239,68,68,0.08)"},{label:"SLA risks (30+ min)",value:l,border:"#0f172a",bg:"rgba(15,23,42,0.04)"}].map(P=>d.jsxs("div",{style:{padding:"12px 14px",borderRadius:16,border:`1px solid ${P.border}`,background:P.bg},children:[d.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",marginBottom:4},children:P.label}),d.jsx("p",{style:{fontSize:"1.3rem",fontWeight:700,color:"#0f172a"},children:P.value})]},P.label))})]}),d.jsxs("div",{style:{padding:"16px 18px",borderRadius:16,background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)"},children:[d.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:600,marginBottom:6},children:"AI risk prediction  all hostel & category combinations"}),d.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",marginBottom:10},children:["For each ",d.jsx("strong",{children:"(hostel, category)"})," pair with at least one incident, we build a feature vector: total incidents, number of high-priority cases, activity in the last 24 hours and 7 days, number of open tickets and how long the oldest open ticket has been waiting. These are combined into a weighted risk score and passed through a"," ",d.jsx("strong",{children:"logistic (sigmoid)"})," function to obtain a probability of another incident in the near future."]}),p.length===0?d.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"No incidents yet. As soon as reporters log issues, AI risk scores for each hostel & problem type will appear here."}):d.jsx("div",{style:{marginTop:6,display:"grid",gap:10},children:p.map(P=>d.jsxs("div",{style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",background:"#f9fafb"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4,alignItems:"center"},children:[d.jsxs("div",{children:[d.jsxs("div",{style:{fontSize:"0.95rem",fontWeight:600,color:"#0f172a"},children:[P.hostel,"  ",P.category]}),d.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:[P.total," incidents total  ",P.high," high priority "," ",P.recent24h," in last 24h  ",P.last7d," in last 7d"]}),d.jsxs("div",{style:{fontSize:"0.78rem",color:"#6b7280",marginTop:2},children:[P.openCount," open ticket",P.openCount===1?"":"s",P.openCount>0&&`  oldest open ~ ${P.oldestAgeHours}h`]})]}),d.jsxs("div",{style:{textAlign:"right"},children:[d.jsxs("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:["Risk of another ",P.category.toLowerCase()," issue here"]}),d.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:700,color:P.band==="High"?"#b91c1c":P.band==="Medium"?"#92400e":"#15803d"},children:[P.probability,"%"]}),d.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:2},children:["Band: ",d.jsx("strong",{children:P.band}),"  Expected next 24h:"," ",d.jsx("strong",{children:P.expectedNext24h})," incident",P.expectedNext24h===1?"":"s"]})]})]}),d.jsx("div",{style:{marginTop:6,height:8,borderRadius:999,background:"#e5e7eb",overflow:"hidden"},children:d.jsx("div",{style:{width:`${P.probability}%`,height:"100%",background:P.band==="High"?"linear-gradient(90deg,#ef4444,#f97316)":P.band==="Medium"?"linear-gradient(90deg,#f97316,#eab308)":"linear-gradient(90deg,#22c55e,#16a34a)"}})}),d.jsxs("p",{style:{marginTop:4,fontSize:"0.78rem",color:"#6b7280"},children:["Interpretation: frequently recurring, high-priority and long-lived"," ",d.jsx("strong",{children:P.category.toLowerCase()})," issues in"," ",d.jsx("strong",{children:P.hostel})," push this probability upward. Admins can proactively schedule checks or preventive maintenance for the highest-risk pairs."]})]},`${P.hostel}__${P.category}`))})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1.3fr) minmax(0, 1.7fr)",gap:16},children:[d.jsxs("div",{style:{padding:"16px 18px",borderRadius:16,background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)"},children:[d.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:600,marginBottom:6},children:"Incident trend  last 7 days"}),d.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:12},children:"Shows whether incident volume on campus is trending up or down. This supports pattern and trend detection in the evaluation."}),m.length===0?d.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"No incidents yet."}):d.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:10,height:150,paddingBottom:8},children:m.map(P=>{const T=y>0?20+P.count/y*80:0;return d.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",gap:4,fontSize:"0.75rem"},children:[d.jsx("div",{style:{width:"70%",height:`${T}%`,borderRadius:999,background:"linear-gradient(180deg,#2563eb,#38bdf8)"}}),d.jsx("span",{style:{color:"#6b7280"},children:P.label}),d.jsx("span",{style:{color:"#111827"},children:P.count})]},P.label)})})]}),d.jsxs("div",{style:{padding:"16px 18px",borderRadius:16,background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)"},children:[d.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:600,marginBottom:6},children:"Hostel / Block heatmap"}),d.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:12},children:"Distribution of incidents by hostel/block. Darker bars mean more incidents; the orange/red gradient shows locations with a high concentration of high-priority issues."}),u.length===0?d.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"No incidents yet. Ask a reporter to create a few demo complaints."}):d.jsx("div",{style:{display:"grid",gap:10},children:u.map(P=>{const T=h>0?20+P.total/h*80:0,_=P.high>0;return d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.85rem",marginBottom:4},children:[d.jsx("span",{style:{fontWeight:500},children:P.location}),d.jsxs("span",{style:{color:"#6b7280"},children:[P.total," incidents  ",P.high," high"]})]}),d.jsx("div",{style:{height:10,borderRadius:999,background:"#e5e7eb",overflow:"hidden"},children:d.jsx("div",{style:{width:`${T}%`,height:"100%",background:_?"linear-gradient(90deg,#ef4444,#f97316)":"linear-gradient(90deg,#60a5fa,#22c55e)"}})})]},P.location)})})]})]})]})}const U_="notifications_v1";function mR(){try{const t=localStorage.getItem(U_);return t?JSON.parse(t):[]}catch{return[]}}function gR(t){localStorage.setItem(U_,JSON.stringify(t))}function Cn(t){const e=mR();e.unshift(t),gR(e)}function Ig(t){if(!t)return"-";const e=Date.now(),n=new Date(t).getTime(),r=Math.max(0,Math.round((e-n)/(1e3*60)));if(r<60)return`${r} min`;const i=r/60;return i<24?`${i.toFixed(1)} h`:`${(i/24).toFixed(1)} d`}function aa(t){if(!t)return!1;const e=Date.now(),n=new Date(t).getTime();return(e-n)/(1e3*60)>30}function yR(){const{user:t}=ur(),[e,n]=z.useState([]),[r,i]=z.useState("all"),[s,o]=z.useState(""),[l,u]=z.useState(""),[h,p]=z.useState(null),m=(t==null?void 0:t.email)||"tech";z.useEffect(()=>{const w=Xd(C=>{n(C)});return()=>w()},[]);const y=z.useMemo(()=>{const w=e.filter(j=>j.assignedTo===m&&j.status!=="Resolved"),C=w.filter(j=>j.status==="In Progress"),O=w.filter(j=>aa(j.createdAt));return{assignedCount:w.length,inProgressCount:C.length,slaRiskCount:O.length}},[e,m]),A=z.useMemo(()=>{let w=e.filter(O=>O.status!=="Resolved");r!=="all"&&(w=w.filter(O=>O.priority===r));const C={High:0,Medium:1,Low:2};return[...w].sort((O,j)=>{const E=aa(O.createdAt),g=aa(j.createdAt);if(E&&!g)return-1;if(!E&&g)return 1;const x=C[O.priority]??3,I=C[j.priority]??3;return x!==I?x-I:new Date(j.createdAt).getTime()-new Date(O.createdAt).getTime()})},[e,r]),b=async w=>{o(""),u("");const C=e.find(E=>E.id===w);if(C&&p(C),e.filter(E=>E.assignedTo===m&&E.status!=="Resolved").length>=1){o("You already have an assigned incident. Resolve or release it before taking a new one (no overlapping tasks).");return}if(!C)return;if(C.assignedTo&&C.assignedTo!==m){o("This incident is already assigned to another technician.");return}const j=new Date().toISOString();try{await oa(C.firestoreId||C.id,{assignedTo:m,assignedName:(t==null?void 0:t.name)||"Technician",assignedAt:j}),u("Incident assigned to you. Full details shown above.");const E=C.location||[C.hostel,C.room?`Room ${C.room}`:null].filter(Boolean).join(" - "),g=`${C.category} issue in ${E}`,x=new Date().toISOString();C.reporterEmail&&Cn({id:Date.now()+1,targetRole:"reporter",targetEmail:C.reporterEmail,title:"Technician assigned",message:`A technician has been assigned to your ${g}.`,createdAt:x}),Cn({id:Date.now()+2,targetRole:"admin",targetEmail:null,title:"Technician assigned",message:`Technician ${(t==null?void 0:t.name)||""} took ownership of ${g}.`,createdAt:x})}catch(E){console.error("Failed to assign incident",E),o("Could not assign this incident. Please try again.")}},N=async w=>{o(""),u("");const C=e.find(E=>E.id===w);if(C&&p(C),!C)return;if(e.filter(E=>E.assignedTo===m&&E.status==="In Progress").length>=1){o("You already have one task in progress. Finish it before starting another.");return}if(C.assignedTo!==m){o("You can only start work on incidents assigned to you.");return}const j=new Date().toISOString();try{await oa(C.firestoreId||C.id,{status:"In Progress",startedAt:j}),u("Work started on incident. Full details shown above.");const E=C.location||[C.hostel,C.room?`Room ${C.room}`:null].filter(Boolean).join(" - "),g=`${C.category} issue in ${E}`,x=new Date().toISOString();C.reporterEmail&&Cn({id:Date.now()+1,targetRole:"reporter",targetEmail:C.reporterEmail,title:"Issue being worked on",message:`A technician has started working on your ${g}.`,createdAt:x}),Cn({id:Date.now()+2,targetRole:"admin",targetEmail:null,title:"Issue being worked on",message:`Technician ${(t==null?void 0:t.name)||""} started ${g}.`,createdAt:x})}catch(E){console.error("Failed to start work",E),o("Could not update status. Please try again.")}},P=async w=>{o(""),u("");const C=e.find(j=>j.id===w);if(C&&p(C),!C)return;if(C.assignedTo!==m){o("You can only resolve incidents assigned to you.");return}const O=new Date().toISOString();try{await oa(C.firestoreId||C.id,{status:"Resolved",resolvedAt:O}),u("Incident resolved. Full details shown above.");const j=C.location||[C.hostel,C.room?`Room ${C.room}`:null].filter(Boolean).join(" - "),E=`${C.category} issue in ${j}`,g=new Date().toISOString();C.reporterEmail&&Cn({id:Date.now()+1,targetRole:"reporter",targetEmail:C.reporterEmail,title:"Issue resolved",message:`Your ${E} has been marked as resolved.`,createdAt:g}),Cn({id:Date.now()+2,targetRole:"admin",targetEmail:null,title:"Issue resolved",message:`Technician ${(t==null?void 0:t.name)||""} resolved ${E}.`,createdAt:g})}catch(j){console.error("Failed to resolve incident",j),o("Could not resolve this incident. Please try again.")}},T=async w=>{o(""),u("");const C=e.find(O=>O.id===w);if(C&&p(C),!!C){if(C.assignedTo!==m){o("You can only release incidents assigned to you.");return}try{await oa(C.firestoreId||C.id,{assignedTo:null,assignedName:null,assignedAt:null,startedAt:null,status:"New"}),u("Assignment released. Incident is back in the pool.");const O=C.location||[C.hostel,C.room?`Room ${C.room}`:null].filter(Boolean).join(" - "),j=`${C.category} issue in ${O}`,E=new Date().toISOString();C.reporterEmail&&Cn({id:Date.now()+1,targetRole:"reporter",targetEmail:C.reporterEmail,title:"Technician reassigned",message:`Your ${j} has been released and may be picked up by another technician.`,createdAt:E}),Cn({id:Date.now()+2,targetRole:"admin",targetEmail:null,title:"Technician reassigned",message:`Incident ${j} was released by ${(t==null?void 0:t.name)||""} and is unassigned again.`,createdAt:E})}catch(O){console.error("Failed to release incident",O),o("Could not release this incident. Please try again.")}}},_=w=>{if(w.location)return w.location;const C=[];return w.hostel&&C.push(w.hostel),w.room&&C.push(`Room ${w.room}`),C.join(" - ")||"Unknown location"};return d.jsxs("div",{style:{display:"grid",gap:20},children:[d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 1.2fr)",gap:16},children:[d.jsxs("div",{children:[d.jsx("h2",{style:{fontSize:"1.3rem",fontWeight:600,marginBottom:4},children:"Technician workload"}),d.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Take ownership of incidents, avoid overlapping assignments, and keep admins and reporters updated as you work."})]}),d.jsxs("div",{style:{padding:"10px 12px",borderRadius:14,background:"white",boxShadow:"0 10px 26px rgba(15,23,42,0.08)",display:"flex",justifyContent:"space-between",fontSize:"0.85rem"},children:[d.jsxs("div",{children:[d.jsx("p",{style:{color:"#6b7280"},children:"Assigned to you"}),d.jsx("p",{style:{fontWeight:600},children:y.assignedCount})]}),d.jsxs("div",{children:[d.jsx("p",{style:{color:"#6b7280"},children:"In progress"}),d.jsx("p",{style:{fontWeight:600},children:y.inProgressCount})]}),d.jsxs("div",{children:[d.jsx("p",{style:{color:"#6b7280"},children:"SLA risks (> 30 min)"}),d.jsx("p",{style:{fontWeight:600,color:y.slaRiskCount>0?"#b91c1c":"#16a34a"},children:y.slaRiskCount})]})]})]}),h&&d.jsxs("div",{style:{padding:"14px 16px",borderRadius:16,background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)"},children:[d.jsx("p",{style:{fontSize:"0.8rem",textTransform:"uppercase",letterSpacing:1,color:"#6b7280",marginBottom:6},children:"Selected incident details"}),d.jsx("h3",{style:{fontSize:"1rem",fontWeight:600,marginBottom:4,color:"#0f172a"},children:h.title}),d.jsxs("p",{style:{fontSize:"0.85rem",color:"#4b5563",marginBottom:4},children:[h.category," "," ",_(h)]}),d.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",marginBottom:6},children:["Hostel: ",h.hostel||"","  Room:"," ",h.room||""]}),d.jsx("p",{style:{fontSize:"0.85rem",color:"#111827",marginBottom:6},children:h.description}),d.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:12,fontSize:"0.8rem",color:"#6b7280"},children:[d.jsxs("span",{children:["Priority: ",d.jsx("strong",{children:h.priority})]}),d.jsxs("span",{children:["Status: ",d.jsx("strong",{children:h.status})]}),d.jsxs("span",{children:["Created:"," ",h.createdAt?new Date(h.createdAt).toLocaleString():""]}),d.jsxs("span",{children:["Age: ",Ig(h.createdAt)]}),h.latitude&&h.longitude&&d.jsxs("span",{children:["GPS:"," ",d.jsxs("a",{href:`https://www.google.com/maps?q=${h.latitude},${h.longitude}`,target:"_blank",rel:"noreferrer",style:{textDecoration:"underline",color:"#2563eb"},children:[h.latitude.toFixed(4),","," ",h.longitude.toFixed(4)]})]})]})]}),d.jsxs("div",{style:{padding:"16px 18px",borderRadius:16,background:"white",boxShadow:"0 12px 30px rgba(15,23,42,0.08)"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10,alignItems:"center"},children:[d.jsx("h3",{style:{fontSize:"1.05rem",fontWeight:600},children:"Open incidents"}),d.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[d.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280"},children:"Filter by priority:"}),d.jsxs("select",{value:r,onChange:w=>i(w.target.value),style:{fontSize:"0.8rem",padding:"4px 8px",borderRadius:999,border:"1px solid #d1d5db",background:"#f9fafb"},children:[d.jsx("option",{value:"all",children:"All"}),d.jsx("option",{value:"High",children:"High"}),d.jsx("option",{value:"Medium",children:"Medium"}),d.jsx("option",{value:"Low",children:"Low"})]})]})]}),s&&d.jsx("div",{style:{marginBottom:8,padding:"8px 10px",borderRadius:8,background:"#fee2e2",color:"#b91c1c",fontSize:"0.85rem"},children:s}),l&&d.jsx("div",{style:{marginBottom:8,padding:"8px 10px",borderRadius:8,background:"#e0f2fe",color:"#075985",fontSize:"0.85rem"},children:l}),A.length===0?d.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"No open incidents right now. Once reporters log issues, theyll appear here ranked by priority, SLA risk and recency."}):d.jsx("div",{style:{display:"grid",gap:10},children:A.map(w=>{const C=aa(w.createdAt),O=Ig(w.createdAt),j=w.assignedTo===m;let E="#e0f2fe",g="#0369a1";w.status==="In Progress"?(E="#fef3c7",g="#92400e"):w.status==="Resolved"&&(E="#dcfce7",g="#166534");const x=_(w);return d.jsxs("div",{style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",background:C?"#fef2f2":"#f9fafb"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[d.jsx("div",{style:{fontSize:"0.95rem",fontWeight:600,color:"#111827"},children:w.title}),d.jsxs("span",{style:{fontSize:"0.7rem",padding:"2px 8px",borderRadius:999,background:w.priority==="High"?"#fee2e2":w.priority==="Medium"?"#fef3c7":"#dcfce7",color:w.priority==="High"?"#b91c1c":w.priority==="Medium"?"#92400e":"#166534"},children:[w.priority," priority"]})]}),d.jsxs("p",{style:{fontSize:"0.8rem",color:"#4b5563",marginBottom:2},children:[w.category,"  ",x]}),w.latitude&&w.longitude&&d.jsxs("p",{style:{fontSize:"0.75rem",color:"#6b7280",marginBottom:4},children:["GPS:"," ",d.jsxs("a",{href:`https://www.google.com/maps?q=${w.latitude},${w.longitude}`,target:"_blank",rel:"noreferrer",style:{textDecoration:"underline",color:"#2563eb"},children:[w.latitude.toFixed(4),", ",w.longitude.toFixed(4)]})]}),d.jsx("p",{style:{fontSize:"0.8rem",color:"#6b7280",marginBottom:6},children:w.description}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[d.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[d.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:999,background:E,color:g},children:w.status}),w.assignedTo&&d.jsxs("span",{style:{fontSize:"0.75rem",color:j?"#16a34a":"#6b7280"},children:["Assigned to"," ",j?"you":w.assignedName||w.assignedTo||"technician"]}),C&&d.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:999,background:"#fee2e2",color:"#b91c1c"},children:"SLA > 30 min"})]}),d.jsx("div",{style:{fontSize:"0.75rem",color:"#6b7280",textAlign:"right"},children:d.jsxs("div",{children:["Age: ",O]})})]}),d.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[d.jsx("button",{type:"button",onClick:()=>p(w),style:{fontSize:"0.8rem",padding:"4px 9px",borderRadius:999,border:"1px solid #93c5fd",background:"#eff6ff",color:"#1d4ed8",cursor:"pointer"},children:"View full details"}),!w.assignedTo&&d.jsx("button",{type:"button",onClick:()=>b(w.id),style:{fontSize:"0.8rem",padding:"5px 10px",borderRadius:999,border:"1px solid #22c55e",background:"#ecfdf5",color:"#15803d",cursor:"pointer"},children:"Assign to me"}),j&&w.status==="New"&&d.jsxs(d.Fragment,{children:[d.jsx("button",{type:"button",onClick:()=>N(w.id),style:{fontSize:"0.8rem",padding:"5px 10px",borderRadius:999,border:"1px solid #f97316",background:"#fff7ed",color:"#c2410c",cursor:"pointer"},children:"Start work"}),d.jsx("button",{type:"button",onClick:()=>T(w.id),style:{fontSize:"0.8rem",padding:"5px 10px",borderRadius:999,border:"1px solid #d1d5db",background:"white",color:"#4b5563",cursor:"pointer"},children:"Release"})]}),j&&w.status==="In Progress"&&d.jsxs(d.Fragment,{children:[d.jsx("button",{type:"button",onClick:()=>P(w.id),style:{fontSize:"0.8rem",padding:"5px 10px",borderRadius:999,border:"1px solid #22c55e",background:"#ecfdf5",color:"#15803d",cursor:"pointer"},children:"Resolve"}),d.jsx("button",{type:"button",onClick:()=>T(w.id),style:{fontSize:"0.8rem",padding:"5px 10px",borderRadius:999,border:"1px solid #d1d5db",background:"white",color:"#4b5563",cursor:"pointer"},children:"Release"})]}),!j&&w.assignedTo&&d.jsx("span",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:"(Owned by another technician)"})]})]},w.id)})})]})]})}const vR="incidents_v1";function _R(){try{const t=localStorage.getItem(vR);return t?JSON.parse(t):[]}catch{return[]}}function Ag(t,e){return t==="priority"?e==="High"?{bg:"#fee2e2",color:"#b91c1c"}:e==="Medium"?{bg:"#fef3c7",color:"#92400e"}:{bg:"#dcfce7",color:"#166534"}:e==="Resolved"?{bg:"#dcfce7",color:"#15803d"}:e==="In Progress"||e==="Assigned"?{bg:"#e0f2fe",color:"#0369a1"}:{bg:"#f3f4f6",color:"#374151"}}function wR(){const{user:t}=ur(),[e,n]=z.useState([]);return z.useEffect(()=>{const i=_R().filter(s=>s.reporterEmail===((t==null?void 0:t.email)||"anonymous"));n(i)},[t]),d.jsxs("div",{children:[d.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("h2",{style:{fontSize:"1.2rem",fontWeight:600},children:"My Incident History"}),d.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280"},children:"All incidents you have reported on campus."})]}),d.jsx(kt,{to:"/reporter/dashboard",style:{fontSize:"0.85rem",color:"#2563eb",textDecoration:"none"},children:" Back to dashboard"})]}),e.length===0?d.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"No incidents yet. Create your first one from the dashboard."}):d.jsx("div",{style:{overflowX:"auto",borderRadius:12,border:"1px solid #e5e7eb",background:"white",boxShadow:"0 10px 26px rgba(15,23,42,0.06)"},children:d.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[d.jsx("thead",{children:d.jsx("tr",{style:{background:"#f9fafb",textAlign:"left"},children:["Title","Category","Location","Priority","Status","Created at"].map(r=>d.jsx("th",{style:{padding:"10px 12px",borderBottom:"1px solid #e5e7eb",color:"#6b7280",fontWeight:500},children:r},r))})}),d.jsx("tbody",{children:e.map(r=>{const i=Ag("priority",r.priority),s=Ag("status",r.status);return d.jsxs("tr",{children:[d.jsxs("td",{style:{padding:"9px 12px",borderBottom:"1px solid #f3f4f6",maxWidth:220},children:[d.jsx("div",{style:{fontWeight:500,color:"#111827",marginBottom:2},children:r.title}),d.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:r.description,children:r.description})]}),d.jsx("td",{style:{padding:"9px 12px",borderBottom:"1px solid #f3f4f6"},children:r.category}),d.jsx("td",{style:{padding:"9px 12px",borderBottom:"1px solid #f3f4f6"},children:r.location}),d.jsx("td",{style:{padding:"9px 12px",borderBottom:"1px solid #f3f4f6"},children:d.jsx("span",{style:{padding:"2px 8px",borderRadius:999,background:i.bg,color:i.color},children:r.priority})}),d.jsx("td",{style:{padding:"9px 12px",borderBottom:"1px solid #f3f4f6"},children:d.jsx("span",{style:{padding:"2px 8px",borderRadius:999,background:s.bg,color:s.color},children:r.status})}),d.jsx("td",{style:{padding:"9px 12px",borderBottom:"1px solid #f3f4f6",whiteSpace:"nowrap"},children:new Date(r.createdAt).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"})})]},r.id)})})]})})]})}const ER="notifications_v1";function xR(){try{const t=localStorage.getItem(ER);return t?JSON.parse(t):[]}catch{return[]}}function TR(){const{user:t}=ur(),[e,n]=z.useState([]);z.useEffect(()=>{const s=xR().filter(o=>!(o.targetRole&&o.targetRole!==(t==null?void 0:t.role)||o.targetEmail&&o.targetEmail!==(t==null?void 0:t.email)));s.sort((o,l)=>new Date(l.createdAt).getTime()-new Date(o.createdAt).getTime()),n(s)},[t]);const r=(t==null?void 0:t.role)==="admin"?"/admin/dashboard":(t==null?void 0:t.role)==="technician"?"/technician/dashboard":"/reporter/dashboard";return d.jsxs("div",{style:{display:"grid",gap:16},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{children:[d.jsx("h2",{style:{fontSize:"1.2rem",fontWeight:600},children:"Notifications"}),d.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"Smart alerts for new incidents, status changes and risk patterns."})]}),d.jsx(kt,{to:r,style:{fontSize:"0.85rem",color:"#2563eb",textDecoration:"none"},children:" Back to dashboard"})]}),e.length===0?d.jsx("p",{style:{fontSize:"0.9rem",color:"#6b7280"},children:"No notifications yet. As you create and update incidents, alerts will appear here."}):d.jsx("div",{style:{display:"grid",gap:10,padding:12,borderRadius:16,background:"white",boxShadow:"0 12px 26px rgba(15,23,42,0.08)"},children:e.map(i=>d.jsxs("div",{style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",background:"#f9fafb"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[d.jsx("span",{style:{fontSize:"0.8rem",fontWeight:600,color:"#0f172a"},children:i.title||"System alert"}),d.jsx("span",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:new Date(i.createdAt).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"})})]}),d.jsx("p",{style:{fontSize:"0.85rem",color:"#4b5563"},children:i.message})]},i.id))})]})}function fs({children:t,allowedRoles:e}){const{user:n}=ur();return n?e&&!e.includes(n.role)?d.jsx(um,{to:"/login",replace:!0}):t:d.jsx(um,{to:"/login",replace:!0})}function SR(){var n;const{user:t,logout:e}=ur();return d.jsxs("div",{className:"app-shell",children:[d.jsx("div",{className:"app-bg"}),d.jsxs("div",{className:"app-content",children:[d.jsxs("header",{style:{padding:"10px 24px",background:"#111827",color:"white",display:"flex",alignItems:"center",justifyContent:"space-between",position:"sticky",top:0,zIndex:20,borderRadius:18,marginTop:12,marginBottom:16,boxShadow:"0 18px 45px rgba(15,23,42,0.85)"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[d.jsx("div",{style:{width:28,height:28,borderRadius:999,background:"linear-gradient(135deg, #2563eb, #22c55e)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:700},children:"IT"}),d.jsx("h1",{style:{fontSize:"1.45rem",fontWeight:800,color:"#ffffff",textShadow:"0 0 10px #22c55e,0 0 18px #22c55e,0 0 26px #22c55e"},children:"Smart Campus Incident Tracker"})]}),d.jsxs("nav",{style:{display:"flex",alignItems:"center",gap:12},children:[d.jsx(kt,{to:"/",style:{color:"#e5e7eb",fontSize:"0.9rem",textDecoration:"none"},children:"Home"}),!t&&d.jsxs(d.Fragment,{children:[d.jsx(kt,{to:"/login",style:{color:"#e5e7eb",fontSize:"0.9rem"},children:"Login"}),d.jsx(kt,{to:"/register",style:{color:"#e5e7eb",fontSize:"0.9rem"},children:"Register"})]}),t&&d.jsxs(d.Fragment,{children:[d.jsx(kt,{to:"/notifications",style:{color:"#e5e7eb",fontSize:"0.85rem"},children:" Notifications"}),d.jsxs("span",{style:{fontSize:"0.8rem",color:"#9ca3af"},children:[(n=t.role)==null?void 0:n.toUpperCase(),"  ",t.name]}),d.jsx("button",{onClick:e,style:{fontSize:"0.8rem",padding:"4px 10px",borderRadius:999,border:"1px solid #4b5563",background:"transparent",color:"#e5e7eb",cursor:"pointer"},children:"Logout"})]})]})]}),d.jsx("main",{style:{padding:"8px 8px 24px"},children:d.jsxs(jx,{children:[d.jsx(an,{path:"/",element:d.jsx(qx,{})}),d.jsx(an,{path:"/login",element:d.jsx(Yx,{})}),d.jsx(an,{path:"/register",element:d.jsx(Zx,{})}),d.jsx(an,{path:"/reporter/dashboard",element:d.jsx(fs,{allowedRoles:["reporter"],children:d.jsx(dR,{})})}),d.jsx(an,{path:"/reporter/incidents",element:d.jsx(fs,{allowedRoles:["reporter"],children:d.jsx(wR,{})})}),d.jsx(an,{path:"/admin/dashboard",element:d.jsx(fs,{allowedRoles:["admin"],children:d.jsx(pR,{})})}),d.jsx(an,{path:"/technician/dashboard",element:d.jsx(fs,{allowedRoles:["technician"],children:d.jsx(yR,{})})}),d.jsx(an,{path:"/notifications",element:d.jsx(fs,{allowedRoles:["reporter","admin","technician"],children:d.jsx(TR,{})})})]})})]})]})}Ku.createRoot(document.getElementById("root")).render(d.jsx(Lg.StrictMode,{children:d.jsx(Bx,{children:d.jsx(Gx,{children:d.jsx(SR,{})})})}));
